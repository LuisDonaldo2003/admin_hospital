<!-- Fondo general de la pantalla de verificación de cuenta -->
<div class="background">
  <!-- Contenedor principal de la tarjeta -->
  <div class="card-container">
    <!-- Sección superior: logo y título -->
    <div class="text-center">
      <div class="logo-wrapper mb-3">
        <!-- Logo del hospital -->
        <img src="assets/img/logo-hospital.png" alt="Logo" class="logo-img" />
      </div>

      <h2 class="title">Verifica tu cuenta</h2>
      <!-- Muestra el email al que se envió el código -->
      <p class="subtitle">
        Te enviamos un código a <b>{{ form.get('email')?.value }}</b>
      </p>
    </div>

    <!-- Formulario de verificación de código -->
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <!-- Inputs para ingresar el código, uno por cada carácter -->
      <div class="code-inputs mb-3">
        <input *ngFor="let ctrl of codeControls; let i = index"
          type="text"
          maxlength="1"
          class="code-box"
          [formControl]="ctrl"
          (input)="autoFocusNext($event, i)"
          (keydown.backspace)="autoFocusPrev($event, i)"
          (paste)="handlePaste($event)"
        />
      </div>

      <!-- Temporizador de expiración del código -->
      <div *ngIf="!timerExpired" class="text-center small text-muted mb-2">
        El código expira en <b>{{ timerDisplay }}</b>
      </div>

      <!-- Mensaje y botón para reenviar el código si expiró -->
      <div *ngIf="timerExpired" class="alert alert-warning p-2 small text-center">
        El código ha expirado. <br>
        <button type="button" class="btn btn-sm btn-outline-secondary mt-2" (click)="resendCode()">Reenviar código</button>
      </div>

      <!-- Mensaje de error si la verificación falla -->
      <div *ngIf="errorMsg" class="alert alert-danger text-center mt-2">
        {{ errorMsg }}
      </div>

      <!-- Mensaje de éxito si la verificación es correcta -->
      <div *ngIf="successMsg" class="alert alert-success text-center mt-2">
        {{ successMsg }}
      </div>

      <!-- Botón para enviar el formulario de verificación -->
      <div class="d-flex justify-content-center">
        <button [disabled]="loading || timerExpired" class="btn btn-primary verify-btn mt-3">
          Verificar
        </button>
      </div>
    </form>
  </div>
</div>
