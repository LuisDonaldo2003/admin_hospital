<!-- Layout moderno de cambio de contraseña con imagen lateral -->
<div class="auth-layout">
  <aside class="side-visual" aria-hidden="true">
    <div class="image-frame">
      <img src="assets/img/login-02.png" alt="Fachada del hospital IMSS Bienestar" />
    </div>
  </aside>

  <main class="auth-col" aria-labelledby="resetTitle">
    <section class="auth-panel">
      <div class="brand" aria-label="Logo institucional">
        <img src="assets/img/login-logo.png" alt="Logo SISMEG" />
      </div>

      <h1 id="resetTitle" class="title">Nueva contraseña</h1>
      <p class="subtitle">
        Crea una contraseña segura para tu cuenta<br>
        <strong>{{ form.get('email')?.value }}</strong>
      </p>

      <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
        <!-- Campo para nueva contraseña -->
        <div class="field">
          <label for="password">Nueva contraseña <span class="req">*</span></label>
          <div class="control with-icon">
            <input 
              id="password" 
              type="password" 
              class="form-control" 
              placeholder="Mínimo 8 caracteres"
              formControlName="password"
              aria-describedby="password-help"
            />
            <i class="feather icon-lock field-icon" aria-hidden="true"></i>
          </div>
          <div class="password-requirements">
            <small>La contraseña debe contener al menos 8 caracteres</small>
          </div>
          <div *ngIf="form.get('password')?.invalid && form.get('password')?.touched" class="invalid-feedback">
            La contraseña debe tener al menos 8 caracteres
          </div>
        </div>

        <!-- Campo para confirmar contraseña -->
        <div class="field">
          <label for="confirmPassword">Confirmar contraseña <span class="req">*</span></label>
          <div class="control with-icon">
            <input 
              id="confirmPassword" 
              type="password" 
              class="form-control" 
              placeholder="Repite la contraseña"
              formControlName="confirmPassword"
            />
            <i class="feather icon-shield field-icon" aria-hidden="true"></i>
          </div>
          <div *ngIf="form.get('confirmPassword')?.invalid && form.get('confirmPassword')?.touched" class="invalid-feedback">
            Las contraseñas no coinciden
          </div>
        </div>

        <!-- Mensaje de error -->
        <div *ngIf="errorMsg" class="alert alert-danger">
          <i class="feather icon-alert-circle" aria-hidden="true"></i>
          {{ errorMsg }}
        </div>

        <!-- Mensaje de éxito -->
        <div *ngIf="successMsg" class="alert alert-success">
          <i class="feather icon-check-circle" aria-hidden="true"></i>
          {{ successMsg }}
        </div>

        <div class="actions">
          <button 
            type="submit" 
            class="btn btn-primary w-100" 
            [disabled]="loading || form.invalid"
          >
            <span *ngIf="!loading">
              <i class="feather icon-key" aria-hidden="true"></i>
              Cambiar contraseña
            </span>
            <span *ngIf="loading">
              <i class="fa fa-spinner fa-spin" aria-hidden="true"></i>
              Guardando cambios...
            </span>
          </button>
        </div>

        <div class="footer-links">
          <p class="muted">
            <i class="feather icon-info" aria-hidden="true"></i>
            Serás redirigido al login tras cambiar la contraseña
          </p>
        </div>
      </form>
    </section>
  </main>
</div>
  