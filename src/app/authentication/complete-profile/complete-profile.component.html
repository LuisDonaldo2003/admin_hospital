<!-- Layout moderno para completar perfil -->
<div class="profile-layout">
  <div class="profile-container">

    <!-- Header con logo y título -->
    <div class="profile-header">
      <div class="brand-circle">
        <img src="assets/img/login-logo.png" alt="Logo SISMEG" />
      </div>
      <h1 class="profile-title">Completa tu Perfil</h1>
      <p class="profile-subtitle">
        Bienvenido <strong>{{ name }} {{ surname }}</strong><br>
        Completa tu información profesional para continuar.
      </p>
    </div>

    <!-- Panel principal del formulario -->
    <div class="profile-panel">
      <form novalidate>

        <!-- Sección: Avatar (Ahora al inicio) -->
        <div class="avatar-section">
          <div class="avatar-preview" [class.has-image]="IMAGEN_PREVIZUALIZA">
            <img *ngIf="IMAGEN_PREVIZUALIZA" [src]="IMAGEN_PREVIZUALIZA" alt="Preview del avatar" />
            <div *ngIf="!IMAGEN_PREVIZUALIZA" class="avatar-placeholder">
              <i class="fas fa-camera" aria-hidden="true"></i>
            </div>
          </div>
          <div class="avatar-actions">
            <label class="file-upload-btn">
              <input type="file" accept="image/*" (change)="loadFile($event)" hidden />
              <i class="fas fa-upload" aria-hidden="true"></i>
              Subir Foto
            </label>
            <p class="upload-hint">Opcional. Formatos: JPG, PNG.</p>
          </div>
        </div>

        <div class="section-divider"></div>

        <!-- Grid de Datos -->
        <div class="form-grid">
          <!-- Móvil -->
          <div class="field-group">
            <label class="field-label">
              <i class="fas fa-phone" aria-hidden="true"></i>
              Número de móvil <span class="required">*</span>
            </label>
            <input type="text" class="form-input" [(ngModel)]="mobile" name="mobile" placeholder="Ej: 5551234567"
              required />
          </div>

          <!-- Fecha de Nacimiento -->
          <div class="field-group">
            <label class="field-label">
              <i class="fas fa-calendar-alt" aria-hidden="true"></i>
              Fecha de Nacimiento <span class="required">*</span>
            </label>
            <input type="date" class="form-input" [(ngModel)]="birth_date" name="birth_date" required />
          </div>

          <!-- Género -->
          <div class="field-group">
            <label class="field-label">
              <i class="fas fa-venus-mars" aria-hidden="true"></i>
              Género <span class="required">*</span>
            </label>
            <div class="radio-group">
              <label class="radio-option" *ngFor="let g of genders">
                <input type="radio" name="gender" [value]="g.id" [(ngModel)]="gender" required />
                <span class="radio-custom"></span>
                <span class="radio-text">{{ g.name }}</span>
              </label>
            </div>
          </div>

          <!-- No. de Asistencia -->
          <div class="field-group">
            <label class="field-label">
              <i class="fas fa-hashtag" aria-hidden="true"></i>
              No. de Asistencia <span class="required">*</span>
            </label>
            <input type="text" class="form-input" [(ngModel)]="attendance_number" name="attendance_number"
              placeholder="Número de asistencia" required />
          </div>
        </div>

        <!-- Mensajes de estado -->
        <div class="status-messages" *ngIf="text_success || text_validation">
          <div *ngIf="text_success" class="alert alert-success">
            <i class="fas fa-check-circle" aria-hidden="true"></i>
            <div class="alert-content">
              <strong>¡Perfecto!</strong>
              <span>{{ text_success }}</span>
            </div>
          </div>
          <div *ngIf="text_validation" class="alert alert-warning">
            <i class="fas fa-exclamation-triangle" aria-hidden="true"></i>
            <div class="alert-content">
              <strong>Atención</strong>
              <span>{{ text_validation }}</span>
            </div>
          </div>
        </div>

        <!-- Acciones del formulario -->
        <div class="form-actions">
          <button type="button" class="btn btn-primary btn-block" (click)="save()">
            <i class="fas fa-save" aria-hidden="true"></i>
            Guardar Perfil
          </button>
        </div>

      </form>
    </div>
  </div>
</div>