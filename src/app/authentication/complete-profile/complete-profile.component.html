<!-- Layout moderno para completar perfil -->
<div class="profile-layout">
  <div class="profile-container">
    
    <!-- Header con logo y título -->
    <div class="profile-header">
      <div class="brand-circle">
        <img src="assets/img/login-logo.png" alt="Logo SISMEG" />
      </div>
      <h1 class="profile-title">Completa tu Perfil</h1>
      <p class="profile-subtitle">
        Bienvenido <strong>{{ name }} {{ surname }}</strong><br>
        Completa tu información profesional para continuar.
      </p>
    </div>

    <!-- Panel principal del formulario -->
    <div class="profile-panel">
      <form novalidate>
        <!-- Sección: Información Personal -->
        <div class="form-section">
          <div class="section-header">
            <i class="fas fa-user section-icon" aria-hidden="true"></i>
            <h3 class="section-title">Información Personal</h3>
            <p class="section-subtitle">Datos personales básicos</p>
          </div>

          <div class="form-grid">
            <!-- Móvil -->
            <div class="field-group">
              <label class="field-label">
                <i class="fas fa-phone" aria-hidden="true"></i>
                Número de móvil <span class="required">*</span>
              </label>
              <input 
                type="text" 
                class="form-input" 
                [(ngModel)]="mobile" 
                name="mobile" 
                placeholder="Ej: 5551234567"
                required 
              />
            </div>

            <!-- Fecha de Nacimiento -->
            <div class="field-group">
              <label class="field-label">
                <i class="fas fa-calendar-alt" aria-hidden="true"></i>
                Fecha de Nacimiento <span class="required">*</span>
              </label>
              <input 
                type="date" 
                class="form-input" 
                [(ngModel)]="birth_date" 
                name="birth_date" 
                required 
              />
            </div>

            <!-- Género -->
            <div class="field-group">
              <label class="field-label">
                <i class="fas fa-venus-mars" aria-hidden="true"></i>
                Género <span class="required">*</span>
              </label>
              <div class="radio-group">
                <label class="radio-option" *ngFor="let g of genders">
                  <input type="radio" name="gender" [value]="g.id" [(ngModel)]="gender" required />
                  <span class="radio-custom"></span>
                  <span class="radio-text">{{ g.name }}</span>
                </label>
              </div>
            </div>
          </div>
        </div>

        <!-- Sección: Documentos de Identidad -->
        <div class="form-section">
          <div class="section-header">
            <i class="fas fa-file-alt section-icon" aria-hidden="true"></i>
            <h3 class="section-title">Documentos de Identidad</h3>
            <p class="section-subtitle">Información fiscal y de identificación</p>
          </div>

          <div class="form-grid grid-3">
            <!-- CURP -->
            <div class="field-group">
              <label class="field-label">
                <i class="fas fa-id-card" aria-hidden="true"></i>
                CURP
              </label>
              <input 
                type="text" 
                class="form-input" 
                [(ngModel)]="curp" 
                name="curp" 
                placeholder="CURP de 18 caracteres"
                maxlength="18"
              />
            </div>

            <!-- RFC -->
            <div class="field-group">
              <label class="field-label">
                <i class="fas fa-file-alt" aria-hidden="true"></i>
                RFC
              </label>
              <input 
                type="text" 
                class="form-input" 
                [(ngModel)]="rfc" 
                name="rfc" 
                placeholder="RFC de 12-13 caracteres"
                maxlength="13"
              />
            </div>

            <!-- INE -->
            <div class="field-group">
              <label class="field-label">
                <i class="fas fa-id-badge" aria-hidden="true"></i>
                INE
              </label>
              <input 
                type="text" 
                class="form-input" 
                [(ngModel)]="ine" 
                name="ine" 
                placeholder="Número de INE"
              />
            </div>
          </div>
        </div>

        <!-- Sección: Información Profesional -->
        <div class="form-section">
          <div class="section-header">
            <i class="fas fa-briefcase section-icon" aria-hidden="true"></i>
            <h3 class="section-title">Información Profesional</h3>
            <p class="section-subtitle">Datos laborales y académicos</p>
          </div>

          <div class="form-grid">
            <!-- No. de Asistencia -->
            <div class="field-group">
              <label class="field-label">
                <i class="fas fa-hashtag" aria-hidden="true"></i>
                No. de Asistencia <span class="required">*</span>
              </label>
              <input 
                type="text" 
                class="form-input" 
                [(ngModel)]="attendance_number" 
                name="attendance_number" 
                placeholder="Número de asistencia"
                required 
              />
            </div>

            <!-- Cédula Profesional -->
            <div class="field-group">
              <label class="field-label">
                <i class="fas fa-award" aria-hidden="true"></i>
                Cédula Profesional
              </label>
              <input 
                type="text" 
                class="form-input" 
                [(ngModel)]="professional_license" 
                name="professional_license" 
                placeholder="Número de cédula"
              />
            </div>

            <!-- Función Real -->
            <div class="field-group full-width">
              <label class="field-label">
                <i class="fas fa-tools" aria-hidden="true"></i>
                Función Real
              </label>
              <input 
                type="text" 
                class="form-input" 
                [(ngModel)]="funcion_real" 
                name="funcion_real" 
                placeholder="Descripción de tu función actual"
              />
            </div>
          </div>
        </div>

        <!-- Sección: Asignaciones -->
        <div class="form-section">
          <div class="section-header">
            <i class="fas fa-cog section-icon" aria-hidden="true"></i>
            <h3 class="section-title">Asignaciones</h3>
            <p class="section-subtitle">Departamento y perfil de trabajo</p>
          </div>

          <div class="form-grid grid-3">
            <!-- Departamento -->
            <div class="field-group">
              <label class="field-label">
                <i class="fas fa-layer-group" aria-hidden="true"></i>
                Departamento
              </label>
              <select class="form-select" [(ngModel)]="departament_id" name="departament_id">
                <option value="">Selecciona un departamento</option>
                <option *ngFor="let item of departaments" [value]="item.id">{{ item.name }}</option>
              </select>
            </div>

            <!-- Perfil Relacional -->
            <div class="field-group">
              <label class="field-label">
                <i class="fas fa-user-check" aria-hidden="true"></i>
                Perfil Relacional
              </label>
              <select class="form-select" [(ngModel)]="profile_id" name="profile_id">
                <option value="">Selecciona un perfil</option>
                <option *ngFor="let item of profiles" [value]="item.id">{{ item.name }}</option>
              </select>
            </div>

            <!-- Tipo de Contrato -->
            <div class="field-group">
              <label class="field-label">
                <i class="fas fa-file-alt" aria-hidden="true"></i>
                Tipo de Contrato
              </label>
              <select class="form-select" [(ngModel)]="contract_type_id" name="contract_type_id">
                <option value="">Selecciona tipo de contrato</option>
                <option *ngFor="let item of contractTypes" [value]="item.id">{{ item.name }}</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Sección: Avatar -->
        <div class="form-section">
          <div class="section-header">
            <i class="fas fa-image section-icon" aria-hidden="true"></i>
            <h3 class="section-title">Foto de Perfil</h3>
            <p class="section-subtitle">Sube tu imagen profesional</p>
          </div>

          <div class="avatar-upload">
            <div class="avatar-preview" [class.has-image]="IMAGEN_PREVIZUALIZA">
              <img 
                *ngIf="IMAGEN_PREVIZUALIZA" 
                [src]="IMAGEN_PREVIZUALIZA" 
                alt="Preview del avatar" 
                class="avatar-image"
              />
              <div *ngIf="!IMAGEN_PREVIZUALIZA" class="avatar-placeholder">
                <i class="fas fa-camera" aria-hidden="true"></i>
                <span>Sube tu foto</span>
              </div>
            </div>
            <div class="avatar-controls">
              <label class="file-upload-btn">
                <input 
                  type="file" 
                  accept="image/*" 
                  (change)="loadFile($event)" 
                  required 
                  hidden
                />
                <i class="fas fa-upload" aria-hidden="true"></i>
                Seleccionar imagen <span class="required">*</span>
              </label>
              <p class="upload-hint">Formatos: JPG, PNG. Máximo 5MB</p>
            </div>
          </div>
        </div>

        <!-- Mensajes de estado -->
          <div class="status-messages" *ngIf="text_success || text_validation">
          <div *ngIf="text_success" class="alert alert-success">
            <i class="fas fa-check-circle" aria-hidden="true"></i>
            <div class="alert-content">
              <strong>¡Perfecto!</strong>
              <span>{{ text_success }}</span>
            </div>
          </div>
          <div *ngIf="text_validation" class="alert alert-warning">
            <i class="fas fa-exclamation-triangle" aria-hidden="true"></i>
            <div class="alert-content">
              <strong>Atención</strong>
              <span>{{ text_validation }}</span>
            </div>
          </div>
        </div>

        <!-- Acciones del formulario -->
          <div class="form-actions">
          <button type="button" class="btn btn-primary" (click)="save()">
            <i class="fas fa-save" aria-hidden="true"></i>
            Guardar Perfil
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
