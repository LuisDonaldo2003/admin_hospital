<!--
  Contenedor principal de la página de edición de staff
-->
<div class="page-wrapper">
  <!-- Sección del contenido principal y formulario -->
  <div class="content edit-staff-form">
    <!-- Encabezado de la página con breadcrumb de navegación -->
    <div class="page-header mb-4">
      <div class="row">
        <div class="col-sm-12">
          <!-- Breadcrumb para mostrar la ruta de navegación -->
          <ol class="breadcrumb bg-light p-2 rounded">
            <li class="breadcrumb-item">
              <!-- Enlace al listado de usuarios -->
              <a href="#">{{ 'STAFF.EDIT_STAFF.BREADCRUMB_USERS' | translate }} ></a>
            </li>
            <li class="breadcrumb-item active">
              <!-- Texto del breadcrumb para editar staff -->
              {{ 'STAFF.EDIT_STAFF.BREADCRUMB_EDIT_STAFF' | translate }}
            </li>
          </ol>
        </div>
      </div>
    </div>

    <!-- Sección central del formulario -->
    <div class="row justify-content-center">
      <div class="col-lg-10 col-xl-8">
        <!-- Card que contiene el formulario -->
        <div class="card card-form shadow border-0">
          <div class="card-body p-4" *ngIf="staff_selected">
            <!-- Encabezado del formulario con icono -->
            <div class="form-header text-center mb-4">
              <div class="form-icon mb-3">
                <i class="fa fa-user-edit"></i>
              </div>
              <h3 class="fw-bold mb-2">{{ 'STAFF.EDIT_STAFF.TITLE' | translate }}</h3>
              <p class="text-muted small">{{ 'STAFF.EDIT_STAFF.DESCRIPTION' | translate }}</p>
            </div>

            <!-- Formulario para editar staff -->
            <form>
              <!-- Sección: Información Personal -->
              <div class="form-section">
                <div class="section-header mb-3">
                  <h5 class="section-title">
                    <i class="fa fa-user me-2"></i>{{ 'STAFF.EDIT_STAFF.PERSONAL_INFORMATION' | translate }}
                  </h5>
                </div>
                <div class="row g-3">
                  <!-- Campo para el nombre -->
                  <div class="col-md-6">
                    <label class="form-label">
                      <i class="fa fa-id-card me-1"></i>{{ 'STAFF.EDIT_STAFF.FIRST_NAME' | translate }} <span
                        class="text-danger">*</span>
                    </label>
                    <input type="text" class="form-control" [(ngModel)]="name" name="name" required
                      placeholder="Ingrese el nombre" [ngClass]="{ 'is-invalid': submitted && !name.trim() }" />
                    <div class="invalid-feedback" *ngIf="submitted && !name.trim()">El nombre es requerido</div>
                  </div>

                  <!-- Campo para el apellido -->
                  <div class="col-md-6">
                    <label class="form-label">
                      <i class="fa fa-id-card me-1"></i>{{ 'STAFF.EDIT_STAFF.SURNAME' | translate }} <span
                        class="text-danger">*</span>
                    </label>
                    <input type="text" class="form-control" [(ngModel)]="surname" name="surname" required
                      placeholder="Ingrese el apellido" [ngClass]="{ 'is-invalid': submitted && !surname.trim() }" />
                    <div class="invalid-feedback" *ngIf="submitted && !surname.trim()">El apellido es requerido</div>
                  </div>

                  <!-- Campo para el correo electrónico -->
                  <div class="col-12">
                    <label class="form-label">
                      <i class="fa fa-envelope me-1"></i>{{ 'STAFF.EDIT_STAFF.EMAIL' | translate }} <span
                        class="text-danger">*</span>
                    </label>
                    <input type="email" class="form-control" [(ngModel)]="email" name="email" required
                      placeholder="correo@ejemplo.com" [ngClass]="{ 'is-invalid': submitted && !email.trim() }" />
                    <div class="invalid-feedback" *ngIf="submitted && !email.trim()">{{
                      'STAFF.EDIT_STAFF.EMAIL_REQUIRED' | translate }}</div>
                  </div>
                </div>
              </div>

              <!-- Separador -->
              <div class="form-divider my-4"></div>

              <!-- Sección: Rol -->
              <div class="form-section">
                <div class="section-header mb-3">
                  <h5 class="section-title">
                    <i class="fa fa-shield-alt me-2"></i>{{ 'STAFF.EDIT_STAFF.ROLE_SECURITY' | translate }}
                  </h5>
                </div>
                <div class="row g-3">
                  <!-- Selección de rol para el staff -->
                  <div class="col-12">
                    <label class="form-label">
                      <i class="fa fa-user-tag me-1"></i>{{ 'STAFF.EDIT_STAFF.ROLE_SELECT' | translate }} <span
                        class="text-danger">*</span>
                    </label>
                    <select class="form-control form-select" [(ngModel)]="selectedValue" name="role" required
                      [ngClass]="{ 'is-invalid': submitted && !selectedValue }">
                      <!-- Opción por defecto -->
                      <option value="" disabled>{{ 'STAFF.EDIT_STAFF.SELECT_ROLE_PLACEHOLDER' | translate }}</option>
                      <!-- Opciones de roles disponibles -->
                      <option *ngFor="let data of roles" [value]="data.id">{{ data.name }}</option>
                    </select>
                    <div class="invalid-feedback" *ngIf="submitted && !selectedValue">Debe seleccionar un rol</div>
                  </div>
                </div>
              </div>

              <!-- Mensaje de validación si hay advertencias (controlado desde la plantilla) -->
              <div class="mt-4" *ngIf="showValidation">
                <div class="alert alert-modern alert-warning d-flex align-items-center">
                  <i class="fa fa-exclamation-triangle me-3"></i>
                  <div class="flex-grow-1">
                    <strong>{{ 'STAFF.EDIT_STAFF.WARNING' | translate }}:</strong>
                    <ng-container [ngSwitch]="validationType">
                      <span *ngSwitchCase="'missing'">
                        <span *ngFor="let f of missingFields; let last = last">
                          {{ f | translate }}<span *ngIf="!last">, </span>
                        </span>
                      </span>
                      <span *ngSwitchCase="'permission'">{{ backendErrorText }}</span>
                      <span *ngSwitchDefault>{{ 'STAFF.EDIT_STAFF.UNKNOWN_VALIDATION' | translate }}</span>
                    </ng-container>
                  </div>
                  <button type="button" class="btn-close" (click)="showValidation = false; validationType = 'none'"></button>
                </div>
              </div>

              <!-- Mensaje de éxito si la operación fue exitosa (controlado desde la plantilla) -->
              <div class="mt-4" *ngIf="showSuccess">
                <div class="alert alert-modern alert-success d-flex align-items-center">
                  <i class="fa fa-check-circle me-3"></i>
                  <div class="flex-grow-1">
                    <strong>{{ 'STAFF.EDIT_STAFF.SUCCESS' | translate }}:</strong> {{ 'STAFF.EDIT_STAFF.USER_UPDATED_SUCCESS' | translate }}
                  </div>
                  <button type="button" class="btn-close" (click)="showSuccess = false"></button>
                </div>
              </div>

              <!-- Botones de acción -->
              <div class="form-actions d-flex justify-content-end gap-2 mt-4">
                <button type="button" class="btn btn-cancel" routerLink="/staffs/list-staff">
                  <i class="fa fa-times me-2"></i>{{ 'STAFF.EDIT_STAFF.CANCEL' | translate }}
                </button>
                <button type="button" class="btn btn-save" (click)="save()">
                  <i class="fa fa-save me-2"></i>{{ 'STAFF.EDIT_STAFF.SAVE' | translate }}
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>