import{a as M}from"./chunk-53SADUUO.js";import{C as z,c as V,g as j,h as G,j as L,l as R,m as W,o as Z,x as U}from"./chunk-LSHNZHTL.js";import{Dc as N,Ea as C,Eb as h,Fb as _,Gb as x,Ia as O,Kc as T,Na as u,Xa as p,Ya as e,Z as P,Za as n,_ as y,_a as d,fb as S,hb as v,ib as g,kc as A,lc as F,ra as w,ub as E,va as l,wb as a,wc as k,xb as b,zb as I}from"./chunk-GPA4TO5E.js";import"./chunk-6DGDWVBL.js";function q(r,s){if(r&1&&d(0,"img",36),r&2){let m=g();p("src",m.IMAGEN_PREVIZUALIZA,w)}}function D(r,s){r&1&&(e(0,"div",37),d(1,"i",38),n())}function B(r,s){if(r&1){let m=S();e(0,"label",39)(1,"input",40),x("ngModelChange",function(o){P(m);let t=g();return _(t.gender,o)||(t.gender=o),y(o)}),n(),d(2,"span",41),e(3,"span",42),a(4),n()()}if(r&2){let m=s.$implicit,i=g();l(),p("value",m.id),h("ngModel",i.gender),l(3),b(m.name)}}function Y(r,s){if(r&1&&(e(0,"div",46),d(1,"i",47),e(2,"div",48)(3,"strong"),a(4,"\xA1Perfecto!"),n(),e(5,"span"),a(6),n()()()),r&2){let m=g(2);l(6),b(m.text_success)}}function H(r,s){if(r&1&&(e(0,"div",49),d(1,"i",50),e(2,"div",48)(3,"strong"),a(4,"Atenci\xF3n"),n(),e(5,"span"),a(6),n()()()),r&2){let m=g(2);l(6),b(m.text_validation)}}function J(r,s){if(r&1&&(e(0,"div",43),u(1,Y,7,1,"div",44)(2,H,7,1,"div",45),n()),r&2){let m=g();l(),p("ngIf",m.text_success),l(),p("ngIf",m.text_validation)}}var ae=(()=>{let s=class s{constructor(i,o){this.http=i,this.router=o,this.name="",this.surname="",this.email="",this.mobile="",this.gender="",this.attendance_number="",this.IMAGEN_PREVIZUALIZA=null,this.avatarFile=null,this.genders=[],this.text_success="",this.text_validation=""}ngOnInit(){this.getCatalogs();let i=JSON.parse(localStorage.getItem("user")||"{}");this.name=i.name||"",this.surname=i.surname||"",this.email=i.email||""}getCatalogs(){this.http.get(`${M}/genders`).subscribe({next:i=>{this.genders=i||[]},error:i=>{this.genders=[{id:1,name:"Hombre"},{id:2,name:"Mujer"}]}})}loadFile(i){let o=i.target.files[0];if(o){this.avatarFile=o;let t=new FileReader;t.onload=f=>this.IMAGEN_PREVIZUALIZA=t.result,t.readAsDataURL(o)}}save(){if(this.text_validation="",this.text_success="",!this.mobile||!this.birth_date||!this.gender||!this.attendance_number){this.text_validation="Por favor completa todos los campos obligatorios (M\xF3vil, Fecha Nacimiento, G\xE9nero y No. Asistencia).";return}let i=new FormData;i.append("mobile",this.mobile),i.append("attendance_number",this.attendance_number),i.append("birth_date",this.birth_date),i.append("gender_id",this.gender),this.avatarFile&&i.append("avatar",this.avatarFile),this.http.post(`${M}/complete-profile`,i).subscribe({next:()=>{this.text_success="Perfil completado correctamente",setTimeout(()=>this.router.navigate(["/profile"]),1e3)},error:o=>{this.text_validation=o?.error?.message||"Error al guardar. Verifique los datos."}})}};s.\u0275fac=function(o){return new(o||s)(C(N),C(T))},s.\u0275cmp=O({type:s,selectors:[["app-complete-profile"]],decls:62,vars:11,consts:[[1,"profile-layout"],[1,"profile-container"],[1,"profile-header"],[1,"brand-circle"],["src","assets/img/login-logo.png","alt","Logo SISMEG"],[1,"profile-title"],[1,"profile-subtitle"],[1,"profile-panel"],["novalidate",""],[1,"avatar-section"],[1,"avatar-preview"],["alt","Preview del avatar",3,"src",4,"ngIf"],["class","avatar-placeholder",4,"ngIf"],[1,"avatar-actions"],[1,"file-upload-btn"],["type","file","accept","image/*","hidden","",3,"change"],["aria-hidden","true",1,"fas","fa-upload"],[1,"upload-hint"],[1,"section-divider"],[1,"form-grid"],[1,"field-group"],[1,"field-label"],["aria-hidden","true",1,"fas","fa-phone"],[1,"required"],["type","text","name","mobile","placeholder","Ej: 5551234567","required","",1,"form-input",3,"ngModelChange","ngModel"],["aria-hidden","true",1,"fas","fa-calendar-alt"],["type","date","name","birth_date","required","",1,"form-input",3,"ngModelChange","ngModel"],["aria-hidden","true",1,"fas","fa-venus-mars"],[1,"radio-group"],["class","radio-option",4,"ngFor","ngForOf"],["aria-hidden","true",1,"fas","fa-hashtag"],["type","text","name","attendance_number","placeholder","N\xFAmero de asistencia","required","",1,"form-input",3,"ngModelChange","ngModel"],["class","status-messages",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","btn-primary","btn-block",3,"click"],["aria-hidden","true",1,"fas","fa-save"],["alt","Preview del avatar",3,"src"],[1,"avatar-placeholder"],["aria-hidden","true",1,"fas","fa-camera"],[1,"radio-option"],["type","radio","name","gender","required","",3,"ngModelChange","value","ngModel"],[1,"radio-custom"],[1,"radio-text"],[1,"status-messages"],["class","alert alert-success",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],[1,"alert","alert-success"],["aria-hidden","true",1,"fas","fa-check-circle"],[1,"alert-content"],[1,"alert","alert-warning"],["aria-hidden","true",1,"fas","fa-exclamation-triangle"]],template:function(o,t){o&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),d(4,"img",4),n(),e(5,"h1",5),a(6,"Completa tu Perfil"),n(),e(7,"p",6),a(8," Bienvenido "),e(9,"strong"),a(10),n(),d(11,"br"),a(12," Completa tu informaci\xF3n profesional para continuar. "),n()(),e(13,"div",7)(14,"form",8)(15,"div",9)(16,"div",10),u(17,q,1,1,"img",11)(18,D,2,0,"div",12),n(),e(19,"div",13)(20,"label",14)(21,"input",15),v("change",function(c){return t.loadFile(c)}),n(),d(22,"i",16),a(23," Subir Foto "),n(),e(24,"p",17),a(25,"Opcional. Formatos: JPG, PNG."),n()()(),d(26,"div",18),e(27,"div",19)(28,"div",20)(29,"label",21),d(30,"i",22),a(31," N\xFAmero de m\xF3vil "),e(32,"span",23),a(33,"*"),n()(),e(34,"input",24),x("ngModelChange",function(c){return _(t.mobile,c)||(t.mobile=c),c}),n()(),e(35,"div",20)(36,"label",21),d(37,"i",25),a(38," Fecha de Nacimiento "),e(39,"span",23),a(40,"*"),n()(),e(41,"input",26),x("ngModelChange",function(c){return _(t.birth_date,c)||(t.birth_date=c),c}),n()(),e(42,"div",20)(43,"label",21),d(44,"i",27),a(45," G\xE9nero "),e(46,"span",23),a(47,"*"),n()(),e(48,"div",28),u(49,B,5,3,"label",29),n()(),e(50,"div",20)(51,"label",21),d(52,"i",30),a(53," No. de Asistencia "),e(54,"span",23),a(55,"*"),n()(),e(56,"input",31),x("ngModelChange",function(c){return _(t.attendance_number,c)||(t.attendance_number=c),c}),n()()(),u(57,J,3,2,"div",32),e(58,"div",33)(59,"button",34),v("click",function(){return t.save()}),d(60,"i",35),a(61," Guardar Perfil "),n()()()()()()),o&2&&(l(10),I("",t.name," ",t.surname),l(6),E("has-image",t.IMAGEN_PREVIZUALIZA),l(),p("ngIf",t.IMAGEN_PREVIZUALIZA),l(),p("ngIf",!t.IMAGEN_PREVIZUALIZA),l(16),h("ngModel",t.mobile),l(7),h("ngModel",t.birth_date),l(8),p("ngForOf",t.genders),l(7),h("ngModel",t.attendance_number),l(),p("ngIf",t.text_success||t.text_validation))},dependencies:[k,A,F,z,W,V,Z,j,G,U,R,L],styles:['@charset "UTF-8";.profile-layout[_ngcontent-%COMP%]{min-height:100vh;background:#000;padding:2rem 1rem;display:flex;align-items:center;justify-content:center}.profile-container[_ngcontent-%COMP%]{width:100%;max-width:800px;margin:0 auto}.profile-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;color:#fff}.brand-circle[_ngcontent-%COMP%]{width:120px;height:120px;background:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 1.5rem;box-shadow:0 0 40px #667eea33}.brand-circle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%;height:auto;object-fit:contain}.profile-title[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:800;margin:0 0 .5rem;letter-spacing:-.5px}.profile-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;opacity:.8;margin:0;line-height:1.6}.profile-panel[_ngcontent-%COMP%]{background:#fff;border-radius:30px;padding:3rem;box-shadow:0 25px 80px #00000080}.avatar-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1.5rem;margin-bottom:2rem}.avatar-preview[_ngcontent-%COMP%]{width:140px;height:140px;border-radius:50%;background:#f8fafc;border:4px solid white;box-shadow:0 8px 25px #0000001a;display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative;transition:all .3s ease}.avatar-preview.has-image[_ngcontent-%COMP%]{border-color:#667eea;box-shadow:0 8px 30px #667eea40}.avatar-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.avatar-placeholder[_ngcontent-%COMP%]{color:#cbd5e1;font-size:3rem;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.avatar-actions[_ngcontent-%COMP%]{text-align:center}.file-upload-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.6rem;padding:.7rem 1.4rem;background:#f1f5f9;color:#475569;border-radius:50px;cursor:pointer;font-weight:600;font-size:.95rem;transition:all .2s ease}.file-upload-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0;transform:translateY(-1px)}.section-divider[_ngcontent-%COMP%]{height:1px;background:#f1f5f9;margin:2rem 0;width:100%}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1.5rem 2rem;margin-bottom:2.5rem}.field-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.6rem}.field-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-weight:700;color:#1e293b;font-size:.9rem;letter-spacing:.3px}.field-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea;font-size:1rem}.required[_ngcontent-%COMP%]{color:#ef4444}.form-input[_ngcontent-%COMP%]{padding:.9rem 1.2rem;border:2px solid #e2e8f0;border-radius:16px;font-size:1rem;transition:all .25s ease;color:#334155;background:#f8fafc}.form-input[_ngcontent-%COMP%]:focus{outline:none;background:#fff;border-color:#667eea;box-shadow:0 4px 20px #667eea1a;transform:translateY(-1px)}.form-input[_ngcontent-%COMP%]::placeholder{color:#94a3b8}.radio-group[_ngcontent-%COMP%]{display:flex;gap:1rem;background:#f8fafc;padding:.4rem;border-radius:16px;border:2px solid #e2e8f0}.radio-option[_ngcontent-%COMP%]{flex:1;position:relative;cursor:pointer;display:flex;align-items:center;justify-content:center}.radio-option[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.radio-text[_ngcontent-%COMP%]{display:block;width:100%;text-align:center;padding:.6rem;border-radius:12px;font-weight:600;color:#64748b;transition:all .2s ease}.radio-option[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .radio-text[_ngcontent-%COMP%]{background:#fff;color:#667eea;box-shadow:0 2px 10px #0000000d}.radio-custom[_ngcontent-%COMP%]{display:none}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:center}.btn-block[_ngcontent-%COMP%]{width:100%;justify-content:center;padding:1rem;font-size:1.1rem;border-radius:16px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;font-weight:700;cursor:pointer;transition:all .3s ease;box-shadow:0 10px 30px #667eea4d}.btn-block[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 15px 40px #667eea66}.status-messages[_ngcontent-%COMP%]{margin-bottom:2rem}.alert[_ngcontent-%COMP%]{padding:1rem;border-radius:12px;display:flex;align-items:center;gap:1rem}.alert-warning[_ngcontent-%COMP%]{background:#fff7ed;border:1px solid #ffedd5;color:#9a3412}.alert-success[_ngcontent-%COMP%]{background:#f0fdf4;border:1px solid #bbf7d0;color:#166534}@media (max-width: 640px){.profile-panel[_ngcontent-%COMP%]{padding:2rem 1.5rem}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.avatar-preview[_ngcontent-%COMP%]{width:120px;height:120px}}']});let r=s;return r})();export{ae as CompleteProfileComponent};
