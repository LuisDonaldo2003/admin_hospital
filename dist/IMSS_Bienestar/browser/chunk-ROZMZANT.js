import{W as _}from"./chunk-DKOMRDAG.js";import{a as n}from"./chunk-53SADUUO.js";import{Bc as m,Dc as g,T as l,W as u}from"./chunk-GPA4TO5E.js";var b=(()=>{let a=class a{constructor(t,e){this.http=t,this.authService=e,this.DURACION_CITA=20}getHeaders(){return new m({Authorization:"Bearer "+this.authService.token})}listDoctors(t){let e=this.getHeaders(),i=`${n}/appointments/doctors`;return this.http.get(i,{headers:e,params:t})}getDoctor(t){let e=this.getHeaders(),i=`${n}/appointments/doctors/${t}`;return this.http.get(i,{headers:e})}storeDoctor(t){let e=this.getHeaders(),i=`${n}/appointments/doctors`;return this.http.post(i,t,{headers:e})}updateDoctor(t,e){let i=this.getHeaders(),s=`${n}/appointments/doctors/${t}`;return this.http.put(s,e,{headers:i})}deleteDoctor(t){let e=this.getHeaders(),i=`${n}/appointments/doctors/${t}`;return this.http.delete(i,{headers:e})}getDoctorsByEspecialidad(t){let e=this.getHeaders(),i=`${n}/appointments/doctors/by-especialidad/${t}`;return this.http.get(i,{headers:e})}listPacientes(){let t=this.getHeaders(),e=`${n}/archives`;return this.http.get(e,{headers:t})}listAppointments(t){let e=this.getHeaders(),i=`${n}/appointments/citas`;return this.http.get(i,{headers:e,params:t})}getAppointment(t){let e=this.getHeaders(),i=`${n}/appointments/citas/${t}`;return this.http.get(i,{headers:e})}storeAppointment(t){let e=this.getHeaders(),i=`${n}/appointments/citas`;return this.http.post(i,t,{headers:e})}updateAppointment(t,e){let i=this.getHeaders(),s=`${n}/appointments/citas/${t}`;return this.http.put(s,e,{headers:i})}cancelAppointment(t,e){let i=this.getHeaders(),s=`${n}/appointments/citas/${t}/cancel`;return this.http.post(s,{motivo_cancelacion:e},{headers:i})}deleteAppointment(t){let e=this.getHeaders(),i=`${n}/appointments/citas/${t}`;return this.http.delete(i,{headers:e})}getAppointmentsByDoctorAndDate(t,e){let i=this.getHeaders(),s=`${n}/appointments/by-doctor-date`,o={doctor_id:t.toString(),fecha:e};return this.http.get(s,{headers:i,params:o})}getAppointmentsByPaciente(t){let e=this.getHeaders(),i=`${n}/appointments/by-paciente/${t}`;return this.http.get(i,{headers:e})}listEspecialidades(){let t=this.getHeaders(),e=`${n}/appointments/doctors/especialidades`;return this.http.get(e,{headers:t})}getHorariosDisponibles(t,e){let i=this.getHeaders(),s=`${n}/appointments/horarios-disponibles`,o={doctor_id:t.toString(),fecha:e};return this.http.get(s,{headers:i,params:o})}generarTimeSlots(t,e){let i=[],[s,o]=t.split(":").map(Number),[r,c]=e.split(":").map(Number),H=s*60+o,$=r*60+c,h=H;for(;h+this.DURACION_CITA<=$;){let d=this.minutosAHora(h),f=this.minutosAHora(h+this.DURACION_CITA);i.push({hora:d,hora_inicio:d,hora_fin:f,disponible:!0}),h+=this.DURACION_CITA}return i}generarHorariosDisponiblesParaDoctor(t,e,i=[]){let s=[];if(t.turno==="Matutino"&&t.hora_inicio_matutino&&t.hora_fin_matutino)s=this.generarTimeSlots(t.hora_inicio_matutino,t.hora_fin_matutino);else if(t.turno==="Vespertino"&&t.hora_inicio_vespertino&&t.hora_fin_vespertino)s=this.generarTimeSlots(t.hora_inicio_vespertino,t.hora_fin_vespertino);else if(t.turno==="Mixto"){let o=t.hora_inicio_matutino&&t.hora_fin_matutino?this.generarTimeSlots(t.hora_inicio_matutino,t.hora_fin_matutino):[],r=t.hora_inicio_vespertino&&t.hora_fin_vespertino?this.generarTimeSlots(t.hora_inicio_vespertino,t.hora_fin_vespertino):[];s=[...o,...r]}return i.forEach(o=>{let r=s.find(c=>c.hora_inicio===o.hora_inicio);r&&(r.disponible=!1,r.cita_id=o.id)}),{fecha:e,doctor_id:t.id,turno:t.turno,slots:s}}calcularHoraFin(t){let[e,i]=t.split(":").map(Number),o=e*60+i+this.DURACION_CITA;return this.minutosAHora(o)}minutosAHora(t){let e=Math.floor(t/60),i=t%60;return`${e.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`}validarHorarioDisponible(t,e,i){let s=this.getHeaders(),o=`${n}/appointments/validar-horario`,r={doctor_id:t.toString(),fecha:e,hora_inicio:i};return this.http.get(o,{headers:s,params:r})}getSiguienteHorarioDisponible(t,e){let i=this.getHeaders(),s=`${n}/appointments/siguiente-horario`,o={doctor_id:t.toString(),fecha:e};return this.http.get(s,{headers:i,params:o})}getEstadisticasCitas(t){let e=this.getHeaders(),i=`${n}/appointments/estadisticas`;return this.http.get(i,{headers:e,params:t})}};a.\u0275fac=function(e){return new(e||a)(u(g),u(_))},a.\u0275prov=l({token:a,factory:a.\u0275fac,providedIn:"root"});let p=a;return p})();export{b as a};
