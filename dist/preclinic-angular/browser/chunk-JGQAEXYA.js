import{a as h}from"./chunk-ZEONKIBX.js";import{a as r}from"./chunk-UH6NS72U.js";import{B as c,Ic as f,U as u,X as o,n,q as s}from"./chunk-WGJYFDRX.js";var I=(()=>{let t=class t{constructor(a,i){this.router=a,this.auth=i}canActivate(){return!localStorage.getItem("token")||!localStorage.getItem("user")?(this.router.navigate([r.login]),!1):this.auth.isTokenExpired()?this.auth.refreshToken().pipe(s(()=>!0),c(()=>(this.router.navigate([r.login]),n(!1)))):(this.auth.isTokenExpiringSoon()&&this.auth.refreshToken().subscribe({error:()=>{this.router.navigate([r.login])}}),!0)}};t.\u0275fac=function(i){return new(i||t)(o(f),o(h))},t.\u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();export{I as a};
