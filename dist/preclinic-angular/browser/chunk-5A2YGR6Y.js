import{a as _t}from"./chunk-JBR2VX3F.js";import{a as it}from"./chunk-WS4632NW.js";import{Ib as wt,f as X,g as K}from"./chunk-YOEJYIB6.js";import"./chunk-4EVRJ2KV.js";import"./chunk-HF4MV7YU.js";import{a as mt}from"./chunk-THDOXVUY.js";import{a as C}from"./chunk-HPADJYSB.js";import{B as bt,c as vt,g as gt,l as yt,s as ft,t as ut,u as xt}from"./chunk-ZKE66VYO.js";import"./chunk-NLFA5U6A.js";import{b as $,c as ht,d as Y}from"./chunk-2YP3RBQ3.js";import"./chunk-DTFMIEBP.js";import{a as G}from"./chunk-7DIUBSS2.js";import{Ca as n,Eb as M,Fb as T,Fc as lt,Gb as R,Gc as I,Ha as O,Jb as B,Lb as H,Ma as z,Mb as st,Na as L,Nb as pt,Ob as y,Pb as f,Ra as g,Rb as E,T as rt,U as F,W as tt,Wa as l,Xa as D,Ya as ot,ba as b,ca as w,cb as a,db as i,eb as h,ec as N,fc as W,gc as j,ib as V,kb as A,lb as m,qc as P,tc as dt,uc as ct,vb as S,wb as p,xb as c,yb as _,zb as et}from"./chunk-6GTM3F5E.js";import{a as at,b as nt}from"./chunk-EQDQRRRY.js";var Dt=(e,d,t)=>({t:e,s:d,v:t,ic:"fa-calendar-day"}),It=(e,d,t)=>({t:e,s:d,v:t,ic:"fa-layer-group"}),Ot=(e,d,t)=>({t:e,s:d,v:t,ic:"fa-chart-column"}),Mt=(e,d,t)=>({t:e,s:d,v:t,ic:"fa-database"}),Tt=(e,d,t,o)=>[e,d,t,o];function Rt(e,d){if(e&1&&(a(0,"div",38)(1,"div",39),h(2,"i",40),i(),a(3,"div",41)(4,"div",42),p(5),a(6,"small"),p(7),i()(),a(8,"div",43),p(9),i()()()),e&2){let t=d.$implicit;n(2),l("ngClass",t.ic),n(3),_("",t.t," "),n(2),c(t.s),n(2),c(t.v)}}function Bt(e,d){if(e&1&&(a(0,"div",44)(1,"div",45),h(2,"div",46)(3,"div",47),i(),a(4,"ul",48)(5,"li"),h(6,"span",49),p(7),y(8,"translate"),i(),a(9,"li"),h(10,"span",50),p(11),y(12,"translate"),i()()()),e&2){let t=m(2);n(2),D("width",t.byGender.male/(t.byGender.male+t.byGender.female)*100+"%"),n(),D("width",t.byGender.female/(t.byGender.male+t.byGender.female)*100+"%"),n(4),et(" ",f(8,8,"DASHBOARD.DASHBOARD_ARCHIVE.MAN"),": ",t.byGender.male,""),n(4),et(" ",f(12,10,"DASHBOARD.DASHBOARD_ARCHIVE.WOMAN"),": ",t.byGender.female,"")}}function Pt(e,d){e&1&&(a(0,"div",51),p(1),y(2,"translate"),i()),e&2&&(n(),c(f(2,1,"DASHBOARD.DASHBOARD_ARCHIVE.NOT_DATES")))}function Ut(e,d){if(e&1&&(a(0,"div",54)(1,"div",55),p(2),i(),a(3,"div",56)(4,"div",57),p(5),i(),a(6,"div",58),h(7,"span",59),i()(),a(8,"div",60),p(9),i()()),e&2){let t=d.$implicit,o=d.index,r=m(3);n(2),c(o+1),n(2),l("title",t.state),n(),c(t.state),n(2),D("width",t.count/r.byState[0].count*100+"%"),n(2),c(t.count)}}function Ht(e,d){if(e&1&&(a(0,"div",52),g(1,Ut,10,6,"div",53),i()),e&2){let t=m(2);n(),l("ngForOf",t.byState)}}function Ft(e,d){e&1&&(a(0,"div",51),p(1),y(2,"translate"),i()),e&2&&(n(),c(f(2,1,"DASHBOARD.DASHBOARD_ARCHIVE.NOT_REGISTERS")))}function zt(e,d){if(e&1&&h(0,"apx-chart",65),e&2){let t=m(3);l("series",t.weeklyChart.series)("chart",t.weeklyChart.chart)("xaxis",t.weeklyChart.xaxis)("yaxis",t.weeklyChart.yaxis)("dataLabels",t.weeklyChart.dataLabels)("stroke",t.weeklyChart.stroke)("grid",t.weeklyChart.grid)("tooltip",t.weeklyChart.tooltip)("fill",t.weeklyChart.fill)}}function Lt(e,d){if(e&1&&(a(0,"section",61)(1,"div",62)(2,"header",20)(3,"h3"),p(4),y(5,"translate"),i()(),a(6,"div",63),g(7,zt,1,9,"apx-chart",64),i()()()),e&2){let t=m(2);n(4),c(f(5,2,"DASHBOARD.DASHBOARD_ARCHIVE.RECENT_REGISTERS")),n(3),l("ngIf",t.weeklyChart)}}function Vt(e,d){if(e&1&&h(0,"apx-chart",65),e&2){let t=m(3);l("series",t.monthlyChart.series)("chart",t.monthlyChart.chart)("xaxis",t.monthlyChart.xaxis)("yaxis",t.monthlyChart.yaxis)("dataLabels",t.monthlyChart.dataLabels)("stroke",t.monthlyChart.stroke)("grid",t.monthlyChart.grid)("tooltip",t.monthlyChart.tooltip)("fill",t.monthlyChart.fill)}}function Nt(e,d){if(e&1&&(a(0,"section",66)(1,"div",62)(2,"header",20)(3,"h3"),p(4,"Pacientes por mes (a\xF1o actual)"),i()(),a(5,"div",63),g(6,Vt,1,9,"apx-chart",64),i()()()),e&2){let t=m(2);n(6),l("ngIf",t.monthlyChart)}}function Wt(e,d){if(e&1&&(a(0,"div",71)(1,"div",72),p(2),i(),a(3,"div",73)(4,"div",74),h(5,"div",75),i()(),a(6,"div",76),p(7),i()()),e&2){let t=d.$implicit,o=m(3);ot("is-current",t.year===o.currentYear),n(2),c(t.year),n(3),D("width",o.yearPercent(t.count)+"%"),n(2),c(t.count)}}function jt(e,d){if(e&1&&(a(0,"section",67)(1,"div",68)(2,"header",20)(3,"h3"),p(4,"Pacientes por a\xF1o"),i()(),a(5,"div",69),g(6,Wt,8,6,"div",70),i()()()),e&2){let t=m(2);n(6),l("ngForOf",t.yearlyCounts)}}function Gt(e,d){if(e&1&&(a(0,"div",77),p(1),i()),e&2){let t=m(2);n(),c(t.error)}}function $t(e,d){if(e&1){let t=V();a(0,"div",4)(1,"div",5)(2,"ul",6)(3,"li",7)(4,"a"),p(5),y(6,"translate"),i()(),a(7,"li",8),p(8),y(9,"translate"),i()(),a(10,"section",9)(11,"div",10)(12,"div",11)(13,"h1")(14,"span"),p(15),y(16,"translate"),i(),p(17),y(18,"translate"),i(),a(19,"p"),p(20),y(21,"translate"),i()(),a(22,"div",12)(23,"button",13),A("click",function(){b(t);let r=m();return w(r.loadStats())}),h(24,"i",14),i()()(),h(25,"div",15),i(),a(26,"section",16),g(27,Rt,10,4,"div",17),y(28,"translate"),y(29,"translate"),y(30,"translate"),y(31,"translate"),y(32,"translate"),y(33,"translate"),y(34,"translate"),y(35,"translate"),i(),a(36,"div",18)(37,"div",19)(38,"header",20)(39,"h3"),p(40),y(41,"translate"),i()(),g(42,Bt,13,12,"div",21)(43,Pt,3,3,"ng-template",null,1,E),i(),a(45,"div",22)(46,"header",20)(47,"h3"),p(48),y(49,"translate"),i()(),g(50,Ht,2,1,"div",23)(51,Ft,3,3,"ng-template",null,2,E),i(),a(53,"div",24)(54,"header",20)(55,"h3"),p(56),y(57,"translate"),i()(),a(58,"div",25)(59,"button",26),h(60,"i",27),a(61,"span"),p(62),y(63,"translate"),i()(),a(64,"button",28),h(65,"i",29),a(66,"span"),p(67),y(68,"translate"),i()(),a(69,"button",30),h(70,"i",31),a(71,"span"),p(72),y(73,"translate"),i()(),a(74,"button",32),h(75,"i",33),a(76,"span"),p(77),y(78,"translate"),i()()()()(),g(79,Lt,8,4,"section",34)(80,Nt,7,1,"section",35)(81,jt,7,1,"section",36)(82,Gt,2,1,"div",37),i()()}if(e&2){let t=S(44),o=S(52),r=m();n(5),_("",f(6,21,"DASHBOARD.DASHBOARD_ARCHIVE.DASHBOARD")," >"),n(3),c(f(9,23,"DASHBOARD.DASHBOARD_ARCHIVE.ARCHIVE")),n(7),c(f(16,25,"DASHBOARD.DASHBOARD_ARCHIVE.ARCHIVE")),n(2),_(" | ",f(18,27,"DASHBOARD.DASHBOARD_ARCHIVE.SUMMARY"),""),n(3),c(f(21,29,"DASHBOARD.DASHBOARD_ARCHIVE.VISION")),n(7),l("ngForOf",st(77,Tt,H(61,Dt,f(28,31,"DASHBOARD.DASHBOARD_ARCHIVE.TODAY"),f(29,33,"DASHBOARD.DASHBOARD_ARCHIVE.REGISTER"),r.stats.todayAdded),H(65,It,f(30,35,"DASHBOARD.DASHBOARD_ARCHIVE.WEEK"),f(31,37,"DASHBOARD.DASHBOARD_ARCHIVE.ACCUMULATED"),r.stats.weekAdded),H(69,Ot,f(32,39,"DASHBOARD.DASHBOARD_ARCHIVE.MONTH"),f(33,41,"DASHBOARD.DASHBOARD_ARCHIVE.ACCUMULATED"),r.stats.monthAdded),H(73,Mt,f(34,43,"DASHBOARD.DASHBOARD_ARCHIVE.TOTAL"),f(35,45,"DASHBOARD.DASHBOARD_ARCHIVE.HISTORICAL"),r.stats.totalArchives))),n(13),c(f(41,47,"DASHBOARD.DASHBOARD_ARCHIVE.DISTRIBUTION_BY_GENDER")),n(2),l("ngIf",r.byGender.male+r.byGender.female>0)("ngIfElse",t),n(6),c(f(49,49,"DASHBOARD.DASHBOARD_ARCHIVE.TOP_LOCATIONS")),n(2),l("ngIf",r.byState.length)("ngIfElse",o),n(6),c(f(57,51,"DASHBOARD.DASHBOARD_ARCHIVE.ACTIONS")),n(6),c(f(63,53,"DASHBOARD.DASHBOARD_ARCHIVE.NEW")),n(5),c(f(68,55,"DASHBOARD.DASHBOARD_ARCHIVE.LIST")),n(5),c(f(73,57,"DASHBOARD.DASHBOARD_ARCHIVE.EXPORT")),n(5),c(f(78,59,"DASHBOARD.DASHBOARD_ARCHIVE.BACKUP")),n(2),l("ngIf",r.weeklyChart),n(),l("ngIf",r.monthlyChart),n(),l("ngIf",r.yearlyCounts==null?null:r.yearlyCounts.length),n(),l("ngIf",r.error)}}function Yt(e,d){e&1&&(a(0,"div",4)(1,"div",78)(2,"div",79),p(3),y(4,"translate"),i()()()),e&2&&(n(3),c(f(4,1,"DASHBOARD.DASHBOARD_ARCHIVE.STATISTICS_LOADING")))}var q=(()=>{class e{constructor(t,o){this.archiveService=t,this.translate=o,this.routes=G,this.todayDate=new Date,this.currentYear=new Date().getFullYear(),this.stats={todayAdded:0,weekAdded:0,monthAdded:0,totalArchives:0},this.loading=!0,this.error=null,this.byGender={male:0,female:0},this.byState=[],this.weeklyCategories=[],this.weeklyCounts=[],this.weeklyChart=null,this.monthlyChart=null,this.yearlyCounts=[],this.yearlyMax=0}ngOnInit(){this.loadStats()}loadStats(){this.loading=!0,this.archiveService.getArchiveStats().subscribe({next:t=>{t?.stats&&(this.stats=t.stats),t?.byGender&&(this.byGender=t.byGender),t?.topLocations&&(this.byState=t.topLocations.map(r=>({state:r.name,count:r.count})));let o=t?.dailySeries||t?.dailyTrend||t?.last7Days||t?.daily||null;this.prepareWeeklyChart(o),this.prepareMonthlyChart(t?.monthlyCounts||t?.perMonth||null),this.yearlyCounts=Array.isArray(t?.yearlyCounts)?[...t.yearlyCounts].sort((r,s)=>r.year-s.year):[],this.yearlyMax=this.yearlyCounts.length?Math.max(...this.yearlyCounts.map(r=>Number(r.count||0))):0,this.loading=!1},error:t=>{this.error=t?.error?.message||"Error cargando estad\xEDsticas",this.loading=!1}})}prepareWeeklyChart(t){let o=new Date,r=[];for(let s=6;s>=0;s--){let u=new Date(o);u.setDate(o.getDate()-s);let v=u.toISOString().substring(0,10);r.push({date:v,count:0})}Array.isArray(t)&&t.forEach(s=>{let u=(s.date||s.day||s.fecha||"").toString().substring(0,10),v=r.find(k=>k.date===u);v&&(v.count=Number(s.count||s.total||s.value||0))}),this.weeklyCategories=r.map(s=>this.formatShortDate(s.date)),this.weeklyCounts=r.map(s=>s.count),this.weeklyChart={series:[{name:"Registros",data:this.weeklyCounts}],chart:{type:"area",height:240,sparkline:{enabled:!1},toolbar:{show:!1},animations:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:3},xaxis:{categories:this.weeklyCategories,labels:{style:{colors:"#8fa2c2",fontSize:"11px"}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:"#8fa2c2",fontSize:"11px"}},forceNiceScale:!0,min:0},grid:{borderColor:"rgba(255,255,255,0.06)",strokeDashArray:4,xaxis:{lines:{show:!1}}},tooltip:{theme:"dark",x:{show:!0},y:{formatter:s=>s+" pacientes"}},fill:{type:"gradient",gradient:{shadeIntensity:.4,opacityFrom:.35,opacityTo:0,stops:[0,100]}}}}prepareMonthlyChart(t){let r=new Date().getFullYear(),s=Array.from({length:12},(x,U)=>U+1),u=new Map;Array.isArray(t)&&t.forEach(x=>{let U=Number(x.year??x.y),Z=Number(x.month??x.m??x.month_number);U===r&&Z>=1&&Z<=12&&u.set(Z,Number(x.count??x.total??0))});let v=s.map(x=>u.get(x)??0),k=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];this.monthlyChart={series:[{name:"Pacientes",data:v}],chart:{type:"bar",height:240,toolbar:{show:!1},animations:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},xaxis:{categories:k,labels:{style:{colors:"#8fa2c2",fontSize:"11px"}}},yaxis:{labels:{style:{colors:"#8fa2c2",fontSize:"11px"}},min:0},grid:{borderColor:"rgba(255,255,255,0.06)",strokeDashArray:4},tooltip:{theme:"dark",x:{show:!0},y:{formatter:x=>x+" pacientes"}},fill:{type:"gradient",gradient:{shadeIntensity:.3,opacityFrom:.3,opacityTo:0,stops:[0,100]}}}}yearPercent(t){let o=this.yearlyMax||1,r=Math.round(Number(t||0)/o*100);return Math.max(0,Math.min(100,r))}formatShortDate(t){return new Date(t+"T00:00:00").toLocaleDateString("es-MX",{day:"2-digit",month:"2-digit"})}static{this.\u0275fac=function(o){return new(o||e)(O(_t),O($))}}static{this.\u0275cmp=z({type:e,selectors:[["app-archive-dashboard"]],decls:3,vars:2,consts:[["loadingTpl",""],["noGender",""],["noLocations",""],["class","page-wrapper",4,"ngIf","ngIfElse"],[1,"page-wrapper"],[1,"content","archive-dash-new"],[1,"breadcrumb","mb-3"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"hero","mb-4"],[1,"hero-inner"],[1,"hero-text"],[1,"hero-meta"],[1,"btn","btn-refresh",3,"click"],[1,"fa","fa-rotate"],[1,"hero-bg"],[1,"kpi-grid","mb-4"],["class","kpi-card",4,"ngFor","ngForOf"],[1,"grid-panels","mb-4"],[1,"panel","panel-gender"],[1,"panel-hd"],["class","gender-wrap",4,"ngIf","ngIfElse"],[1,"panel","panel-locations"],["class","locations-list",4,"ngIf","ngIfElse"],[1,"panel","actions","panel-actions"],[1,"actions-grid"],["routerLink","/archives/add_archive",1,"action"],[1,"fa","fa-plus"],["routerLink","/archives/list_archive",1,"action"],[1,"fa","fa-list"],["routerLink","/archives/export_archive",1,"action"],[1,"fa","fa-file-export"],["routerLink","/archives/backup_archive",1,"action"],[1,"fa","fa-database"],["class","weekly-chart",4,"ngIf"],["class","monthly-chart",4,"ngIf"],["class","yearly-summary",4,"ngIf"],["class","alert alert-danger py-2 px-3 small mb-0",4,"ngIf"],[1,"kpi-card"],[1,"kpi-icon"],[1,"fa",3,"ngClass"],[1,"kpi-body"],[1,"kpi-label"],[1,"kpi-value"],[1,"gender-wrap"],[1,"gender-bars"],["aria-label","Masculino",1,"bar"],["aria-label","Femenino",1,"bar","female"],[1,"legend"],[1,"dot","male"],[1,"dot","female"],[1,"empty"],[1,"locations-list"],["class","loc-item",4,"ngFor","ngForOf"],[1,"loc-item"],[1,"loc-rank"],[1,"loc-body"],[1,"loc-name",3,"title"],[1,"loc-meter"],[1,"meter-fill"],[1,"loc-count"],[1,"weekly-chart"],[1,"panel","panel-chart"],[1,"chart-wrapper"],[3,"series","chart","xaxis","yaxis","dataLabels","stroke","grid","tooltip","fill",4,"ngIf"],[3,"series","chart","xaxis","yaxis","dataLabels","stroke","grid","tooltip","fill"],[1,"monthly-chart"],[1,"yearly-summary"],[1,"panel","panel-yearly"],[1,"yearly-list"],["class","year-row",3,"is-current",4,"ngFor","ngForOf"],[1,"year-row"],[1,"col-year"],[1,"col-bar"],[1,"bar-outer"],[1,"bar-inner"],[1,"col-count"],[1,"alert","alert-danger","py-2","px-3","small","mb-0"],[1,"content"],[1,"text-center","py-5","text-muted"]],template:function(o,r){if(o&1&&g(0,$t,83,82,"div",3)(1,Yt,5,3,"ng-template",null,0,E),o&2){let s=S(2);l("ngIf",!r.loading)("ngIfElse",s)}},dependencies:[P,N,W,j,I,lt,K,X,Y,ht],styles:['@charset "UTF-8";.archive-dash-new[_ngcontent-%COMP%]{padding-left:clamp(.75rem,1.2vw,1rem);padding-right:clamp(.75rem,1.8vw,1.25rem);overflow-x:hidden}ul.breadcrumb[_ngcontent-%COMP%]{background:transparent;padding:0;margin:0 0 .75rem;list-style:none;display:flex;gap:.5rem;font-size:.8rem;text-transform:none}ul.breadcrumb[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{opacity:.85;color:#bcd0f0}ul.breadcrumb[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{opacity:1;color:#e6eeff}ul.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#8fb4ff;text-decoration:none}.hero[_ngcontent-%COMP%]{position:relative;border-radius:16px;padding:1.5rem 1.25rem;background:linear-gradient(135deg,#1f2432,#12151d);border:1px solid #262c3a;overflow:hidden}.hero-inner[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:space-between;gap:1rem}.hero-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 .35rem;font-weight:700;font-size:1.5rem;color:#dfe7ff}.hero-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#6ea8ff}.hero-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#9fb4d6;opacity:.9;font-size:.95rem}.btn-refresh[_ngcontent-%COMP%]{background:#222633;border:1px solid #2e3344;color:#6ea8ff;border-radius:10px;width:42px;height:42px;display:grid;place-items:center;transition:.2s}.btn-refresh[_ngcontent-%COMP%]:hover{background:#2a3040}.kpi-grid[_ngcontent-%COMP%]{display:grid;gap:1rem;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}.kpi-card[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:.9rem;background:#171a22;border:1px solid #232936;border-radius:14px;padding:1rem 1.1rem;transition:transform .2s ease,box-shadow .2s ease}.kpi-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 10px 18px -10px #0009}.kpi-icon[_ngcontent-%COMP%]{width:48px;height:48px;flex:0 0 48px;border-radius:12px;display:grid;place-items:center;background:#1e2230;color:#6ea8ff;box-shadow:0 0 0 1px #2c3442 inset}.kpi-label[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;color:#9fb4d6}.kpi-label[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-left:.35rem;opacity:.8}.kpi-value[_ngcontent-%COMP%]{font-size:1.9rem;font-weight:800;line-height:1;letter-spacing:-.5px;color:#e8efff;margin-top:.25rem}.grid-panels[_ngcontent-%COMP%]{display:grid;gap:1.2rem;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));align-items:start}.panel[_ngcontent-%COMP%]{background:#171a22;border:1px solid #232936;border-radius:16px;padding:1rem 1.1rem 1.1rem}.panel-hd[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .75rem;font-size:.95rem;text-transform:uppercase;letter-spacing:.6px;color:#9fb4d6;font-weight:700}.gender-wrap[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.9rem}.gender-bars[_ngcontent-%COMP%]{position:relative;display:flex;height:18px;background:#0f1217;border-radius:9px;overflow:hidden;box-shadow:0 0 0 1px #252a37 inset}.gender-bars[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4d6bff,#6088ff)}.gender-bars[_ngcontent-%COMP%]   .female[_ngcontent-%COMP%]{background:linear-gradient(90deg,#0ac8b8,#2dd6c7)}.legend[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;gap:1rem;flex-wrap:wrap;font-size:.8rem;font-weight:600;color:#e8efff}.legend[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;display:inline-block;margin-right:.35rem;box-shadow:0 0 0 2px #fff,0 0 0 3px #ffffff0f}.legend[_ngcontent-%COMP%]   .male[_ngcontent-%COMP%]{background:#5576ff}.legend[_ngcontent-%COMP%]   .female[_ngcontent-%COMP%]{background:#0ac8b8}.empty[_ngcontent-%COMP%]{font-size:.85rem;opacity:.7;color:#a5b6cf}.locations-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.6rem}.loc-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:32px 1fr 50px;gap:.75rem;align-items:center;background:#12141b;border:1px solid #222836;padding:.6rem .7rem;border-radius:12px}.loc-rank[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:10px;display:grid;place-items:center;background:#1d212a;color:#6ea8ff;font-weight:700;box-shadow:0 0 0 1px #2a3140 inset}.loc-body[_ngcontent-%COMP%]{min-width:0}.loc-name[_ngcontent-%COMP%]{color:#d9e2f5;font-weight:600;font-size:.85rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.loc-meter[_ngcontent-%COMP%]{height:6px;background:#212730;border-radius:4px;overflow:hidden;position:relative}.meter-fill[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(90deg,#6ea8ff,#2dd6c7)}.loc-count[_ngcontent-%COMP%]{text-align:right;color:#9fb4d6;font-weight:700}.actions-grid[_ngcontent-%COMP%]{display:grid;gap:.8rem;grid-template-columns:repeat(auto-fit,minmax(120px,1fr))}.action[_ngcontent-%COMP%]{border:1px solid #2a3140;background:#14171e;border-radius:14px;padding:.85rem .55rem .7rem;font-size:.7rem;font-weight:700;text-transform:uppercase;letter-spacing:.4px;display:flex;flex-direction:column;align-items:center;gap:.55rem;color:#b8c7e2;transition:.18s}.action[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.05rem;color:#6ea8ff}.action[_ngcontent-%COMP%]:hover{background:#1d212a;color:#fff;box-shadow:0 6px 18px -8px #000;transform:translateY(-2px)}.weekly-chart[_ngcontent-%COMP%], .monthly-chart[_ngcontent-%COMP%]{margin-bottom:1.25rem}.yearly-summary[_ngcontent-%COMP%]{margin-top:.75rem}.panel-chart[_ngcontent-%COMP%]{min-height:200px}.chart-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;height:240px}.chart-wrapper[_ngcontent-%COMP%]     .apexcharts-tooltip{background:#1e222b!important;border:1px solid #2c3240!important}.chart-wrapper[_ngcontent-%COMP%]     .apexcharts-tooltip-title{background:#171b22!important;border-bottom:1px solid #2c3240!important}.panel-yearly[_ngcontent-%COMP%]{padding-top:.6rem}.yearly-list[_ngcontent-%COMP%]{display:grid;gap:.5rem}.year-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:72px 1fr 80px;gap:.6rem;align-items:center;background:#12141b;border:1px solid #222836;border-radius:12px;padding:.5rem .7rem}.year-row.is-current[_ngcontent-%COMP%]{outline:1px solid #2dd6c7;box-shadow:0 0 0 3px #2dd6c714 inset}.col-year[_ngcontent-%COMP%]{font-weight:800;color:#e8efff;letter-spacing:.3px}.col-count[_ngcontent-%COMP%]{text-align:right;font-weight:700;color:#9fb4d6}.bar-outer[_ngcontent-%COMP%]{position:relative;height:10px;background:#212730;border-radius:6px;overflow:hidden}.bar-inner[_ngcontent-%COMP%]{position:absolute;inset:0;width:0;background:linear-gradient(90deg,#6ea8ff,#2dd6c7);transition:width .6s ease}@media (max-width: 992px){.kpi-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.grid-panels[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}}@media (max-width: 576px){.hero-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem}.kpi-value[_ngcontent-%COMP%]{font-size:1.6rem}.grid-panels[_ngcontent-%COMP%]{grid-template-columns:1fr}}']})}}return e})();var At=(()=>{class e{constructor(t,o){this.http=t,this.authService=o}getHeaders(){return new dt({Authorization:"Bearer "+this.authService.token})}getActivityStats(){let t=`${C}/user-activities/stats`;return this.http.get(t,{headers:this.getHeaders()})}getRecentActivities(t={},o=0,r=50){let s=new URLSearchParams;t.user_id&&s.append("user_id",t.user_id),t.action_type&&s.append("action_type",t.action_type),t.module&&s.append("module",t.module),t.date_from&&s.append("date_from",t.date_from),t.date_to&&s.append("date_to",t.date_to),t.search&&s.append("search",t.search),s.append("skip",o.toString()),s.append("limit",r.toString());let u=`${C}/user-activities?${s.toString()}`;return this.http.get(u,{headers:this.getHeaders()})}getActivitiesByUser(){let t=`${C}/user-activities/by-user`;return this.http.get(t,{headers:this.getHeaders()})}getActivitiesByModule(){let t=`${C}/user-activities/by-module`;return this.http.get(t,{headers:this.getHeaders()})}getActivitiesByActionType(){let t=`${C}/user-activities/by-action`;return this.http.get(t,{headers:this.getHeaders()})}getMostActiveUsers(t=10){let o=`${C}/user-activities/most-active?limit=${t}`;return this.http.get(o,{headers:this.getHeaders()})}logActivity(t){let o=`${C}/user-activities`;return this.http.post(o,t,{headers:this.getHeaders()})}getActivityDetail(t){let o=`${C}/user-activities/${t}`;return this.http.get(o,{headers:this.getHeaders()})}getUserActivities(t,o=0,r=50){let s=`${C}/user-activities/user/${t}?skip=${o}&limit=${r}`;return this.http.get(s,{headers:this.getHeaders()})}static{this.\u0275fac=function(o){return new(o||e)(tt(ct),tt(mt))}}static{this.\u0275prov=rt({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Kt=e=>({t:"Hoy",s:"Actividades",v:e,ic:"fa-calendar-day"}),Jt=e=>({t:"Esta Semana",s:"Acumuladas",v:e,ic:"fa-layer-group"}),qt=e=>({t:"Este Mes",s:"Acumuladas",v:e,ic:"fa-chart-column"}),Qt=e=>({t:"Total",s:"Hist\xF3rico",v:e,ic:"fa-database"}),Zt=e=>({t:"Usuarios",s:"Activos",v:e,ic:"fa-users"}),te=(e,d,t,o,r)=>[e,d,t,o,r];function ee(e,d){if(e&1&&(a(0,"div",78)(1,"div",79),h(2,"i",80),i(),a(3,"div",81)(4,"div",82),p(5),a(6,"small"),p(7),i()(),a(8,"div",83),p(9),i()()()),e&2){let t=d.$implicit;n(2),l("ngClass",t.ic),n(3),_("",t.t," "),n(2),c(t.s),n(2),c(t.v)}}function ie(e,d){if(e&1&&(a(0,"div",86)(1,"div",87),p(2),i(),a(3,"div",88)(4,"div",89),p(5),i(),a(6,"div",90),h(7,"span",91),i()(),a(8,"div",92),p(9),i()()),e&2){let t=d.$implicit,o=d.index,r=m(3);n(2),c(o+1),n(2),l("title",t.module),n(),c(r.getModuleLabel(t.module)),n(2),D("width",t.count/r.activitiesByModule[0].count*100+"%"),n(2),c(t.count)}}function ae(e,d){if(e&1&&(a(0,"div",84),g(1,ie,10,6,"div",85),i()),e&2){let t=m(2);n(),l("ngForOf",t.activitiesByModule)}}function ne(e,d){e&1&&(a(0,"div",93),p(1,"Sin datos de m\xF3dulos"),i())}function re(e,d){if(e&1&&(a(0,"div",96)(1,"div",97),p(2),i(),a(3,"div",98)(4,"div",99),p(5),i(),a(6,"div",100),h(7,"span",101),i()(),a(8,"div",102),p(9),i()()),e&2){let t=d.$implicit,o=d.index,r=m(3);n(2),c(o+1),n(2),l("title",t.user_name),n(),c(t.user_name),n(2),D("width",t.count/r.mostActiveUsers[0].count*100+"%"),n(2),c(t.count)}}function oe(e,d){if(e&1&&(a(0,"div",94),g(1,re,10,6,"div",95),i()),e&2){let t=m(2);n(),l("ngForOf",t.mostActiveUsers)}}function se(e,d){e&1&&(a(0,"div",93),p(1,"Sin datos de usuarios"),i())}function pe(e,d){if(e&1&&(a(0,"div",103)(1,"div",104),h(2,"i",80),i(),a(3,"div",105)(4,"div",106),p(5),i(),a(6,"div",107),p(7),i()(),a(8,"div",108),p(9),i()()),e&2){let t=d.$implicit;n(2),l("ngClass",t.icon),n(3),c(t.label),n(2),_("",t.h,"h"),n(2),c(t.count)}}function de(e,d){if(e&1&&(a(0,"div",109)(1,"div",110),p(2),i(),a(3,"div",111),p(4),i(),a(5,"div",112),p(6),i()()),e&2){let t=d.$implicit,o=m(2);n(2),c(t.user_name),n(2),c(t.description),n(2),c(o.formatDateTime(t.created_at))}}function ce(e,d){e&1&&(a(0,"div",113),p(1," Sin actividades de creaci\xF3n "),i())}function le(e,d){if(e&1&&(a(0,"div",109)(1,"div",110),p(2),i(),a(3,"div",111),p(4),i(),a(5,"div",112),p(6),i()()),e&2){let t=d.$implicit,o=m(2);n(2),c(t.user_name),n(2),c(t.description),n(2),c(o.formatDateTime(t.created_at))}}function me(e,d){e&1&&(a(0,"div",113),p(1," Sin actividades de visualizaci\xF3n "),i())}function he(e,d){if(e&1&&(a(0,"div",109)(1,"div",110),p(2),i(),a(3,"div",111),p(4),i(),a(5,"div",112),p(6),i()()),e&2){let t=d.$implicit,o=m(2);n(2),c(t.user_name),n(2),c(t.description),n(2),c(o.formatDateTime(t.created_at))}}function ve(e,d){e&1&&(a(0,"div",113),p(1," Sin actividades de edici\xF3n "),i())}function ge(e,d){if(e&1&&(a(0,"div",109)(1,"div",110),p(2),i(),a(3,"div",111),p(4),i(),a(5,"div",112),p(6),i()()),e&2){let t=d.$implicit,o=m(2);n(2),c(t.user_name),n(2),c(t.description),n(2),c(o.formatDateTime(t.created_at))}}function ye(e,d){e&1&&(a(0,"div",113),p(1," Sin actividades de eliminaci\xF3n "),i())}function fe(e,d){if(e&1&&h(0,"apx-chart",118),e&2){let t=m(3);l("series",t.dailyChart.series)("chart",t.dailyChart.chart)("xaxis",t.dailyChart.xaxis)("yaxis",t.dailyChart.yaxis)("dataLabels",t.dailyChart.dataLabels)("stroke",t.dailyChart.stroke)("grid",t.dailyChart.grid)("tooltip",t.dailyChart.tooltip)("fill",t.dailyChart.fill)}}function ue(e,d){if(e&1&&(a(0,"section",114)(1,"div",115)(2,"header",20)(3,"h3"),p(4,"Actividades \xDAltimos 7 D\xEDas"),i()(),a(5,"div",116),g(6,fe,1,9,"apx-chart",117),i()()()),e&2){let t=m(2);n(6),l("ngIf",t.dailyChart)}}function xe(e,d){if(e&1&&h(0,"apx-chart",122),e&2){let t=m(3);l("series",t.moduleChart.series)("chart",t.moduleChart.chart)("xaxis",t.moduleChart.xaxis)("yaxis",t.moduleChart.yaxis)("dataLabels",t.moduleChart.dataLabels)("plotOptions",t.moduleChart.plotOptions)("stroke",t.moduleChart.stroke)("grid",t.moduleChart.grid)("tooltip",t.moduleChart.tooltip)("fill",t.moduleChart.fill)}}function be(e,d){if(e&1&&(a(0,"section",119)(1,"div",115)(2,"header",20)(3,"h3"),p(4,"Distribuci\xF3n por M\xF3dulo"),i()(),a(5,"div",120),g(6,xe,1,10,"apx-chart",121),i()()()),e&2){let t=m(2);n(6),l("ngIf",t.moduleChart)}}function we(e,d){if(e&1&&(a(0,"option",123),p(1),i()),e&2){let t=d.$implicit;l("value",t.value),n(),c(t.label)}}function _e(e,d){if(e&1&&(a(0,"option",123),p(1),i()),e&2){let t=d.$implicit;l("value",t.value),n(),c(t.label)}}function Ae(e,d){if(e&1&&(a(0,"div",126)(1,"div",127),h(2,"i",80),i(),a(3,"div",128)(4,"div",129)(5,"span",110),p(6),i(),a(7,"span",130),p(8),i(),a(9,"span",131),p(10),i()(),a(11,"div",132),p(12),i(),a(13,"div",133)(14,"span",112),p(15),i()()()()),e&2){let t=d.$implicit,o=m(3);n(2),l("ngClass",o.getActionIcon(t.action_type)),n(4),c(t.user_name),n(),l("ngClass",o.getActionClass(t.action_type)),n(),_(" ",o.getActionTypeLabel(t.action_type)," "),n(2),c(o.getModuleLabel(t.module)),n(2),c(t.description),n(3),c(o.formatDateTime(t.created_at))}}function Ce(e,d){if(e&1&&(a(0,"div",124),g(1,Ae,16,7,"div",125),i()),e&2){let t=m(2);n(),l("ngForOf",t.recentActivities)}}function Se(e,d){e&1&&(a(0,"div",93),p(1,"No se encontraron actividades con los filtros aplicados"),i())}function Ee(e,d){if(e&1&&(a(0,"div",134),p(1),i()),e&2){let t=m(2);n(),c(t.error)}}function ke(e,d){if(e&1){let t=V();a(0,"div",5)(1,"div",6)(2,"ul",7)(3,"li",8)(4,"a"),p(5,"Dashboard >"),i()(),a(6,"li",9),p(7,"Actividades de Usuarios"),i()(),a(8,"section",10)(9,"div",11)(10,"div",12)(11,"h1")(12,"span"),p(13,"Actividades"),i(),p(14," | Historial de Usuarios"),i(),a(15,"p"),p(16,"Monitoreo completo de todas las actividades realizadas en la plataforma"),i()(),a(17,"div",13)(18,"button",14),A("click",function(){b(t);let r=m();return w(r.loadStats())}),h(19,"i",15),i()()()(),a(20,"section",16),g(21,ee,10,4,"div",17),i(),a(22,"div",18)(23,"div",19)(24,"header",20)(25,"h3"),p(26,"Resumen de Actividades por Tipo"),i()(),a(27,"div",21)(28,"div",22)(29,"div",23),h(30,"i",24),i(),a(31,"div",25)(32,"div",26),p(33,"Crear"),i(),a(34,"div",27),p(35),i(),a(36,"div",28),p(37),i()()(),a(38,"div",29)(39,"div",23),h(40,"i",30),i(),a(41,"div",25)(42,"div",26),p(43,"Ver"),i(),a(44,"div",27),p(45),i(),a(46,"div",28),p(47),i()()(),a(48,"div",31)(49,"div",23),h(50,"i",32),i(),a(51,"div",25)(52,"div",26),p(53,"Editar"),i(),a(54,"div",27),p(55),i(),a(56,"div",28),p(57),i()()(),a(58,"div",33)(59,"div",23),h(60,"i",34),i(),a(61,"div",25)(62,"div",26),p(63,"Eliminar"),i(),a(64,"div",27),p(65),i(),a(66,"div",28),p(67),i()()()()(),a(68,"div",35)(69,"header",20)(70,"h3"),p(71,"Actividad por M\xF3dulo"),i()(),g(72,ae,2,1,"div",36)(73,ne,2,0,"ng-template",null,1,E),i(),a(75,"div",37)(76,"header",20)(77,"h3"),p(78,"Usuarios M\xE1s Activos"),i()(),g(79,oe,2,1,"div",38)(80,se,2,0,"ng-template",null,2,E),i(),a(82,"div",39)(83,"header",20)(84,"h3"),p(85,"Actividad por Hora"),i()(),a(86,"div",40),g(87,pe,10,4,"div",41),i()()(),a(88,"section",42)(89,"div",43)(90,"div",44)(91,"div",45)(92,"header",46)(93,"h4"),h(94,"i",47),p(95,"Creaciones"),i(),a(96,"span",48),p(97),i()(),a(98,"div",49),g(99,de,7,3,"div",50)(100,ce,2,0,"div",51),i()()(),a(101,"div",44)(102,"div",52)(103,"header",53)(104,"h4"),h(105,"i",54),p(106,"Visualizaciones"),i(),a(107,"span",48),p(108),i()(),a(109,"div",49),g(110,le,7,3,"div",50)(111,me,2,0,"div",51),i()()(),a(112,"div",44)(113,"div",55)(114,"header",56)(115,"h4"),h(116,"i",57),p(117,"Ediciones"),i(),a(118,"span",48),p(119),i()(),a(120,"div",49),g(121,he,7,3,"div",50)(122,ve,2,0,"div",51),i()()(),a(123,"div",44)(124,"div",58)(125,"header",59)(126,"h4"),h(127,"i",60),p(128,"Eliminaciones"),i(),a(129,"span",48),p(130),i()(),a(131,"div",49),g(132,ge,7,3,"div",50)(133,ye,2,0,"div",51),i()()()()(),g(134,ue,7,1,"section",61)(135,be,7,1,"section",62),a(136,"section",63)(137,"div",64)(138,"header",20)(139,"h3"),p(140,"Actividades Recientes"),i(),a(141,"div",65)(142,"button",66),A("click",function(){b(t);let r=m();return w(r.clearFilters())}),h(143,"i",67),p(144," Limpiar Filtros "),i()()(),a(145,"div",68)(146,"div",43)(147,"div",69)(148,"select",70),R("ngModelChange",function(r){b(t);let s=m();return T(s.filters.action_type,r)||(s.filters.action_type=r),w(r)}),A("change",function(){b(t);let r=m();return w(r.applyFilters())}),g(149,we,2,2,"option",71),i()(),a(150,"div",69)(151,"select",70),R("ngModelChange",function(r){b(t);let s=m();return T(s.filters.module,r)||(s.filters.module=r),w(r)}),A("change",function(){b(t);let r=m();return w(r.applyFilters())}),g(152,_e,2,2,"option",71),i()(),a(153,"div",69)(154,"input",72),R("ngModelChange",function(r){b(t);let s=m();return T(s.filters.date_from,r)||(s.filters.date_from=r),w(r)}),A("change",function(){b(t);let r=m();return w(r.applyFilters())}),i()(),a(155,"div",69)(156,"input",73),R("ngModelChange",function(r){b(t);let s=m();return T(s.filters.date_to,r)||(s.filters.date_to=r),w(r)}),A("change",function(){b(t);let r=m();return w(r.applyFilters())}),i()(),a(157,"div",74)(158,"input",75),R("ngModelChange",function(r){b(t);let s=m();return T(s.filters.search,r)||(s.filters.search=r),w(r)}),A("keyup.enter",function(){b(t);let r=m();return w(r.applyFilters())}),i()()()(),g(159,Ce,2,1,"div",76)(160,Se,2,0,"ng-template",null,3,E),i()(),g(162,Ee,2,1,"div",77),i()()}if(e&2){let t=S(74),o=S(81),r=S(161),s=m();n(21),l("ngForOf",pt(48,te,B(38,Kt,s.stats.todayActivities),B(40,Jt,s.stats.weekActivities),B(42,qt,s.stats.monthActivities),B(44,Qt,s.stats.totalActivities),B(46,Zt,s.stats.activeUsers))),n(14),c(s.activityTypeStats.CREATE.count),n(2),_("",s.activityTypeStats.CREATE.percentage,"%"),n(8),c(s.activityTypeStats.READ.count),n(2),_("",s.activityTypeStats.READ.percentage,"%"),n(8),c(s.activityTypeStats.UPDATE.count),n(2),_("",s.activityTypeStats.UPDATE.percentage,"%"),n(8),c(s.activityTypeStats.DELETE.count),n(2),_("",s.activityTypeStats.DELETE.percentage,"%"),n(5),l("ngIf",s.activitiesByModule.length)("ngIfElse",t),n(7),l("ngIf",s.mostActiveUsers&&s.mostActiveUsers.length)("ngIfElse",o),n(8),l("ngForOf",s.hourlyStats),n(10),c(s.separatedActivities.CREATE.length),n(2),l("ngForOf",s.separatedActivities.CREATE.slice(0,5)),n(),l("ngIf",s.separatedActivities.CREATE.length===0),n(8),c(s.separatedActivities.READ.length),n(2),l("ngForOf",s.separatedActivities.READ.slice(0,5)),n(),l("ngIf",s.separatedActivities.READ.length===0),n(8),c(s.separatedActivities.UPDATE.length),n(2),l("ngForOf",s.separatedActivities.UPDATE.slice(0,5)),n(),l("ngIf",s.separatedActivities.UPDATE.length===0),n(8),c(s.separatedActivities.DELETE.length),n(2),l("ngForOf",s.separatedActivities.DELETE.slice(0,5)),n(),l("ngIf",s.separatedActivities.DELETE.length===0),n(),l("ngIf",s.dailyChart),n(),l("ngIf",s.moduleChart),n(13),M("ngModel",s.filters.action_type),n(),l("ngForOf",s.actionTypes),n(2),M("ngModel",s.filters.module),n(),l("ngForOf",s.moduleOptions),n(2),M("ngModel",s.filters.date_from),n(2),M("ngModel",s.filters.date_to),n(2),M("ngModel",s.filters.search),n(),l("ngIf",s.recentActivities.length)("ngIfElse",r),n(3),l("ngIf",s.error)}}function De(e,d){e&1&&(a(0,"div",5)(1,"div",135)(2,"div",136),p(3,"Cargando estad\xEDsticas de actividades..."),i()()())}var Q=(()=>{class e{get hourlyStats(){let t=this.calculateHourlyActivities();return[{h:"00-06",label:"Madrugada",count:t.dawn,icon:"fa-moon"},{h:"06-12",label:"Ma\xF1ana",count:t.morning,icon:"fa-sun"},{h:"12-18",label:"Tarde",count:t.afternoon,icon:"fa-cloud-sun"},{h:"18-24",label:"Noche",count:t.night,icon:"fa-moon"}]}calculateHourlyActivities(){let t={dawn:0,morning:0,afternoon:0,night:0},o=new Date;return this.recentActivities.forEach(r=>{try{let s=new Date(r.created_at);if(isNaN(s.getTime())){console.warn("Fecha inv\xE1lida:",r.created_at);return}if(s.getFullYear()===o.getFullYear()&&s.getMonth()===o.getMonth()&&s.getDate()===o.getDate()){let v=s.getHours();v>=0&&v<6?t.dawn++:v>=6&&v<12?t.morning++:v>=12&&v<18?t.afternoon++:v>=18&&v<24&&t.night++}}catch(s){console.error("Error procesando actividad:",r,s)}}),t}constructor(t,o){this.userActivityService=t,this.translate=o,this.routes=G,this.todayDate=new Date,this.currentYear=new Date().getFullYear(),this.stats={todayActivities:0,weekActivities:0,monthActivities:0,totalActivities:0,activeUsers:0,mostActiveUser:""},this.loading=!0,this.error=null,this.recentActivities=[],this.activitiesByUser=[],this.activitiesByModule=[],this.activitiesByAction=[],this.separatedActivities={CREATE:[],READ:[],UPDATE:[],DELETE:[]},this.activityTypeStats={CREATE:{count:0,percentage:0,color:"#28a745"},READ:{count:0,percentage:0,color:"#17a2b8"},UPDATE:{count:0,percentage:0,color:"#ffc107"},DELETE:{count:0,percentage:0,color:"#dc3545"}},this.mostActiveUsersByAction={CREATE:[],READ:[],UPDATE:[],DELETE:[]},this.mostActiveUsers=[],this.filters={action_type:"",module:"",date_from:"",date_to:"",search:""},this.dailyChart=null,this.moduleChart=null,this.actionTypes=[{value:"",label:"Todos los tipos"},{value:"create",label:"Crear"},{value:"read",label:"Ver"},{value:"update",label:"Editar"},{value:"delete",label:"Eliminar"},{value:"login",label:"Iniciar sesi\xF3n"},{value:"logout",label:"Cerrar sesi\xF3n"},{value:"export",label:"Exportar"},{value:"import",label:"Importar"}],this.moduleOptions=[{value:"",label:"Todos los m\xF3dulos"},{value:"archive",label:"Archivo"},{value:"users",label:"Usuarios"},{value:"reports",label:"Reportes"},{value:"config",label:"Configuraci\xF3n"},{value:"backup",label:"Respaldos"}]}ngOnInit(){this.loadStats(),this.loadRecentActivities()}loadStats(){this.loading=!0,this.userActivityService.getActivityStats().subscribe({next:t=>{t?.stats&&(this.stats=t.stats),this.loadActivitiesByUser(),this.loadActivitiesByModule(),this.loadActivitiesByAction(),this.loadMostActiveUsers(),this.prepareDailyChart(t?.dailySeries||[]),this.loading=!1},error:t=>{this.error=t?.error?.message||"Error cargando estad\xEDsticas",this.loading=!1}})}loadRecentActivities(){this.userActivityService.getRecentActivities(this.filters,0,100).subscribe({next:t=>{this.recentActivities=t?.activities||t?.data||[],this.processSeparatedActivities()},error:t=>{console.error("Error loading recent activities:",t)}})}loadActivitiesByUser(){this.userActivityService.getActivitiesByUser().subscribe({next:t=>{this.activitiesByUser=t?.data||[]},error:t=>{console.error("Error loading activities by user:",t)}})}loadActivitiesByModule(){this.userActivityService.getActivitiesByModule().subscribe({next:t=>{this.activitiesByModule=t?.data||[],this.prepareModuleChart()},error:t=>{console.error("Error loading activities by module:",t)}})}loadActivitiesByAction(){this.userActivityService.getActivitiesByActionType().subscribe({next:t=>{this.activitiesByAction=(t?.data||[]).map((o,r)=>nt(at({},o),{color:this.getActionColor(o.action_type,r)}))},error:t=>{console.error("Error loading activities by action:",t)}})}loadMostActiveUsers(){this.userActivityService.getMostActiveUsers(10).subscribe({next:t=>{this.mostActiveUsers=t?.data||[]},error:t=>{console.error("Error loading most active users:",t)}})}prepareDailyChart(t){let o=new Date,r=[];for(let v=6;v>=0;v--){let k=new Date(o);k.setDate(o.getDate()-v);let x=k.toISOString().substring(0,10);r.push({date:x,count:0})}Array.isArray(t)&&t.forEach(v=>{let k=(v.date||v.day||v.fecha||"").toString().substring(0,10),x=r.find(U=>U.date===k);x&&(x.count=Number(v.count||v.total||v.value||0))});let s=r.map(v=>this.formatShortDate(v.date)),u=r.map(v=>v.count);this.dailyChart={series:[{name:"Actividades",data:u}],chart:{type:"area",height:280,sparkline:{enabled:!1},toolbar:{show:!1},animations:{enabled:!0,speed:600},background:"transparent",foreColor:"#495057"},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:3,colors:["#3498db"]},xaxis:{categories:s,labels:{style:{colors:Array(s.length).fill("#6c757d"),fontSize:"12px",fontWeight:400}},axisBorder:{show:!0,color:"#dee2e6"},axisTicks:{show:!0,color:"#dee2e6"}},yaxis:{labels:{style:{colors:["#6c757d"],fontSize:"12px",fontWeight:400}},forceNiceScale:!0,min:0},grid:{borderColor:"#e9ecef",strokeDashArray:2,xaxis:{lines:{show:!0}},yaxis:{lines:{show:!0}}},tooltip:{theme:"light",style:{fontSize:"12px",fontFamily:"Segoe UI, sans-serif"},x:{show:!0},y:{formatter:v=>v+" actividades"},marker:{show:!0}},fill:{type:"gradient",gradient:{shade:"light",type:"vertical",shadeIntensity:.3,gradientToColors:["rgba(52, 152, 219, 0.1)"],opacityFrom:.5,opacityTo:.1,stops:[0,100]}}}}prepareModuleChart(){if(!this.activitiesByModule.length)return;let t=this.activitiesByModule.map(r=>r.module),o=this.activitiesByModule.map(r=>r.count);this.moduleChart={series:[{name:"Actividades",data:o}],chart:{type:"bar",height:320,toolbar:{show:!1},animations:{enabled:!0,speed:600},background:"transparent",foreColor:"#495057"},plotOptions:{bar:{horizontal:!0,borderRadius:4,borderRadiusApplication:"end",barHeight:"60%",dataLabels:{position:"top"}}},dataLabels:{enabled:!0,style:{colors:["#ffffff"],fontWeight:600,fontSize:"11px"}},stroke:{width:0},xaxis:{categories:t,labels:{style:{colors:Array(t.length).fill("#6c757d"),fontSize:"12px",fontWeight:400}},axisBorder:{show:!0,color:"#dee2e6"},axisTicks:{show:!0,color:"#dee2e6"}},yaxis:{labels:{style:{colors:["#6c757d"],fontSize:"12px",fontWeight:400}}},grid:{borderColor:"#e9ecef",strokeDashArray:2,xaxis:{lines:{show:!0}},yaxis:{lines:{show:!0}}},tooltip:{theme:"light",style:{fontSize:"12px",fontFamily:"Segoe UI, sans-serif"},y:{formatter:r=>r+" actividades"},marker:{show:!0}},fill:{type:"gradient",gradient:{shade:"light",type:"horizontal",shadeIntensity:.2,gradientToColors:["#2980b9"],opacityFrom:.8,opacityTo:.6,stops:[0,100]},colors:["#3498db"]}}}applyFilters(){this.loadRecentActivities()}clearFilters(){this.filters={action_type:"",module:"",date_from:"",date_to:"",search:""},this.loadRecentActivities()}getActionColor(t,o){return{create:"#28a745",read:"#17a2b8",update:"#ffc107",delete:"#dc3545",login:"#007bff",logout:"#6c757d",export:"#e83e8c",import:"#20c997"}[t]||["#6f42c1","#fd7e14","#e83e8c"][o%3]}formatShortDate(t){return new Date(t+"T00:00:00").toLocaleDateString("es-MX",{day:"2-digit",month:"2-digit"})}formatDateTime(t){return new Date(t).toLocaleDateString("es-MX",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}getActionTypeLabel(t){let o=this.actionTypes.find(r=>r.value===t);return o?o.label:t}getModuleLabel(t){let o=this.moduleOptions.find(r=>r.value===t);return o?o.label:t}getActionIcon(t){return{create:"fa-plus",read:"fa-eye",update:"fa-edit",delete:"fa-trash",login:"fa-sign-in-alt",logout:"fa-sign-out-alt",export:"fa-download",import:"fa-upload"}[t]||"fa-cog"}getActionClass(t){return{create:"badge-success",read:"badge-info",update:"badge-warning",delete:"badge-danger",login:"badge-primary",logout:"badge-secondary",export:"badge-purple",import:"badge-teal"}[t]||"badge-secondary"}processSeparatedActivities(){this.separatedActivities={CREATE:[],READ:[],UPDATE:[],DELETE:[]},this.activityTypeStats={CREATE:{count:0,percentage:0,color:"#28a745"},READ:{count:0,percentage:0,color:"#17a2b8"},UPDATE:{count:0,percentage:0,color:"#ffc107"},DELETE:{count:0,percentage:0,color:"#dc3545"}},this.recentActivities.forEach(o=>{let r=o.action_type?.toUpperCase();this.separatedActivities[r]&&(this.separatedActivities[r].push(o),this.activityTypeStats[r].count++)});let t=this.recentActivities.length;t>0&&Object.keys(this.activityTypeStats).forEach(o=>{let r=o;this.activityTypeStats[r].percentage=Math.round(this.activityTypeStats[r].count/t*100)}),this.processMostActiveUsersByAction()}processMostActiveUsersByAction(){Object.keys(this.separatedActivities).forEach(t=>{let o=this.separatedActivities[t],r={};o.forEach(s=>{let u=s.user_name;r[u]||(r[u]={count:0,user_name:u,role:s.role||"Usuario"}),r[u].count++}),this.mostActiveUsersByAction[t]=Object.values(r).sort((s,u)=>u.count-s.count).slice(0,5)})}getActivityPercentage(t){return this.activityTypeStats[t]?.percentage||0}getActivityColor(t){return this.activityTypeStats[t]?.color||"#6c757d"}static{this.\u0275fac=function(o){return new(o||e)(O(At),O($))}}static{this.\u0275cmp=z({type:e,selectors:[["app-user-activity-dashboard"]],decls:3,vars:2,consts:[["loadingTpl",""],["noModules",""],["noUsers",""],["noActivities",""],["class","page-wrapper",4,"ngIf","ngIfElse"],[1,"page-wrapper"],[1,"content","activity-dash-new"],[1,"breadcrumb","mb-3"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"hero","mb-4"],[1,"hero-inner"],[1,"hero-text"],[1,"hero-meta"],[1,"btn","btn-refresh",3,"click"],[1,"fa","fa-rotate"],[1,"kpi-grid","mb-4"],["class","kpi-card",4,"ngFor","ngForOf"],[1,"grid-panels","mb-4"],[1,"panel","panel-activity-stats"],[1,"panel-hd"],[1,"activity-types-grid"],[1,"activity-type-card","create-card"],[1,"activity-type-icon"],[1,"fa","fa-plus"],[1,"activity-type-body"],[1,"activity-type-label"],[1,"activity-type-count"],[1,"activity-type-percentage"],[1,"activity-type-card","read-card"],[1,"fa","fa-eye"],[1,"activity-type-card","update-card"],[1,"fa","fa-edit"],[1,"activity-type-card","delete-card"],[1,"fa","fa-trash"],[1,"panel","panel-modules"],["class","modules-list",4,"ngIf","ngIfElse"],[1,"panel","panel-top-users"],["class","users-list",4,"ngIf","ngIfElse"],[1,"panel","panel-hourly-stats"],[1,"hourly-stats"],["class","hour-item",4,"ngFor","ngForOf"],[1,"separated-activities","mb-4"],[1,"row"],[1,"col-lg-6","col-xl-3","mb-4"],[1,"panel","panel-create"],[1,"panel-hd","create-header"],[1,"fa","fa-plus","me-2"],[1,"activity-count-badge"],[1,"activities-list-compact"],["class","activity-item-compact",4,"ngFor","ngForOf"],["class","empty-compact",4,"ngIf"],[1,"panel","panel-read"],[1,"panel-hd","read-header"],[1,"fa","fa-eye","me-2"],[1,"panel","panel-update"],[1,"panel-hd","update-header"],[1,"fa","fa-edit","me-2"],[1,"panel","panel-delete"],[1,"panel-hd","delete-header"],[1,"fa","fa-trash","me-2"],["class","daily-chart",4,"ngIf"],["class","module-chart",4,"ngIf"],[1,"recent-activities"],[1,"panel"],[1,"panel-actions"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"fa","fa-times"],[1,"filters-row","mb-3"],[1,"col-md-2"],[1,"form-control","form-control-sm",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","date","placeholder","Desde",1,"form-control","form-control-sm",3,"ngModelChange","change","ngModel"],["type","date","placeholder","Hasta",1,"form-control","form-control-sm",3,"ngModelChange","change","ngModel"],[1,"col-md-4"],["type","text","placeholder","Buscar en descripciones...",1,"form-control","form-control-sm",3,"ngModelChange","keyup.enter","ngModel"],["class","activities-list",4,"ngIf","ngIfElse"],["class","alert alert-danger py-2 px-3 small mb-0",4,"ngIf"],[1,"kpi-card"],[1,"kpi-icon"],[1,"fa",3,"ngClass"],[1,"kpi-body"],[1,"kpi-label"],[1,"kpi-value"],[1,"modules-list"],["class","module-item",4,"ngFor","ngForOf"],[1,"module-item"],[1,"module-rank"],[1,"module-body"],[1,"module-name",3,"title"],[1,"module-meter"],[1,"meter-fill"],[1,"module-count"],[1,"empty"],[1,"users-list"],["class","user-item",4,"ngFor","ngForOf"],[1,"user-item"],[1,"user-rank"],[1,"user-body"],[1,"user-name",3,"title"],[1,"user-meter"],[1,"meter-fill","user-fill"],[1,"user-count"],[1,"hour-item"],[1,"hour-icon"],[1,"hour-body"],[1,"hour-label"],[1,"hour-range"],[1,"hour-count"],[1,"activity-item-compact"],[1,"activity-user"],[1,"activity-desc"],[1,"activity-time"],[1,"empty-compact"],[1,"daily-chart"],[1,"panel","panel-chart"],[1,"chart-wrapper"],[3,"series","chart","xaxis","yaxis","dataLabels","stroke","grid","tooltip","fill",4,"ngIf"],[3,"series","chart","xaxis","yaxis","dataLabels","stroke","grid","tooltip","fill"],[1,"module-chart"],[1,"chart-wrapper",2,"height","320px !important"],[3,"series","chart","xaxis","yaxis","dataLabels","plotOptions","stroke","grid","tooltip","fill",4,"ngIf"],[3,"series","chart","xaxis","yaxis","dataLabels","plotOptions","stroke","grid","tooltip","fill"],[3,"value"],[1,"activities-list"],["class","activity-item",4,"ngFor","ngForOf"],[1,"activity-item"],[1,"activity-icon"],[1,"activity-content"],[1,"activity-header"],[1,"badge",3,"ngClass"],[1,"activity-module"],[1,"activity-description"],[1,"activity-meta"],[1,"alert","alert-danger","py-2","px-3","small","mb-0"],[1,"content"],[1,"text-center","py-5","text-muted"]],template:function(o,r){if(o&1&&g(0,ke,163,54,"div",4)(1,De,4,0,"ng-template",null,0,E),o&2){let s=S(2);l("ngIf",!r.loading)("ngIfElse",s)}},dependencies:[P,N,W,j,I,K,X,Y,bt,ut,xt,vt,ft,gt,yt],styles:[`.activity-dash-new{padding-left:clamp(.75rem,1.2vw,1rem)!important;padding-right:clamp(.75rem,1.8vw,1.25rem)!important;overflow-x:hidden!important;background:transparent!important;min-height:auto!important}.activity-dash-new *{box-sizing:border-box}.activity-dash-new ul.breadcrumb{background:transparent!important;padding:0!important;margin:0 0 .75rem!important;list-style:none!important;display:flex!important;gap:.5rem;font-size:.8rem!important;text-transform:none!important;border:none!important;border-radius:0!important}.activity-dash-new ul.breadcrumb li{opacity:.85;color:#bcd0f0!important;background:transparent!important;border:none!important;padding:0!important;margin:0!important}.activity-dash-new ul.breadcrumb .active{opacity:1;color:#e6eeff!important;background:transparent!important}.activity-dash-new ul.breadcrumb a{color:#8fb4ff!important;text-decoration:none!important;background:transparent!important;border:none!important;padding:0!important}.activity-dash-new .hero{position:relative!important;border-radius:16px!important;padding:1.5rem 1.25rem!important;background:linear-gradient(135deg,#1f2432,#12151d)!important;border:1px solid #262c3a!important;overflow:hidden!important;margin-bottom:1.5rem!important;box-shadow:none!important}.activity-dash-new .hero .hero-inner{display:flex!important;align-items:flex-end!important;justify-content:space-between!important;gap:1rem!important}.activity-dash-new .hero .hero-text h1{margin:0 0 .35rem!important;font-weight:700!important;font-size:1.5rem!important;color:#dfe7ff!important;background:none!important;-webkit-text-fill-color:initial!important;text-shadow:none!important}.activity-dash-new .hero .hero-text h1 span{color:#6ea8ff!important;background:none!important;-webkit-text-fill-color:initial!important}.activity-dash-new .hero .hero-text p{margin:0!important;color:#9fb4d6!important;opacity:.9!important;font-size:.95rem!important;text-shadow:none!important}.activity-dash-new .hero .btn-refresh{background:#222633!important;border:1px solid #2e3344!important;color:#6ea8ff!important;border-radius:10px!important;width:42px!important;height:42px!important;display:grid!important;place-items:center!important;transition:.2s!important;box-shadow:none!important;padding:0!important}.activity-dash-new .hero .btn-refresh:hover{background:#2a3040!important;transform:none!important;box-shadow:none!important}.activity-dash-new .hero .btn-refresh:focus{box-shadow:none!important;outline:none!important}.activity-dash-new .kpi-grid{display:grid!important;gap:1rem!important;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))!important;margin-bottom:1.5rem!important}.activity-dash-new .kpi-grid .kpi-card{position:relative!important;display:flex!important;align-items:center!important;gap:.9rem!important;background:#171a22!important;border:1px solid #232936!important;border-radius:14px!important;padding:1rem 1.1rem!important;transition:transform .2s ease,box-shadow .2s ease!important;box-shadow:none!important;overflow:hidden!important;height:100%!important;min-height:90px!important;max-height:120px!important}.activity-dash-new .kpi-grid .kpi-card:hover{transform:translateY(-3px)!important;box-shadow:0 10px 18px -10px #0009!important}.activity-dash-new .kpi-grid .kpi-card .kpi-icon{width:48px!important;height:48px!important;flex:0 0 48px!important;border-radius:12px!important;display:grid!important;place-items:center!important;background:#1e2230!important;color:#6ea8ff!important;box-shadow:0 0 0 1px #2c3442 inset!important;flex-shrink:0!important}.activity-dash-new .kpi-grid .kpi-card .kpi-icon i{font-size:1.2rem!important;color:#6ea8ff!important}.activity-dash-new .kpi-grid .kpi-card .kpi-body{overflow:hidden!important;flex:1!important;min-width:0!important}.activity-dash-new .kpi-grid .kpi-card .kpi-body .kpi-label{font-size:.8rem!important;font-weight:600!important;color:#9fb4d6!important;margin-bottom:.25rem!important;text-transform:none!important;letter-spacing:normal!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important;line-height:1.2!important;max-height:1.2rem!important}.activity-dash-new .kpi-grid .kpi-card .kpi-body .kpi-label small{margin-left:.35rem!important;opacity:.8!important;color:#9fb4d6!important}.activity-dash-new .kpi-grid .kpi-card .kpi-body .kpi-value{font-size:1.9rem!important;font-weight:800!important;line-height:1!important;letter-spacing:-.5px!important;color:#e8efff!important;background:none!important;-webkit-text-fill-color:initial!important;-webkit-background-clip:initial!important;background-clip:initial!important;text-shadow:none!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important}.activity-dash-new .grid-panels{display:grid!important;gap:1.2rem!important;grid-template-columns:repeat(auto-fit,minmax(320px,1fr))!important;align-items:start!important;margin-bottom:1.5rem!important}.activity-dash-new .panel{background:#171a22!important;border:1px solid #232936!important;border-radius:16px!important;padding:1rem 1.1rem 1.1rem!important;box-shadow:none!important}.activity-dash-new .panel .panel-hd{padding:0!important;border-bottom:none!important;background:transparent!important}.activity-dash-new .panel .panel-hd h3{margin:0 0 .75rem!important;font-size:.95rem!important;text-transform:uppercase!important;letter-spacing:.6px!important;color:#9fb4d6!important;font-weight:700!important;background:transparent!important;border:none!important;padding:0!important}.activity-dash-new .panel-activity-stats{grid-column:1/-1!important}.activity-dash-new .panel-activity-stats .activity-types-grid{display:grid!important;grid-template-columns:repeat(auto-fit,minmax(200px,1fr))!important;gap:1rem!important;padding:1rem!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card{background:#12141b!important;border:1px solid #222836!important;border-radius:12px!important;padding:1.5rem!important;text-align:center!important;transition:all .3s ease!important;box-shadow:none!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card:hover{transform:translateY(-3px)!important;box-shadow:0 8px 20px #0000004d!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card .activity-type-icon{width:50px!important;height:50px!important;border-radius:50%!important;display:flex!important;align-items:center!important;justify-content:center!important;margin:0 auto 1rem!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card .activity-type-icon i{color:#fff!important;font-size:1.25rem!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card.create-card .activity-type-icon{background:linear-gradient(135deg,#28a745,#20c997)!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card.read-card .activity-type-icon{background:linear-gradient(135deg,#17a2b8,#007bff)!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card.update-card .activity-type-icon{background:linear-gradient(135deg,#ffc107,#fd7e14)!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card.delete-card .activity-type-icon{background:linear-gradient(135deg,#dc3545,#e83e8c)!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card .activity-type-label{font-size:.875rem!important;font-weight:600!important;color:#9fb4d6!important;margin-bottom:.5rem!important;text-transform:uppercase!important;letter-spacing:.5px!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card .activity-type-count{font-size:2rem!important;font-weight:700!important;color:#e8efff!important;margin-bottom:.25rem!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card .activity-type-percentage{font-size:.875rem!important;color:#9fb4d6!important;font-weight:500!important}.activity-dash-new .panel-modules{overflow:hidden!important}.activity-dash-new .panel-modules .modules-list{display:flex!important;flex-direction:column!important;gap:.6rem!important;padding:0!important;margin:0!important}.activity-dash-new .panel-modules .modules-list .module-item{display:grid!important;grid-template-columns:32px 1fr 50px!important;gap:.75rem!important;align-items:center!important;background:#12141b!important;border:1px solid #222836!important;padding:.6rem .7rem!important;border-radius:12px!important;overflow:hidden!important}.activity-dash-new .panel-modules .modules-list .module-item .module-rank{width:32px!important;height:32px!important;border-radius:10px!important;display:grid!important;place-items:center!important;background:#1d212a!important;color:#6ea8ff!important;font-weight:700!important;box-shadow:0 0 0 1px #2a3140 inset!important;flex-shrink:0!important}.activity-dash-new .panel-modules .modules-list .module-item .module-body{min-width:0!important;overflow:hidden!important}.activity-dash-new .panel-modules .modules-list .module-item .module-body .module-name{color:#d9e2f5!important;font-weight:600!important;font-size:.85rem!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important;max-width:100%!important;line-height:1.2!important;margin-bottom:.25rem!important}.activity-dash-new .panel-modules .modules-list .module-item .module-body .module-meter{height:6px!important;background:#212730!important;border-radius:4px!important;overflow:hidden!important;position:relative!important;width:100%!important}.activity-dash-new .panel-modules .modules-list .module-item .module-body .module-meter .meter-fill{position:absolute!important;top:0!important;left:0!important;height:100%!important;background:linear-gradient(90deg,#6ea8ff,#2dd6c7)!important;transition:width .3s ease!important;border-radius:4px!important}.activity-dash-new .panel-modules .modules-list .module-item .module-count{text-align:right!important;color:#9fb4d6!important;font-weight:700!important;flex-shrink:0!important;font-size:.875rem!important}.activity-dash-new .panel-modules .empty{text-align:center!important;padding:2rem!important;color:#9fb4d6!important;font-style:italic!important}.activity-dash-new .panel-top-users{overflow:hidden!important}.activity-dash-new .panel-top-users .users-list{display:flex!important;flex-direction:column!important;gap:.6rem!important;padding:0!important;margin:0!important}.activity-dash-new .panel-top-users .users-list .user-item{display:grid!important;grid-template-columns:32px 1fr 50px!important;gap:.75rem!important;align-items:center!important;background:#12141b!important;border:1px solid #222836!important;padding:.6rem .7rem!important;border-radius:12px!important;overflow:hidden!important}.activity-dash-new .panel-top-users .users-list .user-item .user-rank{width:32px!important;height:32px!important;border-radius:10px!important;display:grid!important;place-items:center!important;background:#1d212a!important;color:#20c997!important;font-weight:700!important;box-shadow:0 0 0 1px #2a3140 inset!important;flex-shrink:0!important}.activity-dash-new .panel-top-users .users-list .user-item .user-body{min-width:0!important;overflow:hidden!important}.activity-dash-new .panel-top-users .users-list .user-item .user-body .user-name{font-weight:600!important;color:#d9e2f5!important;font-size:.85rem!important;margin-bottom:.35rem!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important}.activity-dash-new .panel-top-users .users-list .user-item .user-body .user-meter{height:5px!important;background:#1e2230!important;border-radius:3px!important;overflow:hidden!important;position:relative!important;width:100%!important}.activity-dash-new .panel-top-users .users-list .user-item .user-body .user-meter .user-fill{position:absolute!important;top:0!important;left:0!important;height:100%!important;background:linear-gradient(90deg,#20c997,#17a2b8)!important;transition:width .3s ease!important;border-radius:4px!important}.activity-dash-new .panel-top-users .users-list .user-item .user-count{text-align:right!important;color:#9fb4d6!important;font-weight:700!important;flex-shrink:0!important;font-size:.875rem!important}.activity-dash-new .panel-top-users .empty{text-align:center!important;padding:2rem!important;color:#9fb4d6!important;font-style:italic!important}.activity-dash-new .panel-hourly-stats{overflow:hidden!important}.activity-dash-new .panel-hourly-stats .hourly-stats{display:flex!important;flex-direction:column!important;gap:.8rem!important;padding:0!important;margin:0!important}.activity-dash-new .panel-hourly-stats .hourly-stats .hour-item{display:grid!important;grid-template-columns:40px 1fr 50px!important;gap:.75rem!important;align-items:center!important;background:#12141b!important;border:1px solid #222836!important;padding:.8rem .7rem!important;border-radius:12px!important;overflow:hidden!important}.activity-dash-new .panel-hourly-stats .hourly-stats .hour-item .hour-icon{width:40px!important;height:40px!important;border-radius:12px!important;display:grid!important;place-items:center!important;background:#1d212a!important;color:#ffc107!important;font-size:1rem!important;box-shadow:0 0 0 1px #2a3140 inset!important;flex-shrink:0!important}.activity-dash-new .panel-hourly-stats .hourly-stats .hour-item .hour-body{min-width:0!important;overflow:hidden!important}.activity-dash-new .panel-hourly-stats .hourly-stats .hour-item .hour-body .hour-label{font-weight:600!important;color:#d9e2f5!important;font-size:.85rem!important;margin-bottom:.2rem!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important}.activity-dash-new .panel-hourly-stats .hourly-stats .hour-item .hour-body .hour-range{color:#9fb4d6!important;font-size:.75rem!important;font-weight:500!important;opacity:.8!important}.activity-dash-new .panel-hourly-stats .hourly-stats .hour-item .hour-count{text-align:right!important;color:#ffc107!important;font-weight:700!important;flex-shrink:0!important;font-size:.875rem!important}.activity-dash-new .separated-activities{margin-bottom:1.5rem!important}.activity-dash-new .separated-activities .panel{background:#171a22!important;border:1px solid #232936!important;border-radius:16px!important;overflow:hidden!important;box-shadow:none!important;height:auto!important;min-height:0!important}.activity-dash-new .separated-activities .panel .panel-hd{padding:1rem 1.5rem!important;display:flex!important;justify-content:space-between!important;align-items:center!important;border-bottom:1px solid #262c3a!important;background:transparent!important;flex-shrink:0!important}.activity-dash-new .separated-activities .panel .panel-hd h4{margin:0!important;font-size:1rem!important;font-weight:600!important;display:flex!important;align-items:center!important;color:#9fb4d6!important;background:transparent!important;border:none!important;padding:0!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important}.activity-dash-new .separated-activities .panel .panel-hd h4 i{margin-right:.5rem!important;flex-shrink:0!important}.activity-dash-new .separated-activities .panel .panel-hd .activity-count-badge{background:#6ea8ff!important;color:#fff!important;padding:.25rem .75rem!important;border-radius:20px!important;font-size:.75rem!important;font-weight:600!important;border:none!important;flex-shrink:0!important}.activity-dash-new .separated-activities .panel .panel-hd.create-header{background:#28a7451a!important}.activity-dash-new .separated-activities .panel .panel-hd.create-header h4{color:#28a745!important}.activity-dash-new .separated-activities .panel .panel-hd.create-header .activity-count-badge{background:#28a745!important}.activity-dash-new .separated-activities .panel .panel-hd.read-header{background:#17a2b81a!important}.activity-dash-new .separated-activities .panel .panel-hd.read-header h4{color:#17a2b8!important}.activity-dash-new .separated-activities .panel .panel-hd.read-header .activity-count-badge{background:#17a2b8!important}.activity-dash-new .separated-activities .panel .panel-hd.update-header{background:#ffc1071a!important}.activity-dash-new .separated-activities .panel .panel-hd.update-header h4{color:#ffc107!important}.activity-dash-new .separated-activities .panel .panel-hd.update-header .activity-count-badge{background:#ffc107!important;color:#212529!important}.activity-dash-new .separated-activities .panel .panel-hd.delete-header{background:#dc35451a!important}.activity-dash-new .separated-activities .panel .panel-hd.delete-header h4{color:#dc3545!important}.activity-dash-new .separated-activities .panel .panel-hd.delete-header .activity-count-badge{background:#dc3545!important}.activity-dash-new .separated-activities .panel .activities-list-compact{padding:1rem!important;max-height:250px!important;overflow-y:auto!important;overflow-x:hidden!important}.activity-dash-new .separated-activities .panel .activities-list-compact .activity-item-compact{padding:.75rem 0!important;border-bottom:1px solid #262c3a!important;background:transparent!important;overflow:hidden!important}.activity-dash-new .separated-activities .panel .activities-list-compact .activity-item-compact:last-child{border-bottom:none!important}.activity-dash-new .separated-activities .panel .activities-list-compact .activity-item-compact .activity-user{font-weight:600!important;color:#d9e2f5!important;font-size:.875rem!important;margin-bottom:.25rem!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important}.activity-dash-new .separated-activities .panel .activities-list-compact .activity-item-compact .activity-desc{color:#9fb4d6!important;font-size:.8rem!important;line-height:1.3!important;margin-bottom:.5rem!important;display:-webkit-box!important;-webkit-line-clamp:2!important;line-clamp:2!important;-webkit-box-orient:vertical!important;overflow:hidden!important;word-break:break-word!important;max-height:2.6rem!important}.activity-dash-new .separated-activities .panel .activities-list-compact .activity-item-compact .activity-time{color:#9fb4d6!important;font-size:.75rem!important;font-weight:500!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important}.activity-dash-new .separated-activities .panel .activities-list-compact .empty-compact{text-align:center!important;color:#9fb4d6!important;font-style:italic!important;padding:2rem 1rem!important;font-size:.875rem!important}.activity-dash-new .panel-chart{background:#171a22!important;border:1px solid #232936!important;border-radius:16px!important;margin-bottom:1.5rem!important;box-shadow:none!important;overflow:hidden!important;position:relative!important}.activity-dash-new .panel-chart .panel-hd{padding:1rem 1.1rem 0!important;background:transparent!important;border-bottom:none!important}.activity-dash-new .panel-chart .panel-hd h3{margin:0 0 .75rem!important;font-size:.95rem!important;text-transform:uppercase!important;letter-spacing:.6px!important;color:#9fb4d6!important;font-weight:700!important;background:transparent!important;border:none!important;padding:0!important}.activity-dash-new .panel-chart .chart-wrapper{padding:1rem!important;position:relative!important;width:100%!important;height:280px!important;overflow:hidden!important}.activity-dash-new .panel-chart .chart-wrapper apx-chart{display:block!important;width:100%!important;height:100%!important;max-width:100%!important;max-height:100%!important;overflow:hidden!important;position:relative!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-canvas{background:transparent!important;max-width:100%!important;max-height:100%!important;overflow:hidden!important;position:relative!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-svg{max-width:100%!important;max-height:100%!important;overflow:hidden!important;width:100%!important;height:100%!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-inner{overflow:hidden!important;max-width:100%!important;max-height:100%!important}.activity-dash-new .panel-chart .chart-wrapper svg,.activity-dash-new .panel-chart .chart-wrapper foreignObject{max-width:100%!important;max-height:100%!important;overflow:hidden!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-tooltip{background:#1e222b!important;border:1px solid #2c3240!important;color:#d9e2f5!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-tooltip .apexcharts-tooltip-title{background:#171b22!important;border-bottom:1px solid #2c3240!important;color:#d9e2f5!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-legend{color:#d9e2f5!important;max-width:100%!important;overflow:hidden!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-legend .apexcharts-legend-series{overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-xaxis-label,.activity-dash-new .panel-chart .chart-wrapper .apexcharts-yaxis-label{fill:#9fb4d6!important;font-size:11px!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-gridline{stroke:#262c3a!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-text{fill:#9fb4d6!important;font-size:11px!important;overflow:hidden!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-datalabel{fill:#d9e2f5!important;font-size:10px!important;overflow:hidden!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-bar-series{overflow:hidden!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-series,.activity-dash-new .panel-chart .chart-wrapper .apexcharts-data-labels{overflow:hidden!important;max-width:100%!important}.activity-dash-new .recent-activities .panel{background:#171a22!important;border:1px solid #232936!important;border-radius:16px!important;box-shadow:none!important}.activity-dash-new .recent-activities .panel .panel-hd{padding:1.5rem 1.5rem 1rem!important;border-bottom:1px solid #262c3a!important;display:flex!important;justify-content:space-between!important;align-items:center!important;background:transparent!important}.activity-dash-new .recent-activities .panel .panel-hd h3{margin:0!important;font-size:.95rem!important;text-transform:uppercase!important;letter-spacing:.6px!important;color:#9fb4d6!important;font-weight:700!important;background:transparent!important;border:none!important;padding:0!important}.activity-dash-new .recent-activities .panel .panel-hd .panel-actions .btn{background:#222633!important;border:1px solid #2e3344!important;color:#6ea8ff!important;border-radius:8px!important;padding:.375rem .75rem!important;font-size:.875rem!important;box-shadow:none!important}.activity-dash-new .recent-activities .panel .panel-hd .panel-actions .btn:hover{background:#2a3040!important;transform:none!important;box-shadow:none!important}.activity-dash-new .recent-activities .panel .panel-hd .panel-actions .btn:focus{box-shadow:none!important;outline:none!important}.activity-dash-new .recent-activities .panel .filters-row{padding:1rem 1.5rem 0!important}.activity-dash-new .recent-activities .panel .filters-row .form-control{background:#12141b!important;border:1px solid #222836!important;color:#d9e2f5!important;border-radius:8px!important;box-shadow:none!important}.activity-dash-new .recent-activities .panel .filters-row .form-control:focus{background:#12141b!important;border-color:#6ea8ff!important;color:#d9e2f5!important;box-shadow:0 0 0 .2rem #6ea8ff40!important;outline:none!important}.activity-dash-new .recent-activities .panel .filters-row .form-control option{background:#12141b!important;color:#d9e2f5!important}.activity-dash-new .recent-activities .panel .activities-list{padding:1rem 1.5rem 1.5rem!important;max-height:500px!important;overflow-y:auto!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item{display:flex!important;align-items:flex-start!important;padding:1rem 0!important;border-bottom:1px solid #262c3a!important;background:transparent!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item:last-child{border-bottom:none!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item .activity-icon{width:40px!important;height:40px!important;background:#1e2230!important;border-radius:8px!important;display:flex!important;align-items:center!important;justify-content:center!important;margin-right:1rem!important;flex-shrink:0!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item .activity-icon i{color:#6ea8ff!important;font-size:1rem!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item .activity-content{flex:1!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item .activity-content .activity-header{display:flex!important;align-items:center!important;margin-bottom:.5rem!important;flex-wrap:wrap!important;gap:.5rem!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item .activity-content .activity-header .activity-user{font-weight:600!important;color:#d9e2f5!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item .activity-content .activity-header .badge{font-size:.75rem!important;padding:.25rem .5rem!important;border-radius:4px!important;border:none!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item .activity-content .activity-header .activity-module{font-size:.875rem!important;color:#9fb4d6!important;background:#12141b!important;padding:.25rem .5rem!important;border-radius:4px!important;border:1px solid #222836!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item .activity-content .activity-description{color:#9fb4d6!important;margin-bottom:.5rem!important;line-height:1.4!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item .activity-content .activity-meta{display:flex!important;gap:1rem!important;font-size:.75rem!important;color:#9fb4d6!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item .activity-content .activity-meta .activity-time{font-weight:500!important}.activity-dash-new .empty{text-align:center!important;padding:2rem!important;color:#9fb4d6!important;font-style:italic!important}.activity-dash-new .badge-success{background-color:#28a745!important;color:#fff!important}.activity-dash-new .badge-info{background-color:#17a2b8!important;color:#fff!important}.activity-dash-new .badge-warning{background-color:#ffc107!important;color:#212529!important}.activity-dash-new .badge-danger{background-color:#dc3545!important;color:#fff!important}.activity-dash-new .badge-primary{background-color:#007bff!important;color:#fff!important}.activity-dash-new .badge-secondary{background-color:#6c757d!important;color:#fff!important}.activity-dash-new .badge-purple{background-color:#6f42c1!important;color:#fff!important}.activity-dash-new .badge-teal{background-color:#20c997!important;color:#fff!important}.activity-dash-new .module-chart .chart-wrapper,.activity-dash-new .daily-chart .chart-wrapper{position:relative!important;width:100%!important;max-width:100%!important;overflow:hidden!important;contain:layout style!important}.activity-dash-new .module-chart .chart-wrapper *,.activity-dash-new .daily-chart .chart-wrapper *{max-width:100%!important;overflow:hidden!important}.activity-dash-new .module-chart .chart-wrapper .apexcharts-canvas,.activity-dash-new .daily-chart .chart-wrapper .apexcharts-canvas{transform:none!important;position:relative!important;left:0!important;top:0!important}.activity-dash-new .module-chart .chart-wrapper .apexcharts-bar-goals-markers,.activity-dash-new .module-chart .chart-wrapper .apexcharts-bar-series,.activity-dash-new .module-chart .chart-wrapper .apexcharts-series,.activity-dash-new .daily-chart .chart-wrapper .apexcharts-bar-goals-markers,.activity-dash-new .daily-chart .chart-wrapper .apexcharts-bar-series,.activity-dash-new .daily-chart .chart-wrapper .apexcharts-series{transform:none!important;contain:layout!important}.activity-dash-new .module-chart .chart-wrapper .apexcharts-yaxis-texts-g,.activity-dash-new .module-chart .chart-wrapper .apexcharts-xaxis-texts-g,.activity-dash-new .daily-chart .chart-wrapper .apexcharts-yaxis-texts-g,.activity-dash-new .daily-chart .chart-wrapper .apexcharts-xaxis-texts-g{overflow:hidden!important}.activity-dash-new .module-chart .chart-wrapper .apexcharts-yaxis-texts-g text,.activity-dash-new .module-chart .chart-wrapper .apexcharts-xaxis-texts-g text,.activity-dash-new .daily-chart .chart-wrapper .apexcharts-yaxis-texts-g text,.activity-dash-new .daily-chart .chart-wrapper .apexcharts-xaxis-texts-g text{max-width:120px!important;overflow:hidden!important;text-overflow:ellipsis!important}.activity-dash-new .row{margin-left:0!important;margin-right:0!important}.activity-dash-new .col-lg-6,.activity-dash-new .col-xl-3,.activity-dash-new .col-md-2,.activity-dash-new .col-md-4{padding-left:.75rem!important;padding-right:.75rem!important}.activity-dash-new button,.activity-dash-new .btn,.activity-dash-new input,.activity-dash-new select,.activity-dash-new .form-control,.activity-dash-new .panel,.activity-dash-new .kpi-card,.activity-dash-new .activity-type-card,.activity-dash-new .module-item,.activity-dash-new .activity-item{font-family:inherit!important;line-height:inherit!important}.activity-dash-new .alert{border-radius:8px!important;border:1px solid #dc3545!important;background-color:#dc35451a!important;color:#dc3545!important;font-size:.875rem!important}@media (max-width: 992px){.activity-dash-new .kpi-grid{grid-template-columns:repeat(auto-fit,minmax(200px,1fr))!important}.activity-dash-new .grid-panels{grid-template-columns:repeat(auto-fit,minmax(280px,1fr))!important}}@media (max-width: 768px){.activity-dash-new .hero .hero-inner{flex-direction:column!important;text-align:center!important;gap:1rem!important}.activity-dash-new .hero .hero-text h1{font-size:1.25rem!important}.activity-dash-new .kpi-grid{grid-template-columns:repeat(auto-fit,minmax(150px,1fr))!important;gap:1rem!important}.activity-dash-new .kpi-grid .kpi-card{padding:1rem!important}.activity-dash-new .kpi-grid .kpi-card .kpi-icon{width:40px!important;height:40px!important}.activity-dash-new .kpi-grid .kpi-card .kpi-icon i{font-size:1rem!important}.activity-dash-new .kpi-grid .kpi-card .kpi-value{font-size:1.5rem!important}.activity-dash-new .grid-panels{grid-template-columns:1fr!important}.activity-dash-new .separated-activities .row .col-lg-6.col-xl-3{margin-bottom:1rem!important}.activity-dash-new .separated-activities .panel .activities-list-compact .activity-item-compact .activity-desc{-webkit-line-clamp:1!important;line-clamp:1!important}.activity-dash-new .panel-activity-stats .activity-types-grid{grid-template-columns:repeat(2,1fr)!important;gap:.75rem!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card{padding:1rem!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card .activity-type-count{font-size:1.5rem!important}}
`],encapsulation:2})}}return e})();var Ie=[{path:"",redirectTo:"archive",pathMatch:"full"},{path:"archive",component:q,canActivate:[it],data:{allowedRoles:["archivo","archive","director general","subdirector general"]}},{path:"user-activities",component:Q,canActivate:[it],data:{allowedRoles:["director general","subdirector general","admin"]}}],Ct=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({imports:[I.forChild(Ie),I]})}}return e})();var si=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({imports:[P,wt,Ct,q,Q]})}}return e})();export{si as DashboardModule};
