import{a as X}from"./chunk-B56DO24M.js";import{Hb as J}from"./chunk-EX4DTU24.js";import"./chunk-MHGS5KHZ.js";import"./chunk-6SU75NRV.js";import{a as U}from"./chunk-MV3LUB43.js";import"./chunk-VOEI7TUP.js";import{c as W,g as K,h as j,j as z,l as Y,m as q,y as Q}from"./chunk-K6AIGGO7.js";import{a as V}from"./chunk-7IQVTAUF.js";import{b as F,c as N,d as H}from"./chunk-DSFCBPHH.js";import{a as G}from"./chunk-KOTFE7EF.js";import{Bc as R,Ca as t,Cc as v,Eb as D,Fb as y,Gb as M,Ha as f,Ma as E,Na as x,Nb as a,Ob as l,Ra as T,U as S,Wa as p,Xa as L,ba as b,ca as _,cb as i,cc as w,db as n,eb as C,ec as A,ib as P,kb as u,lb as h,mc as O,ob as B,xb as s,yb as g,zb as k}from"./chunk-6AUGAOY5.js";import"./chunk-EQDQRRRY.js";function te(d,ee){if(d&1){let e=P();i(0,"div",36)(1,"label",44),s(2),a(3,"translate"),n(),i(4,"div",38),C(5,"span",39),i(6,"input",45),M("ngModelChange",function(r){b(e);let c=h();return y(c.cardBgColorLight,r)||(c.cardBgColorLight=r),_(r)}),n(),i(7,"button",41),u("click",function(){b(e);let r=h();return _(r.updateCardBgColorLight())}),s(8),a(9,"translate"),n()()()}if(d&2){let e=h();t(2),g(l(3,6,"CARD_BG_COLOR_LIGHT")),t(3),L("background",e.cardBgColorLight),t(),D("ngModel",e.cardBgColorLight),t(),p("ngClass",e.getBorderBtnClass(e.cardBgColorLight)),t(),k(" ",l(9,8,"APPLY_BG_LIGHT")," ")}}function re(d,ee){if(d&1){let e=P();i(0,"div",36)(1,"label",46),s(2),a(3,"translate"),n(),i(4,"div",38),C(5,"span",39),i(6,"input",47),M("ngModelChange",function(r){b(e);let c=h();return y(c.cardBgColorDark,r)||(c.cardBgColorDark=r),_(r)}),n(),i(7,"button",41),u("click",function(){b(e);let r=h();return _(r.updateCardBgColorDark())}),s(8),a(9,"translate"),n()()()}if(d&2){let e=h();t(2),g(l(3,6,"CARD_BG_COLOR_DARK")),t(3),L("background",e.cardBgColorDark),t(),D("ngModel",e.cardBgColorDark),t(),p("ngClass",e.getBorderBtnClass(e.cardBgColorDark)),t(),k(" ",l(9,8,"APPLY_BG_DARK")," ")}}var I=(()=>{class d{constructor(e,o,r,c){this.dataService=e,this.translate=o,this.authService=r,this.settingsService=c,this.routes=G,this.isDarkMode=!1,this.DEFAULT_BORDER_COLOR="#ff9800",this.DEFAULT_CARD_BG_LIGHT="#f4f7fa",this.DEFAULT_CARD_BG_DARK="#232b32",this.borderColor=this.DEFAULT_BORDER_COLOR,this.cardBgColorLight=this.DEFAULT_CARD_BG_LIGHT,this.cardBgColorDark=this.DEFAULT_CARD_BG_DARK,this.userId=null,this.selectedList1=[{value:"Select"},{value:"California"},{value:"Tasmania"},{value:"Auckland"},{value:"Marlborough"}],this.selectedList2=[{value:"India"},{value:"London"},{value:"France"},{value:"USA"}];let m=this.authService.user;this.userId=m?m.id:null,this.borderColor=this.getUserSetting("borderColor",this.DEFAULT_BORDER_COLOR),this.cardBgColorLight=this.getUserSetting("cardBgColorLight",this.DEFAULT_CARD_BG_LIGHT),this.cardBgColorDark=this.getUserSetting("cardBgColorDark",this.DEFAULT_CARD_BG_DARK),this.selectedLang=localStorage.getItem("language")||"en",this.translate.use(this.selectedLang)}ngOnInit(){this.isDarkMode=document.body.classList.contains("dark-mode"),this.settingsService.getSettings().subscribe(e=>{e&&(e.borderColor||e.cardBgColorLight||e.cardBgColorDark)?(e.borderColor&&this.setUserSetting("borderColor",e.borderColor),e.cardBgColorLight&&this.setUserSetting("cardBgColorLight",e.cardBgColorLight),e.cardBgColorDark&&this.setUserSetting("cardBgColorDark",e.cardBgColorDark),this.borderColor=e.borderColor||this.DEFAULT_BORDER_COLOR,this.cardBgColorLight=e.cardBgColorLight||this.DEFAULT_CARD_BG_LIGHT,this.cardBgColorDark=e.cardBgColorDark||this.DEFAULT_CARD_BG_DARK):(this.borderColor=this.DEFAULT_BORDER_COLOR,this.cardBgColorLight=this.DEFAULT_CARD_BG_LIGHT,this.cardBgColorDark=this.DEFAULT_CARD_BG_DARK),this.applyTheme()})}toggleTheme(){this.isDarkMode=!this.isDarkMode,this.dataService.toggleDarkMode(),localStorage.setItem("darkMode",String(this.isDarkMode)),this.applyTheme()}setUserSetting(e,o){this.userId&&localStorage.setItem(`${e}_${this.userId}`,o)}getUserSetting(e,o){return this.userId&&localStorage.getItem(`${e}_${this.userId}`)||o}updateBorderColor(){this.setUserSetting("borderColor",this.borderColor),this.settingsService.updateSettings({borderColor:this.borderColor,cardBgColorLight:this.cardBgColorLight,cardBgColorDark:this.cardBgColorDark}).subscribe(()=>{this.applyTheme()})}updateCardBgColorLight(){this.setUserSetting("cardBgColorLight",this.cardBgColorLight),this.settingsService.updateSettings({borderColor:this.borderColor,cardBgColorLight:this.cardBgColorLight,cardBgColorDark:this.cardBgColorDark}).subscribe(()=>{this.applyTheme()})}updateCardBgColorDark(){this.setUserSetting("cardBgColorDark",this.cardBgColorDark),this.settingsService.updateSettings({borderColor:this.borderColor,cardBgColorLight:this.cardBgColorLight,cardBgColorDark:this.cardBgColorDark}).subscribe(()=>{this.applyTheme()})}getContrastYIQ(e){e=e.replace("#","");let o=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),c=parseInt(e.substr(4,2),16);return(o*299+r*587+c*114)/1e3>=128?"#000000":"#ffffff"}applyTheme(){if(this.isDarkMode){document.body.classList.add("dark-mode"),document.documentElement.classList.add("dark-mode"),document.body.style.setProperty("--user-card-bg",this.cardBgColorDark),document.documentElement.style.setProperty("--user-card-bg",this.cardBgColorDark);let e=localStorage.getItem("cardTextColorDark")||this.getContrastYIQ(this.cardBgColorDark);document.body.style.setProperty("--user-card-text-color",e),document.documentElement.style.setProperty("--user-card-text-color",e);let o=localStorage.getItem("cardBtnBorderColorDark")||(e==="#000000"?"#ffffff":"#000000");document.body.style.setProperty("--user-btn-border-color",o),document.documentElement.style.setProperty("--user-btn-border-color",o)}else{document.body.classList.remove("dark-mode"),document.documentElement.classList.remove("dark-mode"),document.body.style.setProperty("--user-card-bg",this.cardBgColorLight),document.documentElement.style.setProperty("--user-card-bg",this.cardBgColorLight);let e=localStorage.getItem("cardTextColorLight")||this.getContrastYIQ(this.cardBgColorLight);document.body.style.setProperty("--user-card-text-color",e),document.documentElement.style.setProperty("--user-card-text-color",e);let o=localStorage.getItem("cardBtnBorderColorLight")||(e==="#000000"?"#ffffff":"#000000");document.body.style.setProperty("--user-btn-border-color",o),document.documentElement.style.setProperty("--user-btn-border-color",o)}document.body.style.setProperty("--user-border-color",this.borderColor),document.documentElement.style.setProperty("--user-border-color",this.borderColor)}toggleLanguage(){this.selectedLang=this.selectedLang==="es"?"en":"es",this.translate.use(this.selectedLang),localStorage.setItem("language",this.selectedLang)}getBorderBtnClass(e){if(!e)return"";let o=e.replace("#","");if(o.length!==6)return"";let r=parseInt(o.substr(0,2),16),c=parseInt(o.substr(2,2),16),m=parseInt(o.substr(4,2),16);return(r*299+c*587+m*114)/1e3>=200?"light-border":""}resetColorsToDefault(){let e={borderColor:this.DEFAULT_BORDER_COLOR,cardBgColorLight:this.DEFAULT_CARD_BG_LIGHT,cardBgColorDark:this.DEFAULT_CARD_BG_DARK};this.setUserSetting("borderColor",e.borderColor),this.setUserSetting("cardBgColorLight",e.cardBgColorLight),this.setUserSetting("cardBgColorDark",e.cardBgColorDark),this.settingsService.updateSettings(e).subscribe(()=>{this.borderColor=e.borderColor,this.cardBgColorLight=e.cardBgColorLight,this.cardBgColorDark=e.cardBgColorDark,this.applyTheme()})}static{this.\u0275fac=function(o){return new(o||d)(f(V),f(F),f(U),f(X))}}static{this.\u0275cmp=E({type:d,selectors:[["app-general-settings"]],decls:96,vars:69,consts:[[1,"page-wrapper"],[1,"content","container-fluid"],[1,"page-header"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"feather","icon-chevron-right"],[1,"breadcrumb-item","active"],[1,"settings-menu-links"],[1,"nav","nav-tabs","menu-tabs"],[1,"nav-item","active"],[1,"nav-link",3,"routerLink"],[1,"col-md-6"],[1,"card","mb-4","border-colored"],[1,"card-header"],[1,"card-title"],[1,"card-body","pt-0"],[1,"form-group","mt-3"],[1,"status-toggle","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"d-flex","align-items-center","gap-2"],["src","assets/flags/us.png","width","24","height","16",3,"alt","title"],["type","checkbox","id","toggle-lang",1,"check",3,"change","checked"],["for","toggle-lang",1,"checktoggle"],["src","assets/flags/mx.png","width","24","height","16",3,"alt","title"],[1,"me-2",2,"font-size","0.9rem"],["type","checkbox","id","toggle-dark",1,"check",3,"change","checked"],["for","toggle-dark",1,"checktoggle"],[1,"ms-2",2,"font-size","0.9rem"],[1,"card","border-colored"],[1,"card-title","mb-1"],[1,"text-muted","mb-0",2,"font-size","0.9rem"],[1,"card-body"],[1,"color-settings-group"],[1,"color-setting-block"],["for","borderColor",1,"form-label","fw-semibold","mb-2"],[1,"color-setting-row"],[1,"color-preview-circle"],["type","color","id","borderColor","name","borderColor",1,"form-control","form-control-color","color-input-circle",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-color-action","ms-2",3,"click","ngClass"],["class","color-setting-block",4,"ngIf"],["type","button",1,"btn","btn-outline-danger","ms-2",3,"click"],["for","cardBgColorLight",1,"form-label","fw-semibold","mb-2"],["type","color","id","cardBgColorLight","name","cardBgColorLight",1,"form-control","form-control-color","color-input-circle",3,"ngModelChange","ngModel"],["for","cardBgColorDark",1,"form-label","fw-semibold","mb-2"],["type","color","id","cardBgColorDark","name","cardBgColorDark",1,"form-control","form-control-color","color-input-circle",3,"ngModelChange","ngModel"]],template:function(o,r){o&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),s(8),a(9,"translate"),n()(),i(10,"li",6),C(11,"i",8),n(),i(12,"li",9),s(13),a(14,"translate"),n()()()()(),i(15,"div",10)(16,"ul",11)(17,"li",12)(18,"a",13),s(19),a(20,"translate"),n()()()(),i(21,"div",3)(22,"div",14)(23,"div",15)(24,"div",16)(25,"h5",17),s(26),a(27,"translate"),n()(),i(28,"div",18)(29,"div",19)(30,"div",20)(31,"p",21),s(32),a(33,"translate"),a(34,"translate"),n(),i(35,"div",22),C(36,"img",23),a(37,"translate"),a(38,"translate"),i(39,"input",24),u("change",function(){return r.toggleLanguage()}),n(),i(40,"label",25),s(41),a(42,"translate"),n(),C(43,"img",26),a(44,"translate"),a(45,"translate"),n()()()()(),i(46,"div",15)(47,"div",16)(48,"h5",17),s(49),a(50,"translate"),n()(),i(51,"div",18)(52,"form")(53,"div",19)(54,"div",20)(55,"p",21),s(56),a(57,"translate"),n(),i(58,"div",22)(59,"span",27),s(60),a(61,"translate"),n(),i(62,"input",28),u("change",function(){return r.toggleTheme()}),n(),i(63,"label",29),s(64),a(65,"translate"),n(),i(66,"span",30),s(67),a(68,"translate"),n()()()()()()(),i(69,"div",31)(70,"div",16)(71,"h5",32),s(72),a(73,"translate"),n(),i(74,"p",33),s(75),a(76,"translate"),n()(),i(77,"div",34)(78,"form")(79,"div",35)(80,"div",36)(81,"label",37),s(82),a(83,"translate"),n(),i(84,"div",38),C(85,"span",39),i(86,"input",40),M("ngModelChange",function(m){return y(r.borderColor,m)||(r.borderColor=m),m}),n(),i(87,"button",41),u("click",function(){return r.updateBorderColor()}),s(88),a(89,"translate"),n()()(),T(90,te,10,10,"div",42)(91,re,10,10,"div",42),i(92,"div",38)(93,"button",43),u("click",function(){return r.resetColorsToDefault()}),s(94," Resetear colores por defecto "),n()()()()()()(),C(95,"div",14),n()()()),o&2&&(t(7),p("routerLink",r.routes.adminDashboard),t(),k("",l(9,29,"DASHBOARD")," >"),t(5),g(l(14,31,"SETTINGS")),t(5),p("routerLink",r.routes.settings),t(),g(l(20,33,"GENERAL_SETTINGS")),t(7),g(l(27,35,"SELECT_LANGUAGE")),t(6),g(r.selectedLang==="es"?l(33,37,"SPANISH"):l(34,39,"ENGLISH")),t(4),B("alt",l(37,41,"ENGLISH")),B("title",l(38,43,"ENGLISH")),t(3),p("checked",r.selectedLang==="es"),t(2),g(l(42,45,"SWITCH")),t(2),B("alt",l(44,47,"SPANISH")),B("title",l(45,49,"SPANISH")),t(6),g(l(50,51,"DARK_MODE")),t(7),g(l(57,53,"ACTIVATE_DARK_MODE")),t(4),g(l(61,55,"OFF")),t(2),p("checked",r.isDarkMode),t(2),g(l(65,57,"SWITCH")),t(3),g(l(68,59,"ON")),t(5),g(l(73,61,"OUTLINE_COLOR")),t(3),g(l(76,63,"OUTLINE_COLOR_NOTE")),t(7),g(l(83,65,"SELECT_COLOR")),t(3),L("background",r.borderColor),t(),D("ngModel",r.borderColor),t(),p("ngClass",r.getBorderBtnClass(r.borderColor)),t(),k(" ",l(89,67,"APPLY_COLOR")," "),t(2),p("ngIf",!r.isDarkMode),t(),p("ngIf",r.isDarkMode))},dependencies:[O,w,A,Q,q,W,K,j,Y,z,v,R,H,N],styles:['@charset "UTF-8";.color-settings-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2.5rem}.color-setting-block[_ngcontent-%COMP%]{background:#f4f7fa;border-radius:18px;padding:1.5rem 1.2rem 1.2rem;box-shadow:0 4px 16px #0000000f;margin-bottom:.8rem;border:2px solid var(--user-border-color, #e0e0e0);transition:background .3s,border .3s}.color-setting-block[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .color-setting-block[_ngcontent-%COMP%]   .block-title[_ngcontent-%COMP%], .color-setting-block[_ngcontent-%COMP%]   .block-desc[_ngcontent-%COMP%], .color-setting-block[_ngcontent-%COMP%], .color-setting-block[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:var(--user-card-text-color, #222)!important;text-shadow:0 1px 4px rgba(0,0,0,.18)}.color-setting-block[_ngcontent-%COMP%]   .block-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.13rem;margin-bottom:.5rem;letter-spacing:.01em}.color-setting-block[_ngcontent-%COMP%]   .block-desc[_ngcontent-%COMP%]{font-size:.98rem;margin-bottom:1.1rem}.color-setting-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;flex-wrap:wrap}.color-preview-circle[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:50%;border:2.5px solid #e0e0e0;box-shadow:0 2px 8px #0000001a;margin-right:.7rem;transition:border .2s,box-shadow .2s;background:#fff}.color-input-circle[_ngcontent-%COMP%]{width:54px!important;height:54px!important;border-radius:50%!important;border:2.5px solid #bdbdbd!important;box-shadow:0 2px 8px #00000021!important;padding:0!important;background:#fff!important;transition:border .2s,box-shadow .2s;cursor:pointer}.color-input-circle[_ngcontent-%COMP%]:focus, .color-input-circle[_ngcontent-%COMP%]:active{border:2.5px solid var(--user-border-color, #3b82f6)!important;box-shadow:0 0 0 4px #3b82f621!important}.btn-color-action[_ngcontent-%COMP%]{min-width:150px;font-weight:700;border-radius:10px;box-shadow:0 2px 8px #0000001a;transition:background .2s,color .2s,border .2s;font-size:1.08rem;padding:.6rem 1.5rem;color:var(--user-btn-text-color, #fff)!important;background:var(--user-btn-bg-color, #2563eb)!important;border:2px solid var(--user-border-color, #2563eb)!important;display:inline-block;line-height:1.2;vertical-align:middle}.btn-color-action[_ngcontent-%COMP%]:hover, .btn-color-action[_ngcontent-%COMP%]:focus{filter:brightness(.92);box-shadow:0 4px 12px #3b82f621}.color-setting-block[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .color-setting-block[_ngcontent-%COMP%]   .block-title[_ngcontent-%COMP%]{margin-bottom:.3rem}body.dark-mode[_ngcontent-%COMP%]   .color-setting-block[_ngcontent-%COMP%]{background:#232b32;box-shadow:0 4px 16px #00000038;border:2px solid var(--user-border-color, #444)}body.dark-mode[_ngcontent-%COMP%]   .color-setting-block[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .color-setting-block[_ngcontent-%COMP%]   .block-title[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .color-setting-block[_ngcontent-%COMP%]   .block-desc[_ngcontent-%COMP%]{color:#fff!important;text-shadow:0 1px 6px rgba(0,0,0,.25)}body.dark-mode[_ngcontent-%COMP%]   .color-preview-circle[_ngcontent-%COMP%]{border:2.5px solid #444;background:#23221c;box-shadow:0 2px 8px #0000002e}body.dark-mode[_ngcontent-%COMP%]   .color-input-circle[_ngcontent-%COMP%]{background:#23221c!important;border:2.5px solid #888!important}body.dark-mode[_ngcontent-%COMP%]   .color-input-circle[_ngcontent-%COMP%]:focus, body.dark-mode[_ngcontent-%COMP%]   .color-input-circle[_ngcontent-%COMP%]:active{border:2.5px solid var(--user-border-color, #3b82f6)!important;box-shadow:0 0 0 4px #3b82f638!important}@media (max-width: 600px){.color-setting-block[_ngcontent-%COMP%]{padding:1rem .5rem .8rem}.color-setting-row[_ngcontent-%COMP%]{gap:.7rem}.color-preview-circle[_ngcontent-%COMP%], .color-input-circle[_ngcontent-%COMP%]{width:36px!important;height:36px!important}}']})}}return d})();var oe=[{path:"",component:I}],$=(()=>{class d{static{this.\u0275fac=function(o){return new(o||d)}}static{this.\u0275mod=x({type:d})}static{this.\u0275inj=S({imports:[v.forChild(oe),v]})}}return d})();var Le=(()=>{class d{static{this.\u0275fac=function(o){return new(o||d)}}static{this.\u0275mod=x({type:d})}static{this.\u0275inj=S({imports:[O,$,J,I]})}}return d})();export{Le as GeneralSettingsModule};
