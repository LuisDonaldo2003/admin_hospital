import{e as St}from"./chunk-3RSWNALN.js";import{a as Pt,b as xt}from"./chunk-23WLUJ3U.js";import{c as ht,n as vt,p as Ot,q as $}from"./chunk-MHGS5KHZ.js";import"./chunk-6SU75NRV.js";import{a as _t}from"./chunk-MV3LUB43.js";import{a as L}from"./chunk-VOEI7TUP.js";import{c as V,g as F,h as K,j as Q,l as U,m as Y,s as bt,t as Ct,u as Mt,v as Z,y as I}from"./chunk-K6AIGGO7.js";import"./chunk-7IQVTAUF.js";import{b as R,c as B,d as D}from"./chunk-DSFCBPHH.js";import"./chunk-KOTFE7EF.js";import{Ab as q,Ac as gt,Bc as ut,Ca as i,Cb as st,Cc as x,Eb as b,Fb as C,Gb as M,Ha as P,Ib as lt,Jb as E,Ma as w,Na as X,Nb as s,Ob as l,Ra as v,T as dt,U as H,W as tt,Wa as f,Ya as J,ba as S,ca as y,cb as r,cc as ct,db as o,dc as T,eb as h,ec as A,fb as et,gb as nt,ib as G,kb as O,lb as u,mc as k,pc as N,qc as mt,xb as d,yb as g,yc as pt,zb as p,zc as ft}from"./chunk-6AUGAOY5.js";import{a as ot,b as rt}from"./chunk-EQDQRRRY.js";var yt=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275cmp=w({type:a,selectors:[["app-staff"]],decls:1,vars:0,template:function(n,e){n&1&&h(0,"router-outlet")},dependencies:[x,ft],encapsulation:2})}}return a})();var j=(()=>{class a{constructor(t,n){this.http=t,this.authService=n}listUsers(){let t=new N({Authorization:"Bearer "+this.authService.token}),n=L+"/staffs";return this.http.get(n,{headers:t})}listConfig(){let t=new N({Authorization:"Bearer "+this.authService.token}),n=L+"/staffs/config";return this.http.get(n,{headers:t})}registerUser(t){let n=new N({Authorization:"Bearer "+this.authService.token}),e=L+"/staffs";return this.http.post(e,t,{headers:n})}showUser(t){let n=new N({Authorization:"Bearer "+this.authService.token}),e=L+"/staffs/"+t;return this.http.get(e,{headers:n})}updateUser(t,n){let e=new N({Authorization:"Bearer "+this.authService.token}),c=L+"/staffs/"+t;return this.http.post(c,n,{headers:e})}deleteUser(t){let n=new N({Authorization:"Bearer "+this.authService.token}),e=L+"/staffs/"+t;return this.http.delete(e,{headers:n})}static{this.\u0275fac=function(n){return new(n||a)(tt(mt),tt(_t))}}static{this.\u0275prov=dt({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var z=a=>({"is-invalid":a});function Rt(a,_){if(a&1&&(r(0,"option",28),d(1),o()),a&2){let t=_.$implicit;f("value",t.id),i(),g(t.name)}}function Bt(a,_){if(a&1&&(r(0,"div",29)(1,"div",30)(2,"strong"),d(3),s(4,"translate"),o(),d(5),h(6,"button",31),o()()),a&2){let t=u();i(3),p("",l(4,2,"WARNING"),":"),i(2),p(" ",t.text_validation," ")}}function Dt(a,_){if(a&1&&(r(0,"div",29)(1,"div",32)(2,"strong"),d(3),s(4,"translate"),o(),d(5),h(6,"button",31),o()()),a&2){let t=u();i(3),p("",l(4,2,"SUCCESS"),":"),i(2),p(" ",t.text_success," ")}}var It=(()=>{class a{constructor(t,n,e){this.staffservice=t,this.router=n,this.translate=e,this.name="",this.surname="",this.email="",this.password="",this.password_confirmation="",this.roles=[],this.text_success="",this.text_validation="",this.submitted=!1}ngOnInit(){this.staffservice.listConfig().subscribe(t=>{this.roles=t.roles??[]}),localStorage.getItem("darkMode")==="true"&&document.body.classList.add("dark-mode")}save(){this.submitted=!0,this.text_validation="",this.text_success="";let t=[];if(this.name.trim()||t.push(this.translate.instant("NAME")),this.surname.trim()||t.push(this.translate.instant("SURNAME")),this.email.trim()||t.push(this.translate.instant("EMAIL")),this.password.trim()||t.push(this.translate.instant("PASSWORD")),this.password_confirmation.trim()||t.push(this.translate.instant("CONFIRM_PASSWORD")),this.selectedValue||t.push(this.translate.instant("ROLE")),t.length>0){let e=t.length>1,c=t.join(", "),m=this.translate.instant("FIELDS_MISSING",{plural:e?"n":"",sPlural:e?"s":"",campos:c});this.text_validation=m;return}if(this.password!==this.password_confirmation){this.text_validation=this.translate.instant("PASSWORD_MISMATCH");return}let n=new FormData;n.append("name",this.name),n.append("surname",this.surname),n.append("email",this.email),n.append("password",this.password),n.append("password_confirmation",this.password_confirmation),n.append("role_id",this.selectedValue),this.staffservice.registerUser(n).subscribe(e=>{e.message===403?this.text_validation=e.message_text:(this.text_success=this.translate.instant("USER_REGISTERED_SUCCESS"),setTimeout(()=>{this.router.navigate(["/staffs/list-staff"])},1e3))})}static{this.\u0275fac=function(n){return new(n||a)(P(j),P(gt),P(R))}}static{this.\u0275cmp=w({type:a,selectors:[["app-add-staff-n"]],decls:62,vars:60,consts:[[1,"page-wrapper"],[1,"content","add-staff-form"],[1,"page-header","mb-4"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb","bg-light","p-2","rounded"],[1,"breadcrumb-item"],["href","#"],[1,"breadcrumb-item","active"],[1,"row","justify-content-center"],[1,"col-lg-10","col-xl-8"],[1,"card","card-form","shadow","border-0"],[1,"card-body","px-5","py-4"],[1,"text-center","mb-4","fw-bold"],[1,"row","g-3"],[1,"col-md-6"],[1,"form-label"],["type","text","name","name","required","",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["type","text","name","surname","required","",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["type","email","name","email","required","",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["name","role","required","",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["type","password","name","password","required","",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["type","password","name","password_confirmation","required","",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["class","mt-4",4,"ngIf"],[1,"text-end","mt-4"],["type","button",1,"btn","btn-primary","px-4",3,"click"],[3,"value"],[1,"mt-4"],[1,"alert","alert-warning","alert-dismissible","fade","show"],["type","button","data-bs-dismiss","alert",1,"btn-close"],[1,"alert","alert-success","alert-dismissible","fade","show"]],template:function(n,e){n&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ol",5)(6,"li",6)(7,"a",7),d(8),s(9,"translate"),o()(),r(10,"li",8),d(11),s(12,"translate"),o()()()()(),r(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",12)(17,"h3",13),d(18),s(19,"translate"),o(),r(20,"form")(21,"div",14)(22,"div",15)(23,"label",16),d(24),s(25,"translate"),o(),r(26,"input",17),M("ngModelChange",function(m){return C(e.name,m)||(e.name=m),m}),o()(),r(27,"div",15)(28,"label",16),d(29),s(30,"translate"),o(),r(31,"input",18),M("ngModelChange",function(m){return C(e.surname,m)||(e.surname=m),m}),o()(),r(32,"div",15)(33,"label",16),d(34),s(35,"translate"),o(),r(36,"input",19),M("ngModelChange",function(m){return C(e.email,m)||(e.email=m),m}),o()(),r(37,"div",15)(38,"label",16),d(39),s(40,"translate"),o(),r(41,"select",20),M("ngModelChange",function(m){return C(e.selectedValue,m)||(e.selectedValue=m),m}),r(42,"option",21),d(43),s(44,"translate"),o(),v(45,Rt,2,2,"option",22),o()(),r(46,"div",15)(47,"label",16),d(48),s(49,"translate"),o(),r(50,"input",23),M("ngModelChange",function(m){return C(e.password,m)||(e.password=m),m}),o()(),r(51,"div",15)(52,"label",16),d(53),s(54,"translate"),o(),r(55,"input",24),M("ngModelChange",function(m){return C(e.password_confirmation,m)||(e.password_confirmation=m),m}),o()()(),v(56,Bt,7,4,"div",25)(57,Dt,7,4,"div",25),r(58,"div",26)(59,"button",27),O("click",function(){return e.save()}),d(60),s(61,"translate"),o()()()()()()()()()),n&2&&(i(8),p("",l(9,26,"USERS")," >"),i(3),g(l(12,28,"ADD_STAFF")),i(7),g(l(19,30,"USER_REGISTRATION")),i(6),p("",l(25,32,"FIRST_NAME")," *"),i(2),b("ngModel",e.name),f("ngClass",E(48,z,e.submitted&&!e.name.trim())),i(3),p("",l(30,34,"SURNAME")," *"),i(2),b("ngModel",e.surname),f("ngClass",E(50,z,e.submitted&&!e.surname.trim())),i(3),p("",l(35,36,"EMAIL")," *"),i(2),b("ngModel",e.email),f("ngClass",E(52,z,e.submitted&&!e.email.trim())),i(3),p("",l(40,38,"ROLE_SELECT")," *"),i(2),b("ngModel",e.selectedValue),f("ngClass",E(54,z,e.submitted&&!e.selectedValue)),i(2),g(l(44,40,"SELECT_ROLE_PLACEHOLDER")),i(2),f("ngForOf",e.roles),i(3),p("",l(49,42,"PASSWORD")," *"),i(2),b("ngModel",e.password),f("ngClass",E(56,z,e.submitted&&!e.password.trim())),i(3),p("",l(54,44,"CONFIRM_PASSWORD")," *"),i(2),b("ngModel",e.password_confirmation),f("ngClass",E(58,z,e.submitted&&!e.password_confirmation.trim())),i(),f("ngIf",e.text_validation),i(),f("ngIf",e.text_success),i(3),g(l(61,46,"SAVE")))},dependencies:[k,ct,T,A,I,Y,Ct,Mt,V,bt,F,K,Z,U,Q,$,vt,D,B],styles:[`.add-staff-form .card-form{border-radius:1rem;padding:1.5rem;box-sizing:border-box;border:4px solid var(--user-border-color, #000)!important;background-color:var(--user-card-bg, #fff)!important;color:var(--user-card-text-color, #000);transition:background-color .3s ease,color .3s ease,border-color .3s ease;box-shadow:0 4px 12px #0000000d}.add-staff-form .form-label{font-weight:600;color:var(--user-card-text-color, #000)!important}.add-staff-form .form-control,.add-staff-form select.form-control{border-radius:.5rem;padding:.6rem 1rem;border:1px solid #ccc;background-color:#fff;color:#000}.add-staff-form .form-control:focus,.add-staff-form select.form-control:focus{border-color:var(--user-border-color, #0d6efd);box-shadow:0 0 0 3px #0d6efd40;outline:none}.add-staff-form .form-control.is-invalid,.add-staff-form select.form-control.is-invalid{border-color:#dc3545;background-color:#ffe6e6}.add-staff-form .btn{font-weight:500;padding:.5rem 1.5rem}.add-staff-form .alert{border-radius:.375rem;font-size:.875rem}body.dark-mode .add-staff-form .card-form{background-color:var(--user-card-bg, #23221c)!important;color:var(--user-card-text-color, #fff);border:4px solid var(--user-border-color, #ff4f4f)!important;box-shadow:0 4px 12px #0009}body.dark-mode .add-staff-form .card-form h3,body.dark-mode .add-staff-form .card-form .form-label{color:var(--user-card-text-color, #fff)!important}body.dark-mode .add-staff-form .form-control,body.dark-mode .add-staff-form select.form-control{background-color:#2a2a3a;color:#f1f1f1;border:1px solid #444}body.dark-mode .add-staff-form .form-control::placeholder{color:#aaa}body.dark-mode .add-staff-form .form-control.is-invalid,body.dark-mode .add-staff-form select.form-control.is-invalid{border-color:#f87171;background-color:#442626}body.dark-mode .add-staff-form .btn-primary{background-color:#3b82f6;border-color:#3b82f6}body.dark-mode .add-staff-form .btn-primary:hover{background-color:#2563eb}body.dark-mode .add-staff-form .alert-warning{background-color:#5c3d03;color:#f6e58d}body.dark-mode .add-staff-form .alert-success{background-color:#024d36;color:#c7f9cc}.add-staff-form ::selection{background-color:#3b82f6;color:#fff}
`],encapsulation:2})}}return a})();var Vt=a=>["/staffs/list-staff/edit-staff/",a];function Ft(a,_){if(a&1){let t=G();et(0),r(1,"div",42)(2,"button",43),h(3,"i",44),d(4),s(5,"translate"),o(),r(6,"div",45)(7,"a",46),h(8,"i",47),d(9),s(10,"translate"),o(),r(11,"a",48),O("click",function(){S(t);let e=u().$implicit,c=u();return y(c.selectUser(e))}),h(12,"i",49),d(13),s(14,"translate"),o()()(),nt()}if(a&2){let t=u().$implicit;i(4),p(" ",l(5,4,"OPTIONS")," "),i(3),f("routerLink",E(10,Vt,t.id)),i(2),p(" ",l(10,6,"EDIT")," "),i(4),p(" ",l(14,8,"DELETE")," ")}}function Ut(a,_){if(a&1&&(r(0,"tr")(1,"td"),d(2),o(),r(3,"td"),d(4),o(),r(5,"td"),d(6),o(),r(7,"td",25),v(8,Ft,15,12,"ng-container",41),o()()),a&2){let t=_.$implicit;i(2),q("",t.name," ",t.surname||"",""),i(2),g(t.email),i(2),g(t.role==null?null:t.role.name),i(2),f("ngIf",t.id!==1)}}function Wt(a,_){if(a&1){let t=G();et(0),r(1,"li",30)(2,"a",31),O("click",function(){let e=S(t).$implicit,c=u();return y(c.moveToPage(e))}),d(3),o()(),nt()}if(a&2){let t=_.$implicit,n=u();i(),J("active",t===n.currentPage),i(2),g(t)}}function jt(a,_){if(a&1&&(r(0,"h5",50),d(1),s(2,"translate"),r(3,"strong"),d(4),o(),d(5,"? "),o()),a&2){let t=u();i(),p(" ",l(2,3,"DELETE_CONFIRMATION2")," "),i(3),q("",t.staff_selected.name," ",t.staff_selected.surname,"")}}var Nt=(()=>{class a{constructor(t,n){this.staffService=t,this.translate=n,this.usersList=[],this.searchDataValue="",this.pageSize=10,this.totalData=0,this.skip=0,this.limit=this.pageSize,this.pageIndex=0,this.serialNumberArray=[],this.currentPage=1,this.pageNumberArray=[],this.pageSelection=[],this.totalPages=0,this.role_generals=[],this.selectedLang=localStorage.getItem("language")||"en",this.translate.use(this.selectedLang)}ngOnInit(){this.getTableData()}toggleLanguage(){this.selectedLang=this.selectedLang==="es"?"en":"es",this.translate.use(this.selectedLang),localStorage.setItem("language",this.selectedLang)}getTableData(){this.usersList=[],this.serialNumberArray=[],this.staffService.listUsers().subscribe(t=>{this.totalData=t.users.length,this.role_generals=t.users.sort((n,e)=>n.name.localeCompare(e.name)),this.getTableDataGeneral()})}getTableDataGeneral(){this.usersList=[],this.serialNumberArray=[],this.role_generals.map((t,n)=>{let e=n+1;n>=this.skip&&e<=this.limit&&(this.usersList.push(t),this.serialNumberArray.push(e))}),this.dataSource=new xt(this.usersList),this.calculateTotalPages(this.totalData,this.pageSize)}selectUser(t){this.staff_selected=t}deleteUser(){this.staffService.deleteUser(this.staff_selected.id).subscribe(()=>{let t=this.usersList.findIndex(n=>n.id===this.staff_selected.id);t!==-1&&(this.usersList.splice(t,1),this.staff_selected=null)})}searchData(t){this.dataSource.filter=t.trim().toLowerCase(),this.usersList=this.dataSource.filteredData}sortData(t){let n=this.usersList.slice();!t.active||t.direction===""?this.usersList=n:this.usersList=n.sort((e,c)=>{let m=e[t.active],At=c[t.active];return(m<At?-1:1)*(t.direction==="asc"?1:-1)})}getMoreData(t){t==="next"?this.currentPage++:t==="previous"&&this.currentPage--,this.pageIndex=this.currentPage-1,this.skip=this.pageIndex*this.pageSize,this.limit=this.skip+this.pageSize,this.getTableDataGeneral()}moveToPage(t){this.currentPage=t,this.pageIndex=t-1,this.skip=this.pageSelection[t-1].skip,this.limit=this.pageSelection[t-1].limit,this.getTableDataGeneral()}PageSize(){this.pageSelection=[],this.limit=this.pageSize,this.skip=0,this.currentPage=1,this.searchDataValue="",this.getTableDataGeneral()}calculateTotalPages(t,n){this.pageNumberArray=[],this.totalPages=Math.ceil(t/n);for(let e=1;e<=this.totalPages;e++){let c=n*e,m=c-n;this.pageNumberArray.push(e),this.pageSelection.push({skip:m,limit:c})}}static{this.\u0275fac=function(n){return new(n||a)(P(j),P(R))}}static{this.\u0275cmp=w({type:a,selectors:[["app-list-staff-n"]],decls:80,vars:55,consts:[[1,"page-wrapper"],[1,"content","list-staff"],[1,"page-header","mb-4"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb","bg-light","p-2","rounded"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"card","card-list","shadow","border-0"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center","flex-wrap","mb-3","header-bar"],[1,"mb-0","fw-semibold"],[1,"d-flex","align-items-center","gap-2","flex-wrap"],[1,"input-group","search-input"],["type","text","placeholder","Buscar...",1,"form-control",3,"ngModelChange","ngModel"],[1,"input-group-text"],[1,"fa","fa-search"],["routerLink","/staffs/add-staff",1,"btn","btn-options","d-flex","align-items-center","gap-1"],[1,"fa","fa-plus"],[1,"d-none","d-sm-inline"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-refresh"],[1,"table-responsive"],["matSort","",1,"table","table-striped","table-hover","align-middle","text-nowrap",3,"matSortChange"],[1,"table-light","text-center"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","mt-3","flex-wrap"],[1,"pagination-info","small"],[1,"pagination","mb-0"],[1,"page-item"],["href","javascript:void(0);",1,"page-link",3,"click"],["id","deleteModal","tabindex","-1","aria-labelledby","deleteModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-body","text-center","p-4"],["src","assets/img/sent.png","alt","","width","50","height","46"],["class","mt-3",4,"ngIf"],[1,"mt-4","d-flex","justify-content-center","gap-3"],["data-bs-dismiss","modal",1,"btn","btn-light"],["data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],[4,"ngIf"],[1,"dropdown","d-flex","justify-content-center","align-items-center"],["data-bs-toggle","dropdown",1,"btn","btn-options","dropdown-toggle"],[1,"fa","fa-cogs","me-1"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"routerLink"],[1,"fa","fa-pen","me-2"],["href","javascript:void(0);","data-bs-toggle","modal","data-bs-target","#deleteModal",1,"dropdown-item","text-danger",3,"click"],[1,"fa","fa-trash","me-2"],[1,"mt-3"]],template:function(n,e){n&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ol",5)(6,"li",6),d(7),s(8,"translate"),o(),r(9,"li",7),d(10),s(11,"translate"),o()()()()(),r(12,"div",3)(13,"div",4)(14,"div",8)(15,"div",9)(16,"div",10)(17,"h4",11),d(18),s(19,"translate"),o(),r(20,"div",12)(21,"div",13)(22,"input",14),M("ngModelChange",function(m){return C(e.searchDataValue,m)||(e.searchDataValue=m),m}),O("ngModelChange",function(){return e.searchData(e.searchDataValue)}),o(),r(23,"span",15),h(24,"i",16),o()(),r(25,"a",17),h(26,"i",18),r(27,"span",19),d(28),s(29,"translate"),o()(),r(30,"button",20),O("click",function(){return e.PageSize()}),h(31,"i",21),o()()(),r(32,"div",22)(33,"table",23),O("matSortChange",function(m){return e.sortData(m)}),r(34,"thead",24)(35,"tr")(36,"th"),d(37),s(38,"translate"),o(),r(39,"th"),d(40),s(41,"translate"),o(),r(42,"th"),d(43),s(44,"translate"),o(),r(45,"th",25),d(46),s(47,"translate"),o()()(),r(48,"tbody"),v(49,Ut,9,5,"tr",26),o()()(),r(50,"div",27)(51,"div",28),d(52),s(53,"translate"),s(54,"translate"),s(55,"translate"),o(),r(56,"nav")(57,"ul",29)(58,"li",30)(59,"a",31),O("click",function(){return e.getMoreData("previous")}),d(60),s(61,"translate"),o()(),v(62,Wt,4,3,"ng-container",26),r(63,"li",30)(64,"a",31),O("click",function(){return e.getMoreData("next")}),d(65),s(66,"translate"),o()()()()()()()()()()(),r(67,"div",32)(68,"div",33)(69,"div",34)(70,"div",35),h(71,"img",36),v(72,jt,6,5,"h5",37),r(73,"div",38)(74,"button",39),d(75),s(76,"translate"),o(),r(77,"button",40),O("click",function(){return e.deleteUser()}),d(78),s(79,"translate"),o()()()()()()),n&2&&(i(7),p("",l(8,25,"USERS")," >"),i(3),g(l(11,27,"USER_LIST")),i(8),g(l(19,29,"LISTA_USUARIOS")),i(4),b("ngModel",e.searchDataValue),i(6),g(l(29,31,"NEW")),i(9),g(l(38,33,"COMPLETE_NAME")),i(3),g(l(41,35,"EMAIL")),i(3),g(l(44,37,"ROLE")),i(3),g(l(47,39,"ACTIONS")),i(3),f("ngForOf",e.usersList),i(3),st(" ",l(53,41,"SHOWING")," ",e.serialNumberArray[0]," ",l(54,43,"TO")," ",e.totalData," ",l(55,45,"RECORDS")," "),i(6),J("disabled",e.currentPage===1),i(2),g(l(61,47,"PREVIOUS")),i(2),f("ngForOf",e.pageNumberArray),i(),J("disabled",e.currentPage===e.pageNumberArray[e.pageNumberArray.length-1]),i(2),g(l(66,49,"NEXT")),i(7),f("ngIf",e.staff_selected),i(3),g(l(76,51,"CANCEL")),i(3),g(l(79,53,"DELETE")))},dependencies:[k,T,A,I,V,F,U,x,ut,Pt,D,B],styles:[".card.card-list[_ngcontent-%COMP%]{border-radius:1rem;padding:1.5rem;border:4px solid var(--user-border-color, #000)!important;background-color:var(--user-card-bg, #fff)!important;color:var(--user-card-text-color, #000)!important;position:relative;z-index:1;transition:background-color .3s,color .3s,border-color .3s}.card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{border-radius:1rem;background-color:transparent!important;color:var(--user-card-text-color, #000)!important}.card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]{color:var(--user-card-text-color, #000)!important}.card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0;width:100%;background-color:#fff!important;border:1px solid #ccc;border-radius:12px}.card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:.75rem;text-align:center;vertical-align:middle;color:var(--user-card-text-color, #000)!important}.card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;color:var(--user-card-text-color, #000)!important}.card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-top-left-radius:12px}.card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-top-right-radius:12px}.card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:12px}.card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:12px}.card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2), .card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){max-width:300px;white-space:normal;word-break:break-word}.card.card-list[_ngcontent-%COMP%]   .btn-options[_ngcontent-%COMP%]{background-color:#3b82f6;border:none;padding:6px 14px;font-weight:500;font-size:14px;color:#fff;border-radius:8px;transition:all .2s ease-in-out;display:inline-flex;align-items:center}.card.card-list[_ngcontent-%COMP%]   .btn-options[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:6px}.card.card-list[_ngcontent-%COMP%]   .btn-options[_ngcontent-%COMP%]:hover{background-color:#2563eb;box-shadow:0 4px 12px #3b82f64d}body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]{background-color:var(--user-card-bg, #23221c)!important;border-color:var(--user-border-color, #ff4f4f)!important;color:var(--user-card-text-color, #fff)!important}body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]{color:var(--user-card-text-color, #fff)!important}body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{background-color:#23221c!important;border:1px solid #444;border-radius:12px}body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #555;color:var(--user-card-text-color, #fff)!important;text-align:center;vertical-align:middle}body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#23221c}body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-top-left-radius:12px}body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-top-right-radius:12px}body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:12px}body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:12px}body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2), body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){max-width:300px;white-space:normal;word-break:break-word}body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   .btn-options[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   .btn-options[_ngcontent-%COMP%]:hover{background-color:#2563eb;box-shadow:0 4px 12px #3b82f64d}body.dark-mode[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#3b82f6!important;border-color:#3b82f6!important;color:#fff!important}body.dark-mode[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#2563eb!important;border-color:#2563eb!important}"]})}}return a})();var zt=()=>({standalone:!0});function Gt(a,_){if(a&1&&(r(0,"mat-option",27),d(1),o()),a&2){let t=_.$implicit;f("value",t.id),i(),p(" ",t.name," ")}}function qt(a,_){if(a&1&&(r(0,"div",30)(1,"strong"),d(2),s(3,"translate"),o(),d(4),o()),a&2){let t=u(3);i(2),p("",l(3,2,"SUCCESS"),":"),i(2),p(" ",t.text_success," ")}}function Ht(a,_){if(a&1&&(r(0,"div",31)(1,"strong"),d(2),s(3,"translate"),o(),d(4),o()),a&2){let t=u(3);i(2),p("",l(3,2,"WARNING"),":"),i(2),p(" ",t.text_validation," ")}}function Xt(a,_){if(a&1&&(r(0,"div",14),v(1,qt,5,4,"div",28)(2,Ht,5,4,"div",29),o()),a&2){let t=u(2);i(),f("ngIf",t.text_success),i(),f("ngIf",t.text_validation)}}function Jt(a,_){if(a&1){let t=G();r(0,"div",12)(1,"form")(2,"div",13)(3,"div",14)(4,"h4",15),d(5),s(6,"translate"),o()(),r(7,"div",16)(8,"label",17),d(9),s(10,"translate"),o(),r(11,"input",18),M("ngModelChange",function(e){S(t);let c=u();return C(c.name,e)||(c.name=e),y(e)}),o()(),r(12,"div",16)(13,"label",17),d(14),s(15,"translate"),o(),r(16,"input",19),M("ngModelChange",function(e){S(t);let c=u();return C(c.surname,e)||(c.surname=e),y(e)}),o()(),r(17,"div",16)(18,"label",17),d(19),s(20,"translate"),o(),r(21,"input",20),M("ngModelChange",function(e){S(t);let c=u();return C(c.email,e)||(c.email=e),y(e)}),o()(),r(22,"div",21)(23,"label",17),d(24),s(25,"translate"),o(),r(26,"mat-select",22),s(27,"translate"),M("ngModelChange",function(e){S(t);let c=u();return C(c.selectedValue,e)||(c.selectedValue=e),y(e)}),v(28,Gt,2,2,"mat-option",23),o()(),v(29,Xt,3,2,"div",24),r(30,"div",25)(31,"button",26),O("click",function(){S(t);let e=u();return y(e.save())}),d(32),s(33,"translate"),o()()()()()}if(a&2){let t=u();i(5),q("",l(6,15,"EDIT_USER"),": #",t.staff_selected.id,""),i(4),p("",l(10,17,"FIRST_NAME")," *"),i(2),b("ngModel",t.name),i(3),p("",l(15,19,"SURNAME")," *"),i(2),b("ngModel",t.surname),i(3),p("",l(20,21,"EMAIL")," *"),i(2),b("ngModel",t.email),i(3),p("",l(25,23,"ROLE_SELECT")," *"),i(2),b("ngModel",t.selectedValue),f("ngModelOptions",lt(29,zt))("placeholder",l(27,25,"SELECT_ROLE")),i(2),f("ngForOf",t.roles),i(),f("ngIf",t.text_success||t.text_validation),i(3),g(l(33,27,"SAVE"))}}var Lt=(()=>{class a{constructor(t,n,e){this.staffService=t,this.activedRoute=n,this.translate=e,this.name="",this.surname="",this.email="",this.roles=[],this.text_success="",this.text_validation=""}ngOnInit(){this.activedRoute.params.subscribe(t=>{this.staff_id=t.id}),this.staffService.listConfig().subscribe(t=>{this.roles=(t.roles??[]).map(n=>rt(ot({},n),{id:n.id.toString()})),this.staffService.showUser(this.staff_id).subscribe(n=>{this.staff_selected=n.user,this.selectedValue=this.staff_selected.role?.id?.toString()??"",this.name=this.staff_selected.name??"",this.surname=this.staff_selected.surname??"",this.email=this.staff_selected.email??""})})}save(){this.text_validation="",this.text_success="";let t=[];if(`${this.name??""}`.trim()||t.push(this.translate.instant("NAME")),`${this.surname??""}`.trim()||t.push(this.translate.instant("SURNAME")),`${this.email??""}`.trim()||t.push(this.translate.instant("EMAIL")),this.selectedValue||t.push(this.translate.instant("ROLE")),t.length>0){let e=t.length>1,c=t.join(", ");this.text_validation=this.translate.instant("FIELDS_MISSING",{plural:e?"n":"",sPlural:e?"s":"",campos:c});return}let n=new FormData;n.append("name",this.name),n.append("surname",this.surname),n.append("email",this.email),n.append("role_id",this.selectedValue),this.staffService.updateUser(this.staff_id,n).subscribe(e=>{e.message===403?this.text_validation=e.message_text:(this.text_success=this.translate.instant("USER_UPDATED_SUCCESS"),this.staffService.showUser(this.staff_id).subscribe(c=>{this.staff_selected=c.user,this.selectedValue=this.staff_selected.role?.id?.toString()??"",this.name=this.staff_selected.name??"",this.surname=this.staff_selected.surname??"",this.email=this.staff_selected.email??""}))})}static{this.\u0275fac=function(n){return new(n||a)(P(j),P(pt),P(R))}}static{this.\u0275cmp=w({type:a,selectors:[["app-edit-staff-n"]],decls:19,vars:7,consts:[[1,"page-wrapper"],[1,"content"],[1,"page-header"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],[1,"feather","icon-chevron-right"],[1,"breadcrumb-item","active"],[1,"card"],["class","card-body",4,"ngIf"],[1,"card-body"],[1,"row","g-4"],[1,"col-12"],[1,"mb-4"],[1,"col-md-4"],[1,"form-label"],["name","name","type","text","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","surname","type","text","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","email","type","email","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-6"],[1,"form-control","select",3,"ngModelChange","ngModel","ngModelOptions","placeholder"],[3,"value",4,"ngFor","ngForOf"],["class","col-12",4,"ngIf"],[1,"col-12","text-end"],["type","button",1,"btn","btn-primary",3,"click"],[3,"value"],["class","alert alert-success",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],[1,"alert","alert-success"],[1,"alert","alert-warning"]],template:function(n,e){n&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),d(8),s(9,"translate"),o()(),r(10,"li",6),h(11,"i",8),o(),r(12,"li",9),d(13),s(14,"translate"),o()()()()(),r(15,"div",3)(16,"div",4)(17,"div",10),v(18,Jt,34,30,"div",11),o()()()()()),n&2&&(i(8),p("",l(9,3,"USERS")," >"),i(5),g(l(14,5,"EDIT_USER")),i(5),f("ngIf",e.staff_selected))},dependencies:[k,T,A,I,Y,V,F,K,Z,U,Q,x,$,Ot,ht,D,B],styles:[".card[_ngcontent-%COMP%]{border-radius:1rem;padding:1.5rem;border:4px solid var(--user-border-color, #000)!important;background-color:var(--user-card-bg, #fff)!important;color:var(--user-card-text-color, #000)!important;box-shadow:0 4px 12px #0000000d;transition:all .3s ease;position:relative;z-index:2}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{color:var(--user-card-text-color, #000)!important}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:var(--user-card-text-color, #000)!important;font-weight:600}.card.card[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]:not(.border-0){border:4px solid var(--user-border-color, #000)!important}.form-control[_ngcontent-%COMP%], .select[_ngcontent-%COMP%]{border-radius:.5rem;padding:.6rem 1rem;border:1px solid #ccc;background-color:#fff;color:#000}.form-control[_ngcontent-%COMP%]:focus, .select[_ngcontent-%COMP%]:focus{border-color:var(--user-border-color, #0d6efd);box-shadow:0 0 0 3px #0d6efd40;outline:none}.form-control.is-invalid[_ngcontent-%COMP%], .select.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;background-color:#ffe6e6}.btn[_ngcontent-%COMP%]{font-weight:500;padding:.5rem 1.5rem}.alert[_ngcontent-%COMP%]{border-radius:.375rem;font-size:.875rem}body.dark-mode[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.card[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.border-0){background-color:var(--user-card-bg, #23221c)!important;border:4px solid var(--user-border-color, #22c55e)!important;color:var(--user-card-text-color, #fff)!important;box-shadow:0 4px 12px #0009}body.dark-mode[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.card[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.border-0)   .card-body[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.border-0)   h4[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.border-0)   .form-label[_ngcontent-%COMP%]{color:var(--user-card-text-color, #fff)!important}body.dark-mode[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{background-color:#2a2a3a!important;color:#f1f1f1!important;border:1px solid #444!important}body.dark-mode[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#aaa}body.dark-mode[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .select.is-invalid[_ngcontent-%COMP%]{border-color:#f87171!important;background-color:#442626!important}body.dark-mode[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#3b82f6!important;border-color:#3b82f6!important;color:#fff}body.dark-mode[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#2563eb!important;border-color:#2563eb!important}body.dark-mode[_ngcontent-%COMP%]   .alert-warning[_ngcontent-%COMP%]{background-color:#5c3d03!important;color:#f6e58d!important}body.dark-mode[_ngcontent-%COMP%]   .alert-success[_ngcontent-%COMP%]{background-color:#024d36!important;color:#c7f9cc!important}[_ngcontent-%COMP%]::selection{background-color:#3b82f6;color:#fff}"]})}}return a})();var Kt=[{path:"",component:yt,children:[{path:"add-staff",component:It},{path:"list-staff",component:Nt},{path:"list-staff/edit-staff/:id",component:Lt}]}],Tt=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=X({type:a})}static{this.\u0275inj=H({imports:[x.forChild(Kt),x]})}}return a})();var Te=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=X({type:a})}static{this.\u0275inj=H({imports:[k,Tt,I,St,x]})}}return a})();export{Te as StaffModule};
