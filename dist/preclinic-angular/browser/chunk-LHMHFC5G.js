import{a as k}from"./chunk-VOEI7TUP.js";import{A as j,C as q,c as E,e as d,g as I,h as F,m as R,q as z,r as T}from"./chunk-BOVGGUWC.js";import{Bc as O,Ca as a,Dc as y,Fc as S,Ha as g,Ma as x,Ra as f,Wa as l,cb as e,db as t,eb as s,fc as w,kb as v,lb as b,pc as M,tc as P,wb as i,xb as C,yb as _}from"./chunk-VPSRVESD.js";import"./chunk-EQDQRRRY.js";function N(n,c){n&1&&(e(0,"div",30),i(1," La contrase\xF1a debe tener al menos 8 caracteres "),t())}function L(n,c){n&1&&(e(0,"div",30),i(1," Las contrase\xF1as no coinciden "),t())}function G(n,c){if(n&1&&(e(0,"div",31),s(1,"i",32),i(2),t()),n&2){let o=b();a(2),_(" ",o.errorMsg," ")}}function D(n,c){if(n&1&&(e(0,"div",33),s(1,"i",34),i(2),t()),n&2){let o=b();a(2),_(" ",o.successMsg," ")}}function V(n,c){n&1&&(e(0,"span"),s(1,"i",35),i(2," Cambiar contrase\xF1a "),t())}function A(n,c){n&1&&(e(0,"span"),s(1,"i",36),i(2," Guardando cambios... "),t())}var X=(()=>{class n{constructor(o,m,r,p){this.fb=o,this.route=m,this.http=r,this.router=p,this.form=this.fb.group({email:["",[d.required,d.email]],password:["",[d.required,d.minLength(8)]],confirmPassword:["",[d.required]]}),this.errorMsg="",this.successMsg="",this.loading=!1}ngOnInit(){let o=this.route.snapshot.queryParamMap.get("email");o&&this.form.patchValue({email:o})}onSubmit(){if(this.form.invalid||this.form.value.password!==this.form.value.confirmPassword){this.errorMsg="Las contrase\xF1as no coinciden o son inv\xE1lidas.";return}this.errorMsg="",this.loading=!0,this.http.post(`${k}/forgot-password/reset`,{email:this.form.value.email,password:this.form.value.password,password_confirmation:this.form.value.confirmPassword}).subscribe({next:o=>{this.successMsg=o.message,setTimeout(()=>{this.router.navigate(["/login"])},2e3)},error:o=>{this.loading=!1,this.errorMsg=o.error.message||"Error al cambiar la contrase\xF1a."}})}static{this.\u0275fac=function(m){return new(m||n)(g(j),g(O),g(P),g(y))}}static{this.\u0275cmp=x({type:n,selectors:[["app-reset-password"]],decls:47,vars:9,consts:[[1,"auth-layout"],["aria-hidden","true",1,"side-visual"],[1,"image-frame"],["src","assets/img/login-02.png","alt","Fachada del hospital IMSS Bienestar"],["aria-labelledby","resetTitle",1,"auth-col"],[1,"auth-panel"],["aria-label","Logo institucional",1,"brand"],["src","assets/img/login-logo.png","alt","Logo SISMEG"],["id","resetTitle",1,"title"],[1,"subtitle"],["novalidate","",3,"ngSubmit","formGroup"],[1,"field"],["for","password"],[1,"req"],[1,"control","with-icon"],["id","password","type","password","placeholder","M\xEDnimo 8 caracteres","formControlName","password","aria-describedby","password-help",1,"form-control"],["aria-hidden","true",1,"feather","icon-lock","field-icon"],[1,"password-requirements"],["class","invalid-feedback",4,"ngIf"],["for","confirmPassword"],["id","confirmPassword","type","password","placeholder","Repite la contrase\xF1a","formControlName","confirmPassword",1,"form-control"],["aria-hidden","true",1,"feather","icon-shield","field-icon"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[1,"actions"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],[4,"ngIf"],[1,"footer-links"],[1,"muted"],["aria-hidden","true",1,"feather","icon-info"],[1,"invalid-feedback"],[1,"alert","alert-danger"],["aria-hidden","true",1,"feather","icon-alert-circle"],[1,"alert","alert-success"],["aria-hidden","true",1,"feather","icon-check-circle"],["aria-hidden","true",1,"feather","icon-key"],["aria-hidden","true",1,"fa","fa-spinner","fa-spin"]],template:function(m,r){if(m&1&&(e(0,"div",0)(1,"aside",1)(2,"div",2),s(3,"img",3),t()(),e(4,"main",4)(5,"section",5)(6,"div",6),s(7,"img",7),t(),e(8,"h1",8),i(9,"Nueva contrase\xF1a"),t(),e(10,"p",9),i(11," Crea una contrase\xF1a segura para tu cuenta"),s(12,"br"),e(13,"strong"),i(14),t()(),e(15,"form",10),v("ngSubmit",function(){return r.onSubmit()}),e(16,"div",11)(17,"label",12),i(18,"Nueva contrase\xF1a "),e(19,"span",13),i(20,"*"),t()(),e(21,"div",14),s(22,"input",15)(23,"i",16),t(),e(24,"div",17)(25,"small"),i(26,"La contrase\xF1a debe contener al menos 8 caracteres"),t()(),f(27,N,2,0,"div",18),t(),e(28,"div",11)(29,"label",19),i(30,"Confirmar contrase\xF1a "),e(31,"span",13),i(32,"*"),t()(),e(33,"div",14),s(34,"input",20)(35,"i",21),t(),f(36,L,2,0,"div",18),t(),f(37,G,3,1,"div",22)(38,D,3,1,"div",23),e(39,"div",24)(40,"button",25),f(41,V,3,0,"span",26)(42,A,3,0,"span",26),t()(),e(43,"div",27)(44,"p",28),s(45,"i",29),i(46," Ser\xE1s redirigido al login tras cambiar la contrase\xF1a "),t()()()()()()),m&2){let p,u,h;a(14),C((p=r.form.get("email"))==null?null:p.value),a(),l("formGroup",r.form),a(12),l("ngIf",((u=r.form.get("password"))==null?null:u.invalid)&&((u=r.form.get("password"))==null?null:u.touched)),a(9),l("ngIf",((h=r.form.get("confirmPassword"))==null?null:h.invalid)&&((h=r.form.get("confirmPassword"))==null?null:h.touched)),a(),l("ngIf",r.errorMsg),a(),l("ngIf",r.successMsg),a(2),l("disabled",r.loading||r.form.invalid),a(),l("ngIf",!r.loading),a(),l("ngIf",r.loading)}},dependencies:[M,w,q,R,E,I,F,z,T,S],styles:['@charset "UTF-8";.auth-layout[_ngcontent-%COMP%]{min-height:100vh;display:grid;grid-template-columns:1.2fr 1fr;background:#0f1115;overflow-x:hidden;align-items:stretch}.side-visual[_ngcontent-%COMP%]{position:relative;overflow:hidden;border-radius:0 28px 28px 0;box-shadow:inset 0 0 0 1px #ffffff0a;max-width:100%;display:block;min-width:0}.image-frame[_ngcontent-%COMP%]{width:100%;height:100%;max-height:100vh;display:flex;align-items:center;justify-content:center}.side-visual[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;max-height:100vh;max-width:100%;object-fit:cover;display:block}.auth-col[_ngcontent-%COMP%]{display:grid;place-items:center;padding:clamp(.6rem,2vw,1.6rem);min-width:0;overflow-x:hidden}.auth-panel[_ngcontent-%COMP%]{width:min(520px,100%);color:#0f172a;background:#fff;border-radius:22px;padding:clamp(.9rem,2.2vw,1.4rem) clamp(.9rem,2.2vw,1.4rem);box-shadow:0 10px 35px #0000002e,0 2px 8px #00000014;position:relative;display:flex;flex-direction:column;justify-content:center;gap:.6rem}.brand[_ngcontent-%COMP%]{width:clamp(120px,20vw,260px);height:clamp(120px,20vw,260px);display:grid;place-items:center;margin:0 auto 1rem;border-radius:50%;background:radial-gradient(120px 120px at 50% 50%,#fff 0,#f6f7ff 60%,#e9efff);box-shadow:0 8px 36px #3b82f62e;position:static;z-index:3}.brand[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:78%;height:auto;display:block;object-fit:contain;filter:drop-shadow(0 6px 18px rgba(46,55,164,.22))}.title[_ngcontent-%COMP%]{text-align:center;font-weight:800;font-size:clamp(1.45rem,2.2vw,1.9rem);margin:0 0 .25rem;color:#2e37a4}.subtitle[_ngcontent-%COMP%]{text-align:center;margin:0 0 1rem;color:#64748b;font-size:.9rem;line-height:1.3}.subtitle[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2e37a4;font-weight:600}.field[_ngcontent-%COMP%]{margin-bottom:1rem}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;display:inline-block;margin-bottom:.4rem;color:#0f172a;font-size:.85rem}.req[_ngcontent-%COMP%]{color:#ef4444}.control[_ngcontent-%COMP%]{position:relative;overflow:visible}.with-icon[_ngcontent-%COMP%]   .field-icon[_ngcontent-%COMP%]{position:absolute;left:.85rem;top:50%;transform:translateY(-50%);color:#8a94a6;pointer-events:none}.form-control[_ngcontent-%COMP%]{width:100%;border-radius:12px;padding:.9rem 1rem .9rem 2.4rem;font-size:1.03rem;border:1px solid #e5e7eb;background:#f9fafb;color:#0f172a;transition:border-color .18s ease,box-shadow .18s ease,background .18s ease}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#2e37a4;background:#fff;box-shadow:0 0 0 4px #2e37a426}.form-control[_ngcontent-%COMP%]::placeholder{color:#94a3b8}.form-control[readonly][_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b;cursor:not-allowed}.form-text[_ngcontent-%COMP%]{font-size:.8rem;color:#6b7280;margin-top:.25rem;display:block}.password-requirements[_ngcontent-%COMP%]{margin-top:.5rem}.password-requirements[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.8rem;color:#6b7280;display:flex;align-items:center;gap:.25rem}.password-requirements[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]:before{content:"\\24d8";color:#3b82f6;font-weight:700}.invalid-feedback[_ngcontent-%COMP%]{color:#dc2626;font-size:.85rem;margin-top:.5rem;display:flex;align-items:center;gap:.25rem}.invalid-feedback[_ngcontent-%COMP%]:before{content:"\\26a0";color:#dc2626}.btn[_ngcontent-%COMP%]{border:0;cursor:pointer;font-family:inherit;font-weight:700;letter-spacing:.15px;border-radius:12px;transition:all .18s ease;display:inline-flex;align-items:center;justify-content:center;gap:.5rem}.btn-primary[_ngcontent-%COMP%]{--c1: #2e37a4;--c2: #60a5fa;background:linear-gradient(90deg,var(--c1),var(--c2));color:#fff;padding:.95rem 1rem;box-shadow:0 8px 22px #3b82f62e}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);filter:saturate(1.05);box-shadow:0 12px 28px #3b82f640}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.55;cursor:not-allowed;box-shadow:none;filter:grayscale(.1);transform:none}.w-100[_ngcontent-%COMP%]{width:100%}.actions[_ngcontent-%COMP%]{margin-top:.5rem}.alert[_ngcontent-%COMP%]{border-radius:10px;padding:.6rem .8rem;margin-bottom:.8rem;font-size:.85rem;display:flex;align-items:center;gap:.4rem;line-height:1.3}.alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{flex-shrink:0;font-size:.9rem}.alert-danger[_ngcontent-%COMP%]{background:#fee2e2;color:#7f1d1d;border:1px solid #fecaca}.alert-success[_ngcontent-%COMP%]{background:#f0fdf4;color:#14532d;border:1px solid #bbf7d0}.footer-links[_ngcontent-%COMP%]{text-align:center;margin-top:.8rem}.footer-links[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.muted[_ngcontent-%COMP%]{color:#6b7280!important;font-size:.8rem;display:flex;align-items:center;justify-content:center;gap:.4rem}.muted[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6}@media (max-width: 1100px){.auth-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}.side-visual[_ngcontent-%COMP%]{height:28vh;border-radius:0;box-shadow:none}}@media (max-width: 640px){.brand[_ngcontent-%COMP%]{width:140px;height:140px}.auth-panel[_ngcontent-%COMP%]{padding:1.25rem;border-radius:18px}.form-control[_ngcontent-%COMP%]{padding:.8rem .9rem .8rem 2.2rem;font-size:.95rem}}@media (max-height: 820px){.brand[_ngcontent-%COMP%]{width:clamp(110px,16vw,180px);height:clamp(110px,16vw,180px);margin-bottom:.75rem}.title[_ngcontent-%COMP%]{font-size:clamp(1.3rem,2vw,1.6rem);margin-bottom:.2rem}.subtitle[_ngcontent-%COMP%]{margin-bottom:.8rem}.field[_ngcontent-%COMP%]{margin-bottom:.9rem}.auth-panel[_ngcontent-%COMP%]{padding:1rem;gap:.5rem}.btn-primary[_ngcontent-%COMP%]{padding:.85rem .95rem}}@media (max-height: 700px){.brand[_ngcontent-%COMP%]{width:120px;height:120px;margin-bottom:.6rem}.title[_ngcontent-%COMP%]{font-size:clamp(1.15rem,1.8vw,1.4rem)}.auth-panel[_ngcontent-%COMP%]{padding:.85rem;border-radius:18px}.subtitle[_ngcontent-%COMP%]{font-size:.88rem;margin-bottom:.7rem}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.4rem}.field[_ngcontent-%COMP%]{margin-bottom:.8rem}}']})}}return n})();export{X as ResetPasswordComponent};
