import{W as h}from"./chunk-3FNBHZFV.js";import{a as r}from"./chunk-DJRPQKOF.js";import{A as c,Kc as f,T as u,W as o,m as n,p as s}from"./chunk-DOZKSIY5.js";var I=(()=>{let t=class t{constructor(a,i){this.router=a,this.auth=i}canActivate(){return!localStorage.getItem("token")||!localStorage.getItem("user")?(this.router.navigate([r.login]),!1):this.auth.isTokenExpired()?this.auth.refreshToken().pipe(s(()=>!0),c(()=>(this.router.navigate([r.login]),n(!1)))):(this.auth.isTokenExpiringSoon()&&this.auth.refreshToken().subscribe({error:()=>{this.router.navigate([r.login])}}),!0)}};t.\u0275fac=function(i){return new(i||t)(o(f),o(h))},t.\u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();export{I as a};
