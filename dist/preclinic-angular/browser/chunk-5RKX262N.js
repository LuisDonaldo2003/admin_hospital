import{a as f}from"./chunk-ZJMDNCY5.js";import{a as r}from"./chunk-7DIUBSS2.js";import{B as s,Ec as c,T as u,W as i,n as a,q as n}from"./chunk-6GTM3F5E.js";var k=(()=>{class t{constructor(o,e){this.router=o,this.auth=e}canActivate(){return!localStorage.getItem("token")||!localStorage.getItem("user")?(this.router.navigate([r.login]),!1):this.auth.isTokenExpired()?this.auth.refreshToken().pipe(n(()=>!0),s(()=>(this.router.navigate([r.login]),a(!1)))):(this.auth.isTokenExpiringSoon()&&this.auth.refreshToken().subscribe({error:()=>{this.router.navigate([r.login])}}),!0)}static{this.\u0275fac=function(e){return new(e||t)(i(c),i(f))}}static{this.\u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();export{k as a};
