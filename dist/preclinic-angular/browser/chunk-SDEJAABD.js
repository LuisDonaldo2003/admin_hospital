import{a as b}from"./chunk-VOEI7TUP.js";import{B as q,c as F,g as L,h as A,j as N,l as O,m as R,o as B,s as k,t as V,u as U,x as Z}from"./chunk-BOVGGUWC.js";import{Ca as r,Dc as T,Eb as m,Fb as p,Gb as s,Ha as y,Ma as E,Ra as f,Wa as g,cb as n,db as o,eb as h,ec as w,fc as x,kb as M,lb as u,pc as W,tc as I,wb as a,xb as C,ya as S,yb as v,zb as P}from"./chunk-VPSRVESD.js";import"./chunk-EQDQRRRY.js";function D(l,_){if(l&1&&(n(0,"option",39),a(1),o()),l&2){let i=_.$implicit;g("value",i.id),r(),C(i.name)}}function G(l,_){if(l&1&&(n(0,"option",39),a(1),o()),l&2){let i=_.$implicit;g("value",i.id),r(),C(i.name)}}function j(l,_){if(l&1&&(n(0,"option",39),a(1),o()),l&2){let i=_.$implicit;g("value",i.id),r(),C(i.name)}}function H(l,_){if(l&1&&(n(0,"div",40),h(1,"img",41),o()),l&2){let i=u();r(),g("src",i.IMAGEN_PREVIZUALIZA,S)}}function z(l,_){if(l&1&&(n(0,"div",45)(1,"strong"),a(2,"\xC9xito:"),o(),a(3),o()),l&2){let i=u(2);r(3),v(" ",i.text_success," ")}}function J(l,_){if(l&1&&(n(0,"div",46)(1,"strong"),a(2,"Advertencia:"),o(),a(3),o()),l&2){let i=u(2);r(3),v(" ",i.text_validation," ")}}function K(l,_){if(l&1&&(n(0,"div",42),f(1,z,4,1,"div",43)(2,J,4,1,"div",44),o()),l&2){let i=u();r(),g("ngIf",i.text_success),r(),g("ngIf",i.text_validation)}}var oe=(()=>{class l{constructor(i,c){this.http=i,this.router=c,this.name="",this.surname="",this.email="",this.mobile="",this.curp="",this.ine="",this.rfc="",this.attendance_number="",this.professional_license="",this.funcion_real="",this.gender="",this.departament_id="",this.profile_id="",this.contract_type_id="",this.IMAGEN_PREVIZUALIZA=null,this.avatarFile=null,this.departaments=[],this.profiles=[],this.contractTypes=[],this.text_success="",this.text_validation=""}ngOnInit(){this.getCatalogs();let i=JSON.parse(localStorage.getItem("user")||"{}");this.name=i.name||"",this.surname=i.surname||"",this.email=i.email||""}getCatalogs(){this.http.get(`${b}/staffs/config`).subscribe({next:i=>{this.departaments=i.departaments,this.profiles=i.profiles,this.contractTypes=i.contractTypes},error:i=>{console.error("Error al cargar cat\xE1logos:",i),this.text_validation="Error al cargar cat\xE1logos."}})}loadFile(i){let c=i.target.files[0];if(c){this.avatarFile=c;let e=new FileReader;e.onload=d=>this.IMAGEN_PREVIZUALIZA=e.result,e.readAsDataURL(c)}}save(){if(this.text_validation="",this.text_success="",!this.mobile||!this.birth_date||!this.gender||!this.contract_type_id||!this.attendance_number||!this.avatarFile){this.text_validation="Todos los campos obligatorios deben completarse.";return}let i=new FormData;i.append("mobile",this.mobile),i.append("curp",this.curp),i.append("rfc",this.rfc),i.append("ine",this.ine),i.append("attendance_number",this.attendance_number),i.append("professional_license",this.professional_license),i.append("funcion_real",this.funcion_real),i.append("birth_date",this.birth_date),i.append("gender_id",this.gender),i.append("departament_id",this.departament_id),i.append("profile_id",this.profile_id),i.append("contract_type_id",this.contract_type_id),this.avatarFile&&i.append("avatar",this.avatarFile),this.http.post(`${b}/complete-profile`,i).subscribe({next:()=>{this.text_success="Perfil completado correctamente",setTimeout(()=>this.router.navigate(["/profile"]),1e3)},error:c=>{console.error("Error al guardar:",c),this.text_validation=c?.error?.message||"Error al guardar"}})}static{this.\u0275fac=function(c){return new(c||l)(y(I),y(T))}}static{this.\u0275cmp=E({type:l,selectors:[["app-complete-profile"]],decls:103,vars:20,consts:[[1,"container","py-4"],[1,"row","justify-content-center"],[1,"col-lg-10","col-xl-9"],[1,"page-header","mb-4","text-center"],[1,"fw-bold"],[1,"alert","alert-info","text-center"],[1,"card","shadow-sm","border-0"],[1,"card-body"],[1,"row","g-4"],[1,"col-md-4"],[1,"form-label"],[1,"text-danger"],["type","text","name","mobile","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","curp",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","rfc",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","ine",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","attendance_number","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","professional_license",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-6"],["type","text","name","funcion_real",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-3"],["type","date","name","birth_date","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-label","d-block"],[1,"form-check","form-check-inline"],["type","radio","id","male","name","gender","value","1","required","",1,"form-check-input",3,"ngModelChange","ngModel"],["for","male",1,"form-check-label"],["type","radio","id","female","name","gender","value","2","required","",1,"form-check-input",3,"ngModelChange","ngModel"],["for","female",1,"form-check-label"],["name","departament_id",1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["name","profile_id",1,"form-control",3,"ngModelChange","ngModel"],["name","contract_type_id",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-12"],["type","file","accept","image/*","required","",1,"form-control",3,"change"],["class","mt-3 text-center",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"col-12","text-end","mt-3"],["type","button",1,"btn","btn-primary","px-4",3,"click"],[3,"value"],[1,"mt-3","text-center"],["width","200","alt","Preview",1,"img-thumbnail",3,"src"],[1,"col-12"],["class","alert alert-success",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],[1,"alert","alert-success"],[1,"alert","alert-warning"]],template:function(c,e){c&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),a(5,"Completa tu Perfil"),o()(),n(6,"div",5)(7,"strong"),a(8),o(),h(9,"br"),a(10," Para brindarte una mejor experiencia, por favor completa tu informaci\xF3n profesional."),h(11,"br"),a(12," Los campos marcados con "),n(13,"strong"),a(14,"*"),o(),a(15," son obligatorios. "),o(),n(16,"div",6)(17,"div",7)(18,"form")(19,"div",8)(20,"div",9)(21,"label",10),a(22,"M\xF3vil "),n(23,"span",11),a(24,"*"),o()(),n(25,"input",12),s("ngModelChange",function(t){return p(e.mobile,t)||(e.mobile=t),t}),o()(),n(26,"div",9)(27,"label",10),a(28,"CURP"),o(),n(29,"input",13),s("ngModelChange",function(t){return p(e.curp,t)||(e.curp=t),t}),o()(),n(30,"div",9)(31,"label",10),a(32,"RFC"),o(),n(33,"input",14),s("ngModelChange",function(t){return p(e.rfc,t)||(e.rfc=t),t}),o()(),n(34,"div",9)(35,"label",10),a(36,"INE"),o(),n(37,"input",15),s("ngModelChange",function(t){return p(e.ine,t)||(e.ine=t),t}),o()(),n(38,"div",9)(39,"label",10),a(40,"No. de Asistencia "),n(41,"span",11),a(42,"*"),o()(),n(43,"input",16),s("ngModelChange",function(t){return p(e.attendance_number,t)||(e.attendance_number=t),t}),o()(),n(44,"div",9)(45,"label",10),a(46,"C\xE9dula Profesional"),o(),n(47,"input",17),s("ngModelChange",function(t){return p(e.professional_license,t)||(e.professional_license=t),t}),o()(),n(48,"div",18)(49,"label",10),a(50,"Funci\xF3n Real"),o(),n(51,"input",19),s("ngModelChange",function(t){return p(e.funcion_real,t)||(e.funcion_real=t),t}),o()(),n(52,"div",20)(53,"label",10),a(54,"Fecha de Nacimiento "),n(55,"span",11),a(56,"*"),o()(),n(57,"input",21),s("ngModelChange",function(t){return p(e.birth_date,t)||(e.birth_date=t),t}),o()(),n(58,"div",20)(59,"label",22),a(60,"G\xE9nero "),n(61,"span",11),a(62,"*"),o()(),n(63,"div",23)(64,"input",24),s("ngModelChange",function(t){return p(e.gender,t)||(e.gender=t),t}),o(),n(65,"label",25),a(66,"Hombre"),o()(),n(67,"div",23)(68,"input",26),s("ngModelChange",function(t){return p(e.gender,t)||(e.gender=t),t}),o(),n(69,"label",27),a(70,"Mujer"),o()()(),n(71,"div",9)(72,"label",10),a(73,"Departamento"),o(),n(74,"select",28),s("ngModelChange",function(t){return p(e.departament_id,t)||(e.departament_id=t),t}),n(75,"option",29),a(76,"Selecciona uno"),o(),f(77,D,2,2,"option",30),o()(),n(78,"div",9)(79,"label",10),a(80,"Perfil Relacional"),o(),n(81,"select",31),s("ngModelChange",function(t){return p(e.profile_id,t)||(e.profile_id=t),t}),n(82,"option",29),a(83,"Selecciona uno"),o(),f(84,G,2,2,"option",30),o()(),n(85,"div",9)(86,"label",10),a(87,"Tipo de Contrato"),o(),n(88,"select",32),s("ngModelChange",function(t){return p(e.contract_type_id,t)||(e.contract_type_id=t),t}),n(89,"option",29),a(90,"Selecciona uno"),o(),f(91,j,2,2,"option",30),o()(),n(92,"div",33)(93,"label",10),a(94,"Avatar "),n(95,"span",11),a(96,"*"),o()(),n(97,"input",34),M("change",function(t){return e.loadFile(t)}),o(),f(98,H,2,1,"div",35),o(),f(99,K,3,2,"div",36),n(100,"div",37)(101,"button",38),M("click",function(){return e.save()}),a(102,"Guardar"),o()()()()()()()()()),c&2&&(r(8),P("Bienvenido ",e.name," ",e.surname,""),r(17),m("ngModel",e.mobile),r(4),m("ngModel",e.curp),r(4),m("ngModel",e.rfc),r(4),m("ngModel",e.ine),r(6),m("ngModel",e.attendance_number),r(4),m("ngModel",e.professional_license),r(4),m("ngModel",e.funcion_real),r(6),m("ngModel",e.birth_date),r(7),m("ngModel",e.gender),r(4),m("ngModel",e.gender),r(6),m("ngModel",e.departament_id),r(3),g("ngForOf",e.departaments),r(4),m("ngModel",e.profile_id),r(3),g("ngForOf",e.profiles),r(4),m("ngModel",e.contract_type_id),r(3),g("ngForOf",e.contractTypes),r(7),g("ngIf",e.IMAGEN_PREVIZUALIZA),r(),g("ngIf",e.text_success||e.text_validation))},dependencies:[W,w,x,q,R,V,U,F,k,B,L,A,Z,O,N],styles:[".card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 2px 12px #0000000d}input[type=text][_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%], select[_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]{border-radius:8px}label.form-label[_ngcontent-%COMP%]{font-weight:500}.alert-info[_ngcontent-%COMP%]{background-color:#e7f3ff;border-color:#b3daff}button.btn-primary[_ngcontent-%COMP%]{border-radius:30px;font-weight:600;padding-left:2rem;padding-right:2rem}"]})}}return l})();export{oe as CompleteProfileComponent};
