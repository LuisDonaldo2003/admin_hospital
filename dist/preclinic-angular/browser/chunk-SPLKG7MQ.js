import{B}from"./chunk-BOVGGUWC.js";import{b as A,d as N}from"./chunk-YB6GNKOU.js";import{Ab as M,Bc as z,Ca as a,Dc as $,Fc as j,Ha as C,Kb as x,Lb as w,Ma as E,Nb as S,Pb as D,Ra as b,Wa as m,Xa as O,ba as _,ca as f,cb as r,db as t,dc as k,eb as u,ec as I,fc as T,ib as v,kb as p,lb as l,nc as V,pc as F,wb as c,xb as h,yb as g,zb as y}from"./chunk-VPSRVESD.js";import"./chunk-EQDQRRRY.js";var R=(n,d)=>({"badge-success":n,"badge-info":d}),H=(n,d,e)=>({"bg-success":n,"bg-warning":d,"bg-danger":e}),G=(n,d)=>({"documento-completo":n,"documento-pendiente":d}),J=(n,d)=>({"badge-success":n,"badge-danger":d}),L=(n,d)=>({"documento-completo":n,"documento-opcional":d}),q=(n,d)=>({"badge-success":n,"badge-secondary":d});function K(n,d){if(n&1&&(r(0,"h6"),c(1),t()),n&2){let e=l();a(),M("",e.personal.nombre," ",e.personal.apellidos," - ",e.personal.puesto,"")}}function U(n,d){n&1&&(r(0,"small",27),u(1,"i",28),c(2," Documentos completos "),t())}function Q(n,d){n&1&&(r(0,"small",29),u(1,"i",30),c(2," Documentos pendientes "),t())}function W(n,d){if(n&1&&(r(0,"div",8)(1,"div",12)(2,"div",13)(3,"div",17)(4,"div",18),u(5,"i",19),t()(),r(6,"div",20)(7,"h5"),c(8),t(),r(9,"p")(10,"strong"),c(11,"Tipo:"),t(),r(12,"span",21),c(13),t()(),r(14,"p")(15,"strong"),c(16,"Puesto:"),t(),c(17),t(),r(18,"p")(19,"strong"),c(20,"Departamento:"),t(),c(21),t()(),r(22,"div",17)(23,"div",22)(24,"h6"),c(25,"Progreso de Documentos"),t(),r(26,"div",23)(27,"div",24),c(28),t()(),b(29,U,3,0,"small",25)(30,Q,3,0,"small",26),t()()()()()),n&2){let e=l();a(8),y("",e.personal.nombre," ",e.personal.apellidos,""),a(4),m("ngClass",x(12,R,e.personal.tipo==="Cl\xEDnico",e.personal.tipo==="No Cl\xEDnico")),a(),h(e.personal.tipo),a(4),g(" ",e.personal.puesto,""),a(4),g(" ",e.personal.departamento,""),a(6),O("width",e.porcentajeCompletado,"%"),m("ngClass",w(15,H,e.porcentajeCompletado===100,e.porcentajeCompletado>50&&e.porcentajeCompletado<100,e.porcentajeCompletado<=50)),a(),g(" ",e.porcentajeCompletado,"% "),a(),m("ngIf",e.documentosObligatoriosCompletos),a(),m("ngIf",!e.documentosObligatoriosCompletos)}}function X(n,d){if(n&1){let e=v();r(0,"div",37)(1,"input",38),p("change",function(o){_(e);let s=l().$implicit,P=l();return f(P.onFileSelected(o,s.id))}),t(),r(2,"button",39),p("click",function(){_(e);let o=l().$implicit,s=l();return f(s.subirDocumento(o.id))}),u(3,"i",40),c(4," Subir Documento "),t()()}if(n&2){let e=l().$implicit,i=l();a(),m("id","file-"+e.id),a(),m("disabled",!i.archivosSeleccionados[e.id])}}function Y(n,d){if(n&1){let e=v();r(0,"div",41)(1,"p",42)(2,"small")(3,"strong"),c(4,"Archivo:"),t(),c(5),t()(),r(6,"p",42)(7,"small")(8,"strong"),c(9,"Tama\xF1o:"),t(),c(10),t()(),r(11,"p",43)(12,"small")(13,"strong"),c(14,"Subido:"),t(),c(15),S(16,"date"),t()(),r(17,"div",44)(18,"button",45),p("click",function(){_(e);let o=l().$implicit,s=l();return f(s.verDocumento(o))}),u(19,"i",46),t(),r(20,"button",47),p("click",function(){_(e);let o=l().$implicit,s=l();return f(s.descargarDocumento(o))}),u(21,"i",48),t(),r(22,"button",49),p("click",function(){_(e);let o=l().$implicit,s=l();return f(s.eliminarDocumento(o.id))}),u(23,"i",50),t()()()}if(n&2){let e=l().$implicit,i=l();a(5),g(" ",e.url,""),a(5),g(" ",i.formatFileSize(e.size),""),a(5),g(" ",D(16,3,e.fechaSubida,"dd/MM/yyyy HH:mm"),"")}}function Z(n,d){if(n&1&&(r(0,"div",31)(1,"div",32)(2,"div",33)(3,"h6"),c(4),t(),r(5,"span",21),c(6),t()(),r(7,"div",34),b(8,X,5,2,"div",35)(9,Y,24,6,"div",36),t()()()),n&2){let e=d.$implicit;a(),m("ngClass",x(6,G,e.subido,!e.subido)),a(3),h(e.nombre),a(),m("ngClass",x(9,J,e.subido,!e.subido)),a(),g(" ",e.subido?"Subido":"Pendiente"," "),a(2),m("ngIf",!e.subido),a(),m("ngIf",e.subido)}}function ee(n,d){if(n&1){let e=v();r(0,"div",37)(1,"input",38),p("change",function(o){_(e);let s=l().$implicit,P=l();return f(P.onFileSelected(o,s.id))}),t(),r(2,"button",51),p("click",function(){_(e);let o=l().$implicit,s=l();return f(s.subirDocumento(o.id))}),u(3,"i",40),c(4," Subir Documento "),t()()}if(n&2){let e=l().$implicit,i=l();a(),m("id","file-"+e.id),a(),m("disabled",!i.archivosSeleccionados[e.id])}}function te(n,d){if(n&1){let e=v();r(0,"div",41)(1,"p",42)(2,"small")(3,"strong"),c(4,"Archivo:"),t(),c(5),t()(),r(6,"p",42)(7,"small")(8,"strong"),c(9,"Tama\xF1o:"),t(),c(10),t()(),r(11,"p",43)(12,"small")(13,"strong"),c(14,"Subido:"),t(),c(15),S(16,"date"),t()(),r(17,"div",44)(18,"button",45),p("click",function(){_(e);let o=l().$implicit,s=l();return f(s.verDocumento(o))}),u(19,"i",46),t(),r(20,"button",47),p("click",function(){_(e);let o=l().$implicit,s=l();return f(s.descargarDocumento(o))}),u(21,"i",48),t(),r(22,"button",49),p("click",function(){_(e);let o=l().$implicit,s=l();return f(s.eliminarDocumento(o.id))}),u(23,"i",50),t()()()}if(n&2){let e=l().$implicit,i=l();a(5),g(" ",e.url,""),a(5),g(" ",i.formatFileSize(e.size),""),a(5),g(" ",D(16,3,e.fechaSubida,"dd/MM/yyyy HH:mm"),"")}}function ne(n,d){if(n&1&&(r(0,"div",31)(1,"div",32)(2,"div",33)(3,"h6"),c(4),t(),r(5,"span",21),c(6),t()(),r(7,"div",34),b(8,ee,5,2,"div",35)(9,te,24,6,"div",36),t()()()),n&2){let e=d.$implicit;a(),m("ngClass",x(6,L,e.subido,!e.subido)),a(3),h(e.nombre),a(),m("ngClass",x(9,q,e.subido,!e.subido)),a(),g(" ",e.subido?"Subido":"Opcional"," "),a(2),m("ngIf",!e.subido),a(),m("ngIf",e.subido)}}var me=(()=>{class n{constructor(e,i,o){this.route=e,this.router=i,this.translate=o,this.personalId=null,this.personal=null,this.documentosObligatorios=[{id:1,nombre:"Acta de Nacimiento",tipo:"acta_nacimiento",obligatorio:!0,subido:!1},{id:2,nombre:"Comprobante de Domicilio",tipo:"comprobante_domicilio",obligatorio:!0,subido:!1},{id:3,nombre:"CURP",tipo:"curp",obligatorio:!0,subido:!1},{id:4,nombre:"INE",tipo:"ine",obligatorio:!0,subido:!1},{id:5,nombre:"RFC",tipo:"rfc",obligatorio:!0,subido:!1},{id:6,nombre:"T\xEDtulo Profesional",tipo:"titulo_profesional",obligatorio:!0,subido:!1}],this.documentosAdicionales=[{id:7,nombre:"C\xE9dula Profesional",tipo:"cedula_profesional",obligatorio:!1,subido:!1},{id:8,nombre:"Certificado de Estudios",tipo:"certificado_estudios",obligatorio:!1,subido:!1},{id:9,nombre:"Carta de Recomendaci\xF3n",tipo:"carta_recomendacion",obligatorio:!1,subido:!1},{id:10,nombre:"Examen M\xE9dico",tipo:"examen_medico",obligatorio:!1,subido:!1},{id:11,nombre:"Antecedentes No Penales",tipo:"antecedentes_penales",obligatorio:!1,subido:!1}],this.archivosSeleccionados={};let s=localStorage.getItem("language")||"es";this.translate.use(s)}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&(this.personalId=Number(e),this.cargarDatosPersonal(),this.cargarDocumentos())}cargarDatosPersonal(){this.personal={id:this.personalId,nombre:"Mar\xEDa Elena",apellidos:"Rodr\xEDguez S\xE1nchez",tipo:"No Cl\xEDnico",puesto:"Administradora",departamento:"Recursos Humanos"}}cargarDocumentos(){this.documentosObligatorios[0].subido=!0,this.documentosObligatorios[0].fechaSubida=new Date("2023-01-15"),this.documentosObligatorios[0].url="documento1.pdf",this.documentosObligatorios[0].size=2048e3,this.documentosObligatorios[2].subido=!0,this.documentosObligatorios[2].fechaSubida=new Date("2023-01-16"),this.documentosObligatorios[2].url="documento3.pdf",this.documentosObligatorios[2].size=1024e3}onFileSelected(e,i){let o=e.target;if(o.files&&o.files.length>0){let s=o.files[0];if(!this.validarTipoArchivo(s)){alert("Solo se permiten archivos PDF, JPG, JPEG y PNG");return}if(s.size>5*1024*1024){alert("El archivo no puede ser mayor a 5MB");return}this.archivosSeleccionados[i]=s}}validarTipoArchivo(e){return["application/pdf","image/jpeg","image/jpg","image/png"].includes(e.type)}subirDocumento(e){let i=this.archivosSeleccionados[e];if(!i){alert("Por favor seleccione un archivo");return}let o=[...this.documentosObligatorios,...this.documentosAdicionales].find(s=>s.id===e);o&&(o.subido=!0,o.fechaSubida=new Date,o.archivo=i,o.url=i.name,o.size=i.size,delete this.archivosSeleccionados[e],alert("Documento subido exitosamente"))}eliminarDocumento(e){if(confirm("\xBFEst\xE1 seguro de que desea eliminar este documento?")){let i=[...this.documentosObligatorios,...this.documentosAdicionales].find(o=>o.id===e);i&&(i.subido=!1,i.fechaSubida=void 0,i.archivo=void 0,i.url=void 0,i.size=void 0,alert("Documento eliminado exitosamente"))}}descargarDocumento(e){e.url&&alert(`Descargando: ${e.url}`)}verDocumento(e){e.url&&alert(`Visualizando: ${e.url}`)}get porcentajeCompletado(){let e=this.documentosObligatorios.filter(i=>i.subido).length;return Math.round(e/this.documentosObligatorios.length*100)}get documentosObligatoriosCompletos(){return this.documentosObligatorios.every(e=>e.subido)}formatFileSize(e){if(e===0)return"0 Bytes";let i=1024,o=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(i));return parseFloat((e/Math.pow(i,s)).toFixed(2))+" "+o[s]}volver(){this.router.navigate(["/medical/personal/list"])}static{this.\u0275fac=function(i){return new(i||n)(C(z),C($),C(A))}}static{this.\u0275cmp=E({type:n,selectors:[["app-personal-documents"]],decls:27,vars:4,consts:[[1,"content"],[1,"page-header"],[1,"page-title"],[4,"ngIf"],[1,"page-btn"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fa","fa-arrow-left","me-2"],["class","card mb-3",4,"ngIf"],[1,"card","mb-3"],[1,"card-header"],[1,"card-title"],[1,"fa","fa-exclamation-circle","text-danger","me-2"],[1,"card-body"],[1,"row"],["class","col-lg-4 mb-3",4,"ngFor","ngForOf"],[1,"card"],[1,"fa","fa-info-circle","text-info","me-2"],[1,"col-md-3"],[1,"text-center"],[1,"fa","fa-user-circle","fa-5x","text-primary"],[1,"col-md-6"],[1,"badge",3,"ngClass"],[1,"progress-card"],[1,"progress","mb-2"],[1,"progress-bar",3,"ngClass"],["class","text-success",4,"ngIf"],["class","text-warning",4,"ngIf"],[1,"text-success"],[1,"fa","fa-check-circle"],[1,"text-warning"],[1,"fa","fa-exclamation-triangle"],[1,"col-lg-4","mb-3"],[1,"documento-card",3,"ngClass"],[1,"documento-header"],[1,"documento-body"],["class","upload-section",4,"ngIf"],["class","documento-info",4,"ngIf"],[1,"upload-section"],["type","file","accept",".pdf,.jpg,.jpeg,.png",1,"form-control","mb-2",3,"change","id"],[1,"btn","btn-primary","btn-sm","w-100",3,"click","disabled"],[1,"fa","fa-upload","me-1"],[1,"documento-info"],[1,"mb-1"],[1,"mb-2"],[1,"documento-actions"],["title","Ver documento",1,"btn","btn-info","btn-sm","me-1",3,"click"],[1,"fa","fa-eye"],["title","Descargar",1,"btn","btn-success","btn-sm","me-1",3,"click"],[1,"fa","fa-download"],["title","Eliminar",1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash"],[1,"btn","btn-outline-primary","btn-sm","w-100",3,"click","disabled"]],template:function(i,o){i&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),c(4,"Documentos de Personal"),t(),b(5,K,2,3,"h6",3),t(),r(6,"div",4)(7,"button",5),p("click",function(){return o.volver()}),u(8,"i",6),c(9,"Volver a Lista "),t()()(),b(10,W,31,19,"div",7),r(11,"div",8)(12,"div",9)(13,"h5",10),u(14,"i",11),c(15," Documentos Obligatorios "),t()(),r(16,"div",12)(17,"div",13),b(18,Z,10,12,"div",14),t()()(),r(19,"div",15)(20,"div",9)(21,"h5",10),u(22,"i",16),c(23," Documentos Adicionales (Opcionales) "),t()(),r(24,"div",12)(25,"div",13),b(26,ne,10,12,"div",14),t()()()()),i&2&&(a(5),m("ngIf",o.personal),a(5),m("ngIf",o.personal),a(8),m("ngForOf",o.documentosObligatorios),a(8),m("ngForOf",o.documentosAdicionales))},dependencies:[F,k,I,T,V,B,j,N],styles:[".badge-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.badge-info[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.badge-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.badge-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.progress-card[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:15px;border-radius:8px;border:1px solid #dee2e6}.documento-card[_ngcontent-%COMP%]{border:2px solid #dee2e6;border-radius:8px;padding:15px;height:100%;transition:all .3s ease}.documento-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #0000001a}.documento-completo[_ngcontent-%COMP%]{border-color:#28a745;background-color:#f8fff9}.documento-pendiente[_ngcontent-%COMP%]{border-color:#dc3545;background-color:#fff8f8}.documento-opcional[_ngcontent-%COMP%]{border-color:#6c757d;background-color:#f8f9fa}.documento-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;padding-bottom:10px;border-bottom:1px solid #dee2e6}.documento-header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0;font-size:14px;font-weight:600;color:#333}.documento-body[_ngcontent-%COMP%]{min-height:120px}.upload-section[_ngcontent-%COMP%]{text-align:center}.documento-info[_ngcontent-%COMP%]{font-size:12px}.documento-actions[_ngcontent-%COMP%]{display:flex;gap:5px;justify-content:center;margin-top:10px}.documento-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1;max-width:40px;padding:5px 8px}.progress[_ngcontent-%COMP%]{height:20px}.progress-bar[_ngcontent-%COMP%]{font-size:12px;line-height:20px}.bg-success[_ngcontent-%COMP%]{background-color:#28a745!important}.bg-warning[_ngcontent-%COMP%]{background-color:#ffc107!important}.bg-danger[_ngcontent-%COMP%]{background-color:#dc3545!important}.card-title[_ngcontent-%COMP%]{margin-bottom:0;display:flex;align-items:center}.text-success[_ngcontent-%COMP%]{color:#28a745!important}.text-warning[_ngcontent-%COMP%]{color:#ffc107!important}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important}.text-info[_ngcontent-%COMP%]{color:#17a2b8!important}input[type=file][_ngcontent-%COMP%]{font-size:12px}.btn-outline-primary[_ngcontent-%COMP%]{border-color:#007bff;color:#007bff}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#007bff;color:#fff}"]})}}return n})();export{me as PersonalDocumentsComponent};
