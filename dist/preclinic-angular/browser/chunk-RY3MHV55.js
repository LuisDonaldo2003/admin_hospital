import{Hb as D}from"./chunk-EX4DTU24.js";import"./chunk-MHGS5KHZ.js";import"./chunk-6SU75NRV.js";import{a as L}from"./chunk-MV3LUB43.js";import"./chunk-VOEI7TUP.js";import{c as F,e as u,g as I,h as R,i as T,k as v,m as j,q as N,r as z}from"./chunk-K6AIGGO7.js";import"./chunk-7IQVTAUF.js";import"./chunk-DSFCBPHH.js";import{a as E}from"./chunk-KOTFE7EF.js";import{Ac as k,Bc as S,Ca as i,Cc as _,Ha as b,Jb as C,Ma as x,Na as p,Ra as g,U as c,Ua as w,Wa as a,cb as n,cc as O,db as o,eb as s,ec as P,kb as h,lb as f,mc as y,xb as l,zb as M}from"./chunk-6AUGAOY5.js";import"./chunk-EQDQRRRY.js";var G=e=>({"is-invalid":e});function Y(e,m){e&1&&(n(0,"div"),l(1," Ingrese el correo electr\xF3nico asociado a su cuenta. "),o())}function B(e,m){e&1&&(n(0,"div"),l(1," Correo no v\xE1lido. "),o())}function H(e,m){if(e&1&&(n(0,"div",36),g(1,Y,2,0,"div",33)(2,B,2,0,"div",33),o()),e&2){let r=f();i(),a("ngIf",r.f.email.errors==null?null:r.f.email.errors.required),i(),a("ngIf",r.f.email.errors==null?null:r.f.email.errors.email)}}function J(e,m){e&1&&(n(0,"div"),l(1," La contrase\xF1a es requerida. "),o())}function K(e,m){if(e&1&&(n(0,"div",36),g(1,J,2,0,"div",33),o()),e&2){let r=f();i(),a("ngIf",r.f.password.errors==null?null:r.f.password.errors.required)}}function Q(e,m){e&1&&(n(0,"div",37)(1,"strong"),l(2,"Error:"),o(),l(3," Usuario o contrase\xF1a incorrectos. "),n(4,"button",38),s(5,"span",39),o()())}function W(e,m){if(e&1&&(n(0,"div",40)(1,"strong"),l(2,"Atenci\xF3n:"),o(),l(3),n(4,"button",38),s(5,"span",39),o()()),e&2){let r=f();i(3),M(" ",r.unverifiedMsg," ")}}function X(e,m){e&1&&(n(0,"span"),l(1,"Login"),o())}function Z(e,m){e&1&&(n(0,"span"),s(1,"i",41),l(2," Cargando... "),o())}var A=(()=>{class e{constructor(r,d){this.auth=r,this.router=d,this.routes=E,this.passwordClass=!1,this.ERROR=!1,this.loading=!1,this.unverifiedMsg="",this.form=new T({email:new v("",[u.required,u.email]),password:new v("",[u.required])})}ngOnInit(){}get f(){return this.form.controls}loginFormSubmit(){if(this.form.invalid)return;this.ERROR=!1,this.unverifiedMsg="",this.loading=!0;let{email:r,password:d}=this.form.value;this.auth.login(r||"",d||"").subscribe({next:t=>{this.loading=!1,t?.success?this.router.navigate([this.routes.adminDashboard]):t?.unverified?(this.unverifiedMsg="Tu cuenta no est\xE1 verificada. Te hemos enviado un nuevo c\xF3digo.",this.router.navigate(["/verify-code"])):this.ERROR=!0},error:t=>{console.error("Error de login:",t),this.loading=!1,this.ERROR=!0}})}togglePassword(){this.passwordClass=!this.passwordClass}static{this.\u0275fac=function(d){return new(d||e)(b(L),b(k))}}static{this.\u0275cmp=x({type:e,selectors:[["app-login"]],standalone:!1,decls:46,vars:19,consts:[[1,"main-wrapper","login-body","dark-mode"],[1,"container-fluid","px-0"],[1,"row"],[1,"col-lg-6","login-wrap"],[1,"login-sec"],[1,"log-img"],["src","assets/img/login-02.png","alt","Imagen del hospital IMSS",1,"img-fluid"],[1,"col-lg-6","login-wrap-bg"],[1,"login-wrapper"],[1,"loginbox"],[1,"login-right"],[1,"login-right-wrap"],[1,"account-logo","text-center"],[3,"routerLink"],["src","assets/img/login-logo.png","alt","Logo SISMEG"],[1,"text-center"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email",1,"mb-2"],[1,"login-danger"],[2,"height","12px"],["aria-label","Correo electr\xF3nico","id","email","type","email","formControlName","email",1,"form-control","transition-all",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","password-group"],["for","password",1,"mb-2"],[1,"password-wrapper"],["aria-label","Contrase\xF1a","id","password","formControlName","password",1,"form-control","pass-input",3,"type","ngClass"],["type","button",1,"toggle-password-btn",3,"click"],[3,"ngClass"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-warning alert-dismissible fade show","role","alert",4,"ngIf"],[1,"form-group","login-btn"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[4,"ngIf"],[1,"text-center","mt-3"],[1,"text-muted",3,"routerLink"],[1,"invalid-feedback"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button","data-bs-dismiss","alert","aria-label","Cerrar",1,"btn-close"],["aria-hidden","true"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"],[1,"fa","fa-spinner","fa-spin","me-2"]],template:function(d,t){d&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),s(6,"img",6),o()()(),n(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"a",13),s(14,"img",14),o()(),n(15,"h2",15),l(16,"Iniciar Sesi\xF3n"),o(),n(17,"form",16),h("ngSubmit",function(){return t.loginFormSubmit()}),n(18,"div",17)(19,"label",18),l(20," Correo electr\xF3nico "),n(21,"span",19),l(22,"*"),o()(),s(23,"div",20)(24,"input",21),g(25,H,3,2,"div",22),o(),n(26,"div",23)(27,"label",24),l(28," Contrase\xF1a "),n(29,"span",19),l(30,"*"),o()(),s(31,"div",20),n(32,"div",25),s(33,"input",26),n(34,"button",27),h("click",function(){return t.togglePassword()}),s(35,"i",28),o()(),g(36,K,2,1,"div",22),o(),g(37,Q,6,0,"div",29)(38,W,6,1,"div",30),n(39,"div",31)(40,"button",32),g(41,X,2,0,"span",33)(42,Z,3,0,"span",33),o()(),n(43,"div",34)(44,"a",35),l(45," \xBFOlvidaste tu contrase\xF1a? "),o()()()()()()()()()()()),d&2&&(i(13),a("routerLink",t.routes.adminDashboard),i(4),a("formGroup",t.form),i(7),a("ngClass",C(15,G,t.f.email.touched&&t.f.email.invalid)),i(),a("ngIf",t.f.email.touched&&t.f.email.invalid),i(8),a("type",t.passwordClass?"text":"password")("ngClass",C(17,G,t.f.password.touched&&t.f.password.invalid)),i(),w("aria-label",t.passwordClass?"Ocultar contrase\xF1a":"Mostrar contrase\xF1a"),i(),a("ngClass",t.passwordClass?"feather icon-eye":"feather icon-eye-off"),i(),a("ngIf",t.f.password.touched&&t.f.password.invalid),i(),a("ngIf",t.ERROR),i(),a("ngIf",t.unverifiedMsg),i(2),a("disabled",t.form.invalid||t.loading),i(),a("ngIf",!t.loading),i(),a("ngIf",t.loading),i(2),a("routerLink",t.routes.forgotPassword))},dependencies:[O,P,S,j,F,I,R,N,z],styles:['@charset "UTF-8";.login-wrapper[_ngcontent-%COMP%]{background:#fff;border-radius:24px;box-shadow:0 8px 32px #2c3e5021;padding:3rem 2.5rem 2.5rem;margin:0 auto;max-width:520px;width:100%;position:relative;z-index:2;display:flex;flex-direction:column;align-items:center}body.dark-mode[_ngcontent-%COMP%]   .login-wrapper[_ngcontent-%COMP%]{background:#23272f;color:#fff;box-shadow:0 8px 32px #00000052}.loginbox[_ngcontent-%COMP%], .login-right[_ngcontent-%COMP%], .login-right-wrap[_ngcontent-%COMP%]{background:transparent!important;box-shadow:none!important;padding:0!important;margin:0!important;-webkit-backdrop-filter:none!important;backdrop-filter:none!important}.account-logo[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:2.5rem;width:270px;height:270px;border-radius:50%;background:#fff;box-shadow:0 4px 32px #2c3e5021;margin-left:auto;margin-right:auto;position:relative}.account-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:320px;width:320px;height:320px;object-fit:contain;margin-bottom:0;filter:drop-shadow(0 2px 12px rgba(44,62,80,.13));border-radius:50%;border:none;background:transparent;padding:0;display:block;margin-left:auto;margin-right:auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}h2.text-center[_ngcontent-%COMP%]{font-weight:700;font-size:2rem;margin-bottom:2rem;color:#2e37a4;letter-spacing:.5px}body.dark-mode[_ngcontent-%COMP%]   h2.text-center[_ngcontent-%COMP%]{color:#fff}.form-group[_ngcontent-%COMP%]{position:relative;margin-bottom:2rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.08rem;color:#111!important;font-weight:600;margin-bottom:1.1rem;display:block}body.dark-mode[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff}.form-control[_ngcontent-%COMP%]{border-radius:12px;padding:.85rem 1.2rem;font-size:1.08rem;background:#232323;color:#fff;border:1.5px solid #232323;transition:border .2s,box-shadow .2s;box-shadow:0 2px 8px #3b82f60f}.form-control[_ngcontent-%COMP%]:focus{border-color:#2e37a4;box-shadow:0 0 0 4px #2e37a421;background:#fff;color:#222}.form-control[_ngcontent-%COMP%]::placeholder{color:#888}body.dark-mode[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background:#23272f;color:#fff;border:2px solid #3b82f6}body.dark-mode[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{background:#23272f;border-color:#60a5fa;box-shadow:0 0 0 4px #3b82f62e}body.dark-mode[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#bbb}.password-group[_ngcontent-%COMP%], .password-wrapper[_ngcontent-%COMP%]{position:relative}.pass-input[_ngcontent-%COMP%]{padding-right:3.2rem!important}.toggle-password-btn[_ngcontent-%COMP%]{position:absolute;top:50%;right:.8rem;transform:translateY(-50%);background:transparent;border:none;padding:.4rem;font-size:1.2rem;color:#888;cursor:pointer;display:flex;align-items:center;justify-content:center;z-index:3;border-radius:50%;transition:color .2s,background .2s}.toggle-password-btn[_ngcontent-%COMP%]:hover, .toggle-password-btn[_ngcontent-%COMP%]:focus{color:#2e37a4;background:#2e37a40d}body.dark-mode[_ngcontent-%COMP%]   .toggle-password-btn[_ngcontent-%COMP%]{color:#bbb}body.dark-mode[_ngcontent-%COMP%]   .toggle-password-btn[_ngcontent-%COMP%]:hover, body.dark-mode[_ngcontent-%COMP%]   .toggle-password-btn[_ngcontent-%COMP%]:focus{color:#60a5fa;background:#60a5fa1a}.login-btn[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:12px;font-size:1.18rem;font-weight:700;padding:.95rem 0;background:linear-gradient(90deg,#2e37a4 60%,#60a5fa);color:#fff;box-shadow:0 4px 16px #3b82f621;transition:all .2s ease}.login-btn[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{background:#e5e7eb;color:#b3b3b3;cursor:not-allowed;box-shadow:none;border:1.5px solid #d1d5db}.login-btn[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:not(:disabled), .login-btn[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus:not(:disabled){background:linear-gradient(90deg,#60a5fa 60%,#2e37a4);box-shadow:0 6px 24px #3b82f62e;transform:translateY(-2px) scale(1.03)}.alert[_ngcontent-%COMP%]{border-radius:10px;font-size:1.05rem;margin-top:1rem}.text-muted[_ngcontent-%COMP%], .form-text.text-muted[_ngcontent-%COMP%], a.text-muted[_ngcontent-%COMP%], .login-wrapper[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:#111!important;font-size:1rem}body.dark-mode[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .form-text.text-muted[_ngcontent-%COMP%]{color:#bbb!important}.login-wrap[_ngcontent-%COMP%]{height:100vh;display:flex;align-items:center;justify-content:center;background:transparent;border-radius:0 32px 32px 0;overflow:hidden;box-shadow:0 8px 32px #2c3e501a}.login-sec[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.log-img[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;border-radius:0 32px 32px 0;overflow:hidden}.log-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:0 32px 32px 0}@media (max-width: 991px){.login-wrapper[_ngcontent-%COMP%]{padding:1.2rem .5rem;margin:1.2rem 0;max-width:98vw}.account-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:120px}.login-wrap[_ngcontent-%COMP%], .log-img[_ngcontent-%COMP%], .log-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:0!important;height:auto;min-height:220px}}']})}}return e})();var $=[{path:"",component:A}],V=(()=>{class e{static{this.\u0275fac=function(d){return new(d||e)}}static{this.\u0275mod=p({type:e})}static{this.\u0275inj=c({imports:[_.forChild($),_]})}}return e})();var ue=(()=>{class e{static{this.\u0275fac=function(d){return new(d||e)}}static{this.\u0275mod=p({type:e})}static{this.\u0275inj=c({imports:[y,V,D]})}}return e})();export{ue as LoginModule};
