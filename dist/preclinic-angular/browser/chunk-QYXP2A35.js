import{a as S}from"./chunk-VOEI7TUP.js";import{c as I,e as l,g as P,h as E,m as R,q as N,r as F,x as T,z as O}from"./chunk-K6AIGGO7.js";import{Ac as M,Ca as n,Cc as y,Ha as d,Ma as h,Ra as f,Wa as s,cb as r,db as i,eb as p,ec as x,kb as b,lb as u,mc as C,qc as w,xb as a,yb as g,yc as _}from"./chunk-6AUGAOY5.js";import"./chunk-EQDQRRRY.js";function j(e,c){if(e&1&&(r(0,"div",12),a(1),i()),e&2){let t=u();n(),g(t.errorMsg)}}function G(e,c){if(e&1&&(r(0,"div",13),a(1),i()),e&2){let t=u();n(),g(t.successMsg)}}function V(e,c){e&1&&(r(0,"span"),a(1,"Cambiar contrase\xF1a"),i())}function k(e,c){e&1&&(r(0,"span"),p(1,"i",14),a(2," Guardando..."),i())}var J=(()=>{class e{constructor(t,m,o,v){this.fb=t,this.route=m,this.http=o,this.router=v,this.form=this.fb.group({email:["",[l.required,l.email]],password:["",[l.required,l.minLength(8)]],confirmPassword:["",[l.required]]}),this.errorMsg="",this.successMsg="",this.loading=!1}ngOnInit(){let t=this.route.snapshot.queryParamMap.get("email");t&&this.form.patchValue({email:t})}onSubmit(){if(this.form.invalid||this.form.value.password!==this.form.value.confirmPassword){this.errorMsg="Las contrase\xF1as no coinciden o son inv\xE1lidas.";return}this.errorMsg="",this.loading=!0,this.http.post(`${S}/forgot-password/reset`,{email:this.form.value.email,password:this.form.value.password,password_confirmation:this.form.value.confirmPassword}).subscribe({next:t=>{this.successMsg=t.message,setTimeout(()=>{this.router.navigate(["/login"])},2e3)},error:t=>{this.loading=!1,this.errorMsg=t.error.message||"Error al cambiar la contrase\xF1a."}})}static{this.\u0275fac=function(m){return new(m||e)(d(T),d(_),d(w),d(M))}}static{this.\u0275cmp=h({type:e,selectors:[["app-reset-password"]],decls:22,vars:6,consts:[[1,"background"],[1,"card-container"],[1,"title"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","email","formControlName","email","readonly","",1,"form-control"],["type","password","formControlName","password",1,"form-control"],["type","password","formControlName","confirmPassword",1,"form-control"],["class","alert alert-danger mt-2",4,"ngIf"],["class","alert alert-success mt-2",4,"ngIf"],["type","submit",1,"btn","btn-primary","mt-3",3,"disabled"],[4,"ngIf"],[1,"alert","alert-danger","mt-2"],[1,"alert","alert-success","mt-2"],[1,"fa","fa-spinner","fa-spin","me-2"]],template:function(m,o){m&1&&(r(0,"div",0)(1,"div",1)(2,"h2",2),a(3,"Cambia tu contrase\xF1a"),i(),r(4,"form",3),b("ngSubmit",function(){return o.onSubmit()}),r(5,"div",4)(6,"label"),a(7,"Email"),i(),p(8,"input",5),i(),r(9,"div",4)(10,"label"),a(11,"Nueva contrase\xF1a"),i(),p(12,"input",6),i(),r(13,"div",4)(14,"label"),a(15,"Confirmar contrase\xF1a"),i(),p(16,"input",7),i(),f(17,j,2,1,"div",8)(18,G,2,1,"div",9),r(19,"button",10),f(20,V,2,0,"span",11)(21,k,3,0,"span",11),i()()()()),m&2&&(n(4),s("formGroup",o.form),n(13),s("ngIf",o.errorMsg),n(),s("ngIf",o.successMsg),n(),s("disabled",o.loading),n(),s("ngIf",!o.loading),n(),s("ngIf",o.loading))},dependencies:[C,x,O,R,I,P,E,N,F,y],styles:[".background[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#f4f2fc}.card-container[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:20px;box-shadow:0 0 24px #0000001a;width:100%;max-width:500px}.title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px;text-align:center}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}"]})}}return e})();export{J as ResetPasswordComponent};
