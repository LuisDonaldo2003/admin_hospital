import{a as At}from"./chunk-BRZXSLAD.js";import{a as at}from"./chunk-XMR6GIJW.js";import{Ib as _t,f as K,g as J}from"./chunk-JTJMN6D5.js";import"./chunk-KRE2HUKZ.js";import"./chunk-VX2AGXYE.js";import{b as ht}from"./chunk-76FA3DMV.js";import{a as S}from"./chunk-HPADJYSB.js";import{C as wt,c as gt,g as yt,l as ft,s as ut,t as xt,u as bt}from"./chunk-PT5MYBJB.js";import"./chunk-V6E7N3WL.js";import{b as Y,c as vt,d as X}from"./chunk-Y37VGZ2B.js";import"./chunk-ATDHAFBJ.js";import{a as $}from"./chunk-DJRPQKOF.js";import{$ as _,Bc as ct,Db as T,Dc as lt,Ea as M,Eb as R,Fb as B,Ia as L,Ja as V,Lb as P,Lc as mt,Mc as O,Na as y,Nb as F,Ob as pt,Pb as dt,Qb as f,Rb as u,Tb as k,U as ot,V as z,Wa as m,X as et,Xa as n,Ya as a,Za as v,_ as w,eb as N,gb as C,hb as h,jc as W,kc as j,lc as G,rb as E,sb as I,tb as st,vb as d,vc as U,wa as o,wb as c,xb as A,yb as it}from"./chunk-JZRSYAJW.js";import{a as nt,b as rt}from"./chunk-6DGDWVBL.js";var It=(i,p,e)=>({t:i,s:p,v:e,ic:"fa-calendar-day"}),Ot=(i,p,e)=>({t:i,s:p,v:e,ic:"fa-layer-group"}),Mt=(i,p,e)=>({t:i,s:p,v:e,ic:"fa-chart-column"}),Tt=(i,p,e)=>({t:i,s:p,v:e,ic:"fa-database"}),Rt=(i,p,e,t)=>[i,p,e,t];function Bt(i,p){if(i&1&&(n(0,"div",38)(1,"div",39),v(2,"i",40),a(),n(3,"div",41)(4,"div",42),d(5),n(6,"small"),d(7),a()(),n(8,"div",43),d(9),a()()()),i&2){let e=p.$implicit;o(2),m("ngClass",e.ic),o(3),A("",e.t," "),o(2),c(e.s),o(2),c(e.v)}}function Pt(i,p){if(i&1&&(n(0,"div",44)(1,"div",45),v(2,"div",46)(3,"div",47),a(),n(4,"ul",48)(5,"li"),v(6,"span",49),d(7),f(8,"translate"),a(),n(9,"li"),v(10,"span",50),d(11),f(12,"translate"),a()()()),i&2){let e=h(2);o(2),I("width",e.byGender.male/(e.byGender.male+e.byGender.female)*100+"%"),o(),I("width",e.byGender.female/(e.byGender.male+e.byGender.female)*100+"%"),o(4),it(" ",u(8,8,"DASHBOARD.DASHBOARD_ARCHIVE.MAN"),": ",e.byGender.male),o(4),it(" ",u(12,10,"DASHBOARD.DASHBOARD_ARCHIVE.WOMAN"),": ",e.byGender.female)}}function Ut(i,p){i&1&&(n(0,"div",51),d(1),f(2,"translate"),a()),i&2&&(o(),c(u(2,1,"DASHBOARD.DASHBOARD_ARCHIVE.NOT_DATES")))}function Ht(i,p){if(i&1&&(n(0,"div",54)(1,"div",55),d(2),a(),n(3,"div",56)(4,"div",57),d(5),a(),n(6,"div",58),v(7,"span",59),a()(),n(8,"div",60),d(9),a()()),i&2){let e=p.$implicit,t=p.index,r=h(3);o(2),c(t+1),o(2),m("title",e.state),o(),c(e.state),o(2),I("width",e.count/r.byState[0].count*100+"%"),o(2),c(e.count)}}function Ft(i,p){if(i&1&&(n(0,"div",52),y(1,Ht,10,6,"div",53),a()),i&2){let e=h(2);o(),m("ngForOf",e.byState)}}function zt(i,p){i&1&&(n(0,"div",51),d(1),f(2,"translate"),a()),i&2&&(o(),c(u(2,1,"DASHBOARD.DASHBOARD_ARCHIVE.NOT_REGISTERS")))}function Lt(i,p){if(i&1&&v(0,"apx-chart",65),i&2){let e=h(3);m("series",e.weeklyChart.series)("chart",e.weeklyChart.chart)("xaxis",e.weeklyChart.xaxis)("yaxis",e.weeklyChart.yaxis)("dataLabels",e.weeklyChart.dataLabels)("stroke",e.weeklyChart.stroke)("grid",e.weeklyChart.grid)("tooltip",e.weeklyChart.tooltip)("fill",e.weeklyChart.fill)}}function Vt(i,p){if(i&1&&(n(0,"section",61)(1,"div",62)(2,"header",20)(3,"h3"),d(4),f(5,"translate"),a()(),n(6,"div",63),y(7,Lt,1,9,"apx-chart",64),a()()()),i&2){let e=h(2);o(4),c(u(5,2,"DASHBOARD.DASHBOARD_ARCHIVE.RECENT_REGISTERS")),o(3),m("ngIf",e.weeklyChart)}}function Nt(i,p){if(i&1&&v(0,"apx-chart",65),i&2){let e=h(3);m("series",e.monthlyChart.series)("chart",e.monthlyChart.chart)("xaxis",e.monthlyChart.xaxis)("yaxis",e.monthlyChart.yaxis)("dataLabels",e.monthlyChart.dataLabels)("stroke",e.monthlyChart.stroke)("grid",e.monthlyChart.grid)("tooltip",e.monthlyChart.tooltip)("fill",e.monthlyChart.fill)}}function Wt(i,p){if(i&1&&(n(0,"section",66)(1,"div",62)(2,"header",20)(3,"h3"),d(4,"Pacientes por mes (a\xF1o actual)"),a()(),n(5,"div",63),y(6,Nt,1,9,"apx-chart",64),a()()()),i&2){let e=h(2);o(6),m("ngIf",e.monthlyChart)}}function jt(i,p){if(i&1&&(n(0,"div",71)(1,"div",72),d(2),a(),n(3,"div",73)(4,"div",74),v(5,"div",75),a()(),n(6,"div",76),d(7),a()()),i&2){let e=p.$implicit,t=h(3);st("is-current",e.year===t.currentYear),o(2),c(e.year),o(3),I("width",t.yearPercent(e.count)+"%"),o(2),c(e.count)}}function Gt(i,p){if(i&1&&(n(0,"section",67)(1,"div",68)(2,"header",20)(3,"h3"),d(4,"Pacientes por a\xF1o"),a()(),n(5,"div",69),y(6,jt,8,6,"div",70),a()()()),i&2){let e=h(2);o(6),m("ngForOf",e.yearlyCounts)}}function $t(i,p){if(i&1&&(n(0,"div",77),d(1),a()),i&2){let e=h(2);o(),c(e.error)}}function Yt(i,p){if(i&1){let e=N();n(0,"div",4)(1,"div",5)(2,"ul",6)(3,"li",7)(4,"a"),d(5),f(6,"translate"),a()(),n(7,"li",8),d(8),f(9,"translate"),a()(),n(10,"section",9)(11,"div",10)(12,"div",11)(13,"h1")(14,"span"),d(15),f(16,"translate"),a(),d(17),f(18,"translate"),a(),n(19,"p"),d(20),f(21,"translate"),a()(),n(22,"div",12)(23,"button",13),C("click",function(){w(e);let r=h();return _(r.loadStats())}),v(24,"i",14),a()()(),v(25,"div",15),a(),n(26,"section",16),y(27,Bt,10,4,"div",17),f(28,"translate"),f(29,"translate"),f(30,"translate"),f(31,"translate"),f(32,"translate"),f(33,"translate"),f(34,"translate"),f(35,"translate"),a(),n(36,"div",18)(37,"div",19)(38,"header",20)(39,"h3"),d(40),f(41,"translate"),a()(),y(42,Pt,13,12,"div",21)(43,Ut,3,3,"ng-template",null,1,k),a(),n(45,"div",22)(46,"header",20)(47,"h3"),d(48),f(49,"translate"),a()(),y(50,Ft,2,1,"div",23)(51,zt,3,3,"ng-template",null,2,k),a(),n(53,"div",24)(54,"header",20)(55,"h3"),d(56),f(57,"translate"),a()(),n(58,"div",25)(59,"button",26),v(60,"i",27),n(61,"span"),d(62),f(63,"translate"),a()(),n(64,"button",28),v(65,"i",29),n(66,"span"),d(67),f(68,"translate"),a()(),n(69,"button",30),v(70,"i",31),n(71,"span"),d(72),f(73,"translate"),a()(),n(74,"button",32),v(75,"i",33),n(76,"span"),d(77),f(78,"translate"),a()()()()(),y(79,Vt,8,4,"section",34)(80,Wt,7,1,"section",35)(81,Gt,7,1,"section",36)(82,$t,2,1,"div",37),a()()}if(i&2){let e=E(44),t=E(52),r=h();o(5),A("",u(6,21,"DASHBOARD.DASHBOARD_ARCHIVE.DASHBOARD")," >"),o(3),c(u(9,23,"DASHBOARD.DASHBOARD_ARCHIVE.ARCHIVE")),o(7),c(u(16,25,"DASHBOARD.DASHBOARD_ARCHIVE.ARCHIVE")),o(2),A(" | ",u(18,27,"DASHBOARD.DASHBOARD_ARCHIVE.SUMMARY")),o(3),c(u(21,29,"DASHBOARD.DASHBOARD_ARCHIVE.VISION")),o(7),m("ngForOf",pt(77,Rt,F(61,It,u(28,31,"DASHBOARD.DASHBOARD_ARCHIVE.TODAY"),u(29,33,"DASHBOARD.DASHBOARD_ARCHIVE.REGISTER"),r.stats.todayAdded),F(65,Ot,u(30,35,"DASHBOARD.DASHBOARD_ARCHIVE.WEEK"),u(31,37,"DASHBOARD.DASHBOARD_ARCHIVE.ACCUMULATED"),r.stats.weekAdded),F(69,Mt,u(32,39,"DASHBOARD.DASHBOARD_ARCHIVE.MONTH"),u(33,41,"DASHBOARD.DASHBOARD_ARCHIVE.ACCUMULATED"),r.stats.monthAdded),F(73,Tt,u(34,43,"DASHBOARD.DASHBOARD_ARCHIVE.TOTAL"),u(35,45,"DASHBOARD.DASHBOARD_ARCHIVE.HISTORICAL"),r.stats.totalArchives))),o(13),c(u(41,47,"DASHBOARD.DASHBOARD_ARCHIVE.DISTRIBUTION_BY_GENDER")),o(2),m("ngIf",r.byGender.male+r.byGender.female>0)("ngIfElse",e),o(6),c(u(49,49,"DASHBOARD.DASHBOARD_ARCHIVE.TOP_LOCATIONS")),o(2),m("ngIf",r.byState.length)("ngIfElse",t),o(6),c(u(57,51,"DASHBOARD.DASHBOARD_ARCHIVE.ACTIONS")),o(6),c(u(63,53,"DASHBOARD.DASHBOARD_ARCHIVE.NEW")),o(5),c(u(68,55,"DASHBOARD.DASHBOARD_ARCHIVE.LIST")),o(5),c(u(73,57,"DASHBOARD.DASHBOARD_ARCHIVE.EXPORT")),o(5),c(u(78,59,"DASHBOARD.DASHBOARD_ARCHIVE.BACKUP")),o(2),m("ngIf",r.weeklyChart),o(),m("ngIf",r.monthlyChart),o(),m("ngIf",r.yearlyCounts==null?null:r.yearlyCounts.length),o(),m("ngIf",r.error)}}function Xt(i,p){i&1&&(n(0,"div",4)(1,"div",78)(2,"div",79),d(3),f(4,"translate"),a()()()),i&2&&(o(3),c(u(4,1,"DASHBOARD.DASHBOARD_ARCHIVE.STATISTICS_LOADING")))}var Q=(()=>{let p=class p{constructor(t,r){this.archiveService=t,this.translate=r,this.routes=$,this.todayDate=new Date,this.currentYear=new Date().getFullYear(),this.stats={todayAdded:0,weekAdded:0,monthAdded:0,totalArchives:0},this.loading=!0,this.error=null,this.byGender={male:0,female:0},this.byState=[],this.weeklyCategories=[],this.weeklyCounts=[],this.weeklyChart=null,this.monthlyChart=null,this.yearlyCounts=[],this.yearlyMax=0}ngOnInit(){this.loadStats()}loadStats(){this.loading=!0,this.archiveService.getArchiveStats().subscribe({next:t=>{t?.stats&&(this.stats=t.stats),t?.byGender&&(this.byGender=t.byGender),t?.topLocations&&(this.byState=t.topLocations.map(s=>({state:s.name,count:s.count})));let r=t?.dailySeries||t?.dailyTrend||t?.last7Days||t?.daily||null;this.prepareWeeklyChart(r),this.prepareMonthlyChart(t?.monthlyCounts||t?.perMonth||null),this.yearlyCounts=Array.isArray(t?.yearlyCounts)?[...t.yearlyCounts].sort((s,l)=>s.year-l.year):[],this.yearlyMax=this.yearlyCounts.length?Math.max(...this.yearlyCounts.map(s=>Number(s.count||0))):0,this.loading=!1},error:t=>{this.error=t?.error?.message||"Error cargando estad\xEDsticas",this.loading=!1}})}prepareWeeklyChart(t){let r=new Date,s=[];for(let l=6;l>=0;l--){let x=new Date(r);x.setDate(r.getDate()-l);let g=x.toISOString().substring(0,10);s.push({date:g,count:0})}Array.isArray(t)&&t.forEach(l=>{let x=(l.date||l.day||l.fecha||"").toString().substring(0,10),g=s.find(D=>D.date===x);g&&(g.count=Number(l.count||l.total||l.value||0))}),this.weeklyCategories=s.map(l=>this.formatShortDate(l.date)),this.weeklyCounts=s.map(l=>l.count),this.weeklyChart={series:[{name:"Registros",data:this.weeklyCounts}],chart:{type:"area",height:240,sparkline:{enabled:!1},toolbar:{show:!1},animations:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:3},xaxis:{categories:this.weeklyCategories,labels:{style:{colors:"#8fa2c2",fontSize:"11px"}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:"#8fa2c2",fontSize:"11px"}},forceNiceScale:!0,min:0},grid:{borderColor:"rgba(255,255,255,0.06)",strokeDashArray:4,xaxis:{lines:{show:!1}}},tooltip:{theme:"dark",x:{show:!0},y:{formatter:l=>l+" pacientes"}},fill:{type:"gradient",gradient:{shadeIntensity:.4,opacityFrom:.35,opacityTo:0,stops:[0,100]}}}}prepareMonthlyChart(t){let s=new Date().getFullYear(),l=Array.from({length:12},(b,H)=>H+1),x=new Map;Array.isArray(t)&&t.forEach(b=>{let H=Number(b.year??b.y),tt=Number(b.month??b.m??b.month_number);H===s&&tt>=1&&tt<=12&&x.set(tt,Number(b.count??b.total??0))});let g=l.map(b=>x.get(b)??0),D=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];this.monthlyChart={series:[{name:"Pacientes",data:g}],chart:{type:"bar",height:240,toolbar:{show:!1},animations:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},xaxis:{categories:D,labels:{style:{colors:"#8fa2c2",fontSize:"11px"}}},yaxis:{labels:{style:{colors:"#8fa2c2",fontSize:"11px"}},min:0},grid:{borderColor:"rgba(255,255,255,0.06)",strokeDashArray:4},tooltip:{theme:"dark",x:{show:!0},y:{formatter:b=>b+" pacientes"}},fill:{type:"gradient",gradient:{shadeIntensity:.3,opacityFrom:.3,opacityTo:0,stops:[0,100]}}}}yearPercent(t){let r=this.yearlyMax||1,s=Math.round(Number(t||0)/r*100);return Math.max(0,Math.min(100,s))}formatShortDate(t){return new Date(t+"T00:00:00").toLocaleDateString("es-MX",{day:"2-digit",month:"2-digit"})}};p.\u0275fac=function(r){return new(r||p)(M(At),M(Y))},p.\u0275cmp=L({type:p,selectors:[["app-archive-dashboard"]],decls:3,vars:2,consts:[["loadingTpl",""],["noGender",""],["noLocations",""],["class","page-wrapper",4,"ngIf","ngIfElse"],[1,"page-wrapper"],[1,"content","archive-dash-new"],[1,"breadcrumb","mb-3"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"hero","mb-4"],[1,"hero-inner"],[1,"hero-text"],[1,"hero-meta"],[1,"btn","btn-refresh",3,"click"],[1,"fa","fa-rotate"],[1,"hero-bg"],[1,"kpi-grid","mb-4"],["class","kpi-card",4,"ngFor","ngForOf"],[1,"grid-panels","mb-4"],[1,"panel","panel-gender"],[1,"panel-hd"],["class","gender-wrap",4,"ngIf","ngIfElse"],[1,"panel","panel-locations"],["class","locations-list",4,"ngIf","ngIfElse"],[1,"panel","actions","panel-actions"],[1,"actions-grid"],["routerLink","/archives/add_archive",1,"action"],[1,"fa","fa-plus"],["routerLink","/archives/list_archive",1,"action"],[1,"fa","fa-list"],["routerLink","/archives/export_archive",1,"action"],[1,"fa","fa-file-export"],["routerLink","/archives/backup_archive",1,"action"],[1,"fa","fa-database"],["class","weekly-chart",4,"ngIf"],["class","monthly-chart",4,"ngIf"],["class","yearly-summary",4,"ngIf"],["class","alert alert-danger py-2 px-3 small mb-0",4,"ngIf"],[1,"kpi-card"],[1,"kpi-icon"],[1,"fa",3,"ngClass"],[1,"kpi-body"],[1,"kpi-label"],[1,"kpi-value"],[1,"gender-wrap"],[1,"gender-bars"],["aria-label","Masculino",1,"bar"],["aria-label","Femenino",1,"bar","female"],[1,"legend"],[1,"dot","male"],[1,"dot","female"],[1,"empty"],[1,"locations-list"],["class","loc-item",4,"ngFor","ngForOf"],[1,"loc-item"],[1,"loc-rank"],[1,"loc-body"],[1,"loc-name",3,"title"],[1,"loc-meter"],[1,"meter-fill"],[1,"loc-count"],[1,"weekly-chart"],[1,"panel","panel-chart"],[1,"chart-wrapper"],[3,"series","chart","xaxis","yaxis","dataLabels","stroke","grid","tooltip","fill",4,"ngIf"],[3,"series","chart","xaxis","yaxis","dataLabels","stroke","grid","tooltip","fill"],[1,"monthly-chart"],[1,"yearly-summary"],[1,"panel","panel-yearly"],[1,"yearly-list"],["class","year-row",3,"is-current",4,"ngFor","ngForOf"],[1,"year-row"],[1,"col-year"],[1,"col-bar"],[1,"bar-outer"],[1,"bar-inner"],[1,"col-count"],[1,"alert","alert-danger","py-2","px-3","small","mb-0"],[1,"content"],[1,"text-center","py-5","text-muted"]],template:function(r,s){if(r&1&&y(0,Yt,83,82,"div",3)(1,Xt,5,3,"ng-template",null,0,k),r&2){let l=E(2);m("ngIf",!s.loading)("ngIfElse",l)}},dependencies:[U,W,j,G,O,mt,J,K,X,vt],styles:['@charset "UTF-8";.archive-dash-new[_ngcontent-%COMP%]{padding-left:clamp(.75rem,1.2vw,1rem);padding-right:clamp(.75rem,1.8vw,1.25rem);overflow-x:hidden}ul.breadcrumb[_ngcontent-%COMP%]{background:transparent;padding:0;margin:0 0 .75rem;list-style:none;display:flex;gap:.5rem;font-size:.8rem;text-transform:none}ul.breadcrumb[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{opacity:.85;color:#bcd0f0}ul.breadcrumb[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{opacity:1;color:#e6eeff}ul.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#8fb4ff;text-decoration:none}.hero[_ngcontent-%COMP%]{position:relative;border-radius:16px;padding:1.5rem 1.25rem;background:linear-gradient(135deg,#1f2432,#12151d);border:1px solid #262c3a;overflow:hidden}.hero-inner[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:space-between;gap:1rem}.hero-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 .35rem;font-weight:700;font-size:1.5rem;color:#dfe7ff}.hero-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#6ea8ff}.hero-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#9fb4d6;opacity:.9;font-size:.95rem}.btn-refresh[_ngcontent-%COMP%]{background:#222633;border:1px solid #2e3344;color:#6ea8ff;border-radius:10px;width:42px;height:42px;display:grid;place-items:center;transition:.2s}.btn-refresh[_ngcontent-%COMP%]:hover{background:#2a3040}.kpi-grid[_ngcontent-%COMP%]{display:grid;gap:1rem;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}.kpi-card[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:.9rem;background:#171a22;border:1px solid #232936;border-radius:14px;padding:1rem 1.1rem;transition:transform .2s ease,box-shadow .2s ease}.kpi-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 10px 18px -10px #0009}.kpi-icon[_ngcontent-%COMP%]{width:48px;height:48px;flex:0 0 48px;border-radius:12px;display:grid;place-items:center;background:#1e2230;color:#6ea8ff;box-shadow:0 0 0 1px #2c3442 inset}.kpi-label[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;color:#9fb4d6}.kpi-label[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-left:.35rem;opacity:.8}.kpi-value[_ngcontent-%COMP%]{font-size:1.9rem;font-weight:800;line-height:1;letter-spacing:-.5px;color:#e8efff;margin-top:.25rem}.grid-panels[_ngcontent-%COMP%]{display:grid;gap:1.2rem;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));align-items:start}.panel[_ngcontent-%COMP%]{background:#171a22;border:1px solid #232936;border-radius:16px;padding:1rem 1.1rem 1.1rem}.panel-hd[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .75rem;font-size:.95rem;text-transform:uppercase;letter-spacing:.6px;color:#9fb4d6;font-weight:700}.gender-wrap[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.9rem}.gender-bars[_ngcontent-%COMP%]{position:relative;display:flex;height:18px;background:#0f1217;border-radius:9px;overflow:hidden;box-shadow:0 0 0 1px #252a37 inset}.gender-bars[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4d6bff,#6088ff)}.gender-bars[_ngcontent-%COMP%]   .female[_ngcontent-%COMP%]{background:linear-gradient(90deg,#0ac8b8,#2dd6c7)}.legend[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;gap:1rem;flex-wrap:wrap;font-size:.8rem;font-weight:600;color:#e8efff}.legend[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;display:inline-block;margin-right:.35rem;box-shadow:0 0 0 2px #fff,0 0 0 3px #ffffff0f}.legend[_ngcontent-%COMP%]   .male[_ngcontent-%COMP%]{background:#5576ff}.legend[_ngcontent-%COMP%]   .female[_ngcontent-%COMP%]{background:#0ac8b8}.empty[_ngcontent-%COMP%]{font-size:.85rem;opacity:.7;color:#a5b6cf}.locations-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.6rem}.loc-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:32px 1fr 50px;gap:.75rem;align-items:center;background:#12141b;border:1px solid #222836;padding:.6rem .7rem;border-radius:12px}.loc-rank[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:10px;display:grid;place-items:center;background:#1d212a;color:#6ea8ff;font-weight:700;box-shadow:0 0 0 1px #2a3140 inset}.loc-body[_ngcontent-%COMP%]{min-width:0}.loc-name[_ngcontent-%COMP%]{color:#d9e2f5;font-weight:600;font-size:.85rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.loc-meter[_ngcontent-%COMP%]{height:6px;background:#212730;border-radius:4px;overflow:hidden;position:relative}.meter-fill[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(90deg,#6ea8ff,#2dd6c7)}.loc-count[_ngcontent-%COMP%]{text-align:right;color:#9fb4d6;font-weight:700}.actions-grid[_ngcontent-%COMP%]{display:grid;gap:.8rem;grid-template-columns:repeat(auto-fit,minmax(120px,1fr))}.action[_ngcontent-%COMP%]{border:1px solid #2a3140;background:#14171e;border-radius:14px;padding:.85rem .55rem .7rem;font-size:.7rem;font-weight:700;text-transform:uppercase;letter-spacing:.4px;display:flex;flex-direction:column;align-items:center;gap:.55rem;color:#b8c7e2;transition:.18s}.action[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.05rem;color:#6ea8ff}.action[_ngcontent-%COMP%]:hover{background:#1d212a;color:#fff;box-shadow:0 6px 18px -8px #000;transform:translateY(-2px)}.weekly-chart[_ngcontent-%COMP%], .monthly-chart[_ngcontent-%COMP%]{margin-bottom:1.25rem}.yearly-summary[_ngcontent-%COMP%]{margin-top:.75rem}.panel-chart[_ngcontent-%COMP%]{min-height:200px}.chart-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;height:240px}.chart-wrapper[_ngcontent-%COMP%]     .apexcharts-tooltip{background:#1e222b!important;border:1px solid #2c3240!important}.chart-wrapper[_ngcontent-%COMP%]     .apexcharts-tooltip-title{background:#171b22!important;border-bottom:1px solid #2c3240!important}.panel-yearly[_ngcontent-%COMP%]{padding-top:.6rem}.yearly-list[_ngcontent-%COMP%]{display:grid;gap:.5rem}.year-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:72px 1fr 80px;gap:.6rem;align-items:center;background:#12141b;border:1px solid #222836;border-radius:12px;padding:.5rem .7rem}.year-row.is-current[_ngcontent-%COMP%]{outline:1px solid #2dd6c7;box-shadow:0 0 0 3px #2dd6c714 inset}.col-year[_ngcontent-%COMP%]{font-weight:800;color:#e8efff;letter-spacing:.3px}.col-count[_ngcontent-%COMP%]{text-align:right;font-weight:700;color:#9fb4d6}.bar-outer[_ngcontent-%COMP%]{position:relative;height:10px;background:#212730;border-radius:6px;overflow:hidden}.bar-inner[_ngcontent-%COMP%]{position:absolute;inset:0;width:0;background:linear-gradient(90deg,#6ea8ff,#2dd6c7);transition:width .6s ease}@media (max-width: 992px){.kpi-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.grid-panels[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}}@media (max-width: 576px){.hero-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem}.kpi-value[_ngcontent-%COMP%]{font-size:1.6rem}.grid-panels[_ngcontent-%COMP%]{grid-template-columns:1fr}}']});let i=p;return i})();var Ct=(()=>{let p=class p{constructor(t,r){this.http=t,this.authService=r}getHeaders(){return new ct({Authorization:"Bearer "+this.authService.token})}getActivityStats(){let t=`${S}/user-activities/stats`;return this.http.get(t,{headers:this.getHeaders()})}getRecentActivities(t={},r=0,s=50){let l=new URLSearchParams;t.user_id&&l.append("user_id",t.user_id),t.action_type&&l.append("action_type",t.action_type),t.module&&l.append("module",t.module),t.date_from&&l.append("date_from",t.date_from),t.date_to&&l.append("date_to",t.date_to),t.search&&l.append("search",t.search),l.append("skip",r.toString()),l.append("limit",s.toString());let x=`${S}/user-activities?${l.toString()}`;return this.http.get(x,{headers:this.getHeaders()})}getActivitiesByUser(){let t=`${S}/user-activities/by-user`;return this.http.get(t,{headers:this.getHeaders()})}getActivitiesByModule(){let t=`${S}/user-activities/by-module`;return this.http.get(t,{headers:this.getHeaders()})}getActivitiesByActionType(){let t=`${S}/user-activities/by-action`;return this.http.get(t,{headers:this.getHeaders()})}getMostActiveUsers(t=10){let r=`${S}/user-activities/most-active?limit=${t}`;return this.http.get(r,{headers:this.getHeaders()})}logActivity(t){let r=`${S}/user-activities`;return this.http.post(r,t,{headers:this.getHeaders()})}getActivityDetail(t){let r=`${S}/user-activities/${t}`;return this.http.get(r,{headers:this.getHeaders()})}getUserActivities(t,r=0,s=50){let l=`${S}/user-activities/user/${t}?skip=${r}&limit=${s}`;return this.http.get(l,{headers:this.getHeaders()})}};p.\u0275fac=function(r){return new(r||p)(et(lt),et(ht))},p.\u0275prov=ot({token:p,factory:p.\u0275fac,providedIn:"root"});let i=p;return i})();var Jt=i=>({t:"Hoy",s:"Actividades",v:i,ic:"fa-calendar-day"}),qt=i=>({t:"Esta Semana",s:"Acumuladas",v:i,ic:"fa-layer-group"}),Qt=i=>({t:"Este Mes",s:"Acumuladas",v:i,ic:"fa-chart-column"}),Zt=i=>({t:"Total",s:"Hist\xF3rico",v:i,ic:"fa-database"}),te=i=>({t:"Usuarios",s:"Activos",v:i,ic:"fa-users"}),ee=(i,p,e,t,r)=>[i,p,e,t,r];function ie(i,p){if(i&1&&(n(0,"div",78)(1,"div",79),v(2,"i",80),a(),n(3,"div",81)(4,"div",82),d(5),n(6,"small"),d(7),a()(),n(8,"div",83),d(9),a()()()),i&2){let e=p.$implicit;o(2),m("ngClass",e.ic),o(3),A("",e.t," "),o(2),c(e.s),o(2),c(e.v)}}function ae(i,p){if(i&1&&(n(0,"div",86)(1,"div",87),d(2),a(),n(3,"div",88)(4,"div",89),d(5),a(),n(6,"div",90),v(7,"span",91),a()(),n(8,"div",92),d(9),a()()),i&2){let e=p.$implicit,t=p.index,r=h(3);o(2),c(t+1),o(2),m("title",e.module),o(),c(r.getModuleLabel(e.module)),o(2),I("width",e.count/r.activitiesByModule[0].count*100+"%"),o(2),c(e.count)}}function ne(i,p){if(i&1&&(n(0,"div",84),y(1,ae,10,6,"div",85),a()),i&2){let e=h(2);o(),m("ngForOf",e.activitiesByModule)}}function re(i,p){i&1&&(n(0,"div",93),d(1,"Sin datos de m\xF3dulos"),a())}function oe(i,p){if(i&1&&(n(0,"div",96)(1,"div",97),d(2),a(),n(3,"div",98)(4,"div",99),d(5),a(),n(6,"div",100),v(7,"span",101),a()(),n(8,"div",102),d(9),a()()),i&2){let e=p.$implicit,t=p.index,r=h(3);o(2),c(t+1),o(2),m("title",e.user_name),o(),c(e.user_name),o(2),I("width",e.count/r.mostActiveUsers[0].count*100+"%"),o(2),c(e.count)}}function se(i,p){if(i&1&&(n(0,"div",94),y(1,oe,10,6,"div",95),a()),i&2){let e=h(2);o(),m("ngForOf",e.mostActiveUsers)}}function pe(i,p){i&1&&(n(0,"div",93),d(1,"Sin datos de usuarios"),a())}function de(i,p){if(i&1&&(n(0,"div",103)(1,"div",104),v(2,"i",80),a(),n(3,"div",105)(4,"div",106),d(5),a(),n(6,"div",107),d(7),a()(),n(8,"div",108),d(9),a()()),i&2){let e=p.$implicit;o(2),m("ngClass",e.icon),o(3),c(e.label),o(2),A("",e.h,"h"),o(2),c(e.count)}}function ce(i,p){if(i&1&&(n(0,"div",109)(1,"div",110),d(2),a(),n(3,"div",111),d(4),a(),n(5,"div",112),d(6),a()()),i&2){let e=p.$implicit,t=h(2);o(2),c(e.user_name),o(2),c(e.description),o(2),c(t.formatDateTime(e.created_at))}}function le(i,p){i&1&&(n(0,"div",113),d(1," Sin actividades de creaci\xF3n "),a())}function me(i,p){if(i&1&&(n(0,"div",109)(1,"div",110),d(2),a(),n(3,"div",111),d(4),a(),n(5,"div",112),d(6),a()()),i&2){let e=p.$implicit,t=h(2);o(2),c(e.user_name),o(2),c(e.description),o(2),c(t.formatDateTime(e.created_at))}}function he(i,p){i&1&&(n(0,"div",113),d(1," Sin actividades de visualizaci\xF3n "),a())}function ve(i,p){if(i&1&&(n(0,"div",109)(1,"div",110),d(2),a(),n(3,"div",111),d(4),a(),n(5,"div",112),d(6),a()()),i&2){let e=p.$implicit,t=h(2);o(2),c(e.user_name),o(2),c(e.description),o(2),c(t.formatDateTime(e.created_at))}}function ge(i,p){i&1&&(n(0,"div",113),d(1," Sin actividades de edici\xF3n "),a())}function ye(i,p){if(i&1&&(n(0,"div",109)(1,"div",110),d(2),a(),n(3,"div",111),d(4),a(),n(5,"div",112),d(6),a()()),i&2){let e=p.$implicit,t=h(2);o(2),c(e.user_name),o(2),c(e.description),o(2),c(t.formatDateTime(e.created_at))}}function fe(i,p){i&1&&(n(0,"div",113),d(1," Sin actividades de eliminaci\xF3n "),a())}function ue(i,p){if(i&1&&v(0,"apx-chart",118),i&2){let e=h(3);m("series",e.dailyChart.series)("chart",e.dailyChart.chart)("xaxis",e.dailyChart.xaxis)("yaxis",e.dailyChart.yaxis)("dataLabels",e.dailyChart.dataLabels)("stroke",e.dailyChart.stroke)("grid",e.dailyChart.grid)("tooltip",e.dailyChart.tooltip)("fill",e.dailyChart.fill)}}function xe(i,p){if(i&1&&(n(0,"section",114)(1,"div",115)(2,"header",20)(3,"h3"),d(4,"Actividades \xDAltimos 7 D\xEDas"),a()(),n(5,"div",116),y(6,ue,1,9,"apx-chart",117),a()()()),i&2){let e=h(2);o(6),m("ngIf",e.dailyChart)}}function be(i,p){if(i&1&&v(0,"apx-chart",122),i&2){let e=h(3);m("series",e.moduleChart.series)("chart",e.moduleChart.chart)("xaxis",e.moduleChart.xaxis)("yaxis",e.moduleChart.yaxis)("dataLabels",e.moduleChart.dataLabels)("plotOptions",e.moduleChart.plotOptions)("stroke",e.moduleChart.stroke)("grid",e.moduleChart.grid)("tooltip",e.moduleChart.tooltip)("fill",e.moduleChart.fill)}}function we(i,p){if(i&1&&(n(0,"section",119)(1,"div",115)(2,"header",20)(3,"h3"),d(4,"Distribuci\xF3n por M\xF3dulo"),a()(),n(5,"div",120),y(6,be,1,10,"apx-chart",121),a()()()),i&2){let e=h(2);o(6),m("ngIf",e.moduleChart)}}function _e(i,p){if(i&1&&(n(0,"option",123),d(1),a()),i&2){let e=p.$implicit;m("value",e.value),o(),c(e.label)}}function Ae(i,p){if(i&1&&(n(0,"option",123),d(1),a()),i&2){let e=p.$implicit;m("value",e.value),o(),c(e.label)}}function Ce(i,p){if(i&1&&(n(0,"div",126)(1,"div",127),v(2,"i",80),a(),n(3,"div",128)(4,"div",129)(5,"span",110),d(6),a(),n(7,"span",130),d(8),a(),n(9,"span",131),d(10),a()(),n(11,"div",132),d(12),a(),n(13,"div",133)(14,"span",112),d(15),a()()()()),i&2){let e=p.$implicit,t=h(3);o(2),m("ngClass",t.getActionIcon(e.action_type)),o(4),c(e.user_name),o(),m("ngClass",t.getActionClass(e.action_type)),o(),A(" ",t.getActionTypeLabel(e.action_type)," "),o(2),c(t.getModuleLabel(e.module)),o(2),c(e.description),o(3),c(t.formatDateTime(e.created_at))}}function Se(i,p){if(i&1&&(n(0,"div",124),y(1,Ce,16,7,"div",125),a()),i&2){let e=h(2);o(),m("ngForOf",e.recentActivities)}}function Ee(i,p){i&1&&(n(0,"div",93),d(1,"No se encontraron actividades con los filtros aplicados"),a())}function ke(i,p){if(i&1&&(n(0,"div",134),d(1),a()),i&2){let e=h(2);o(),c(e.error)}}function De(i,p){if(i&1){let e=N();n(0,"div",5)(1,"div",6)(2,"ul",7)(3,"li",8)(4,"a"),d(5,"Dashboard >"),a()(),n(6,"li",9),d(7,"Actividades de Usuarios"),a()(),n(8,"section",10)(9,"div",11)(10,"div",12)(11,"h1")(12,"span"),d(13,"Actividades"),a(),d(14," | Historial de Usuarios"),a(),n(15,"p"),d(16,"Monitoreo completo de todas las actividades realizadas en la plataforma"),a()(),n(17,"div",13)(18,"button",14),C("click",function(){w(e);let r=h();return _(r.loadStats())}),v(19,"i",15),a()()()(),n(20,"section",16),y(21,ie,10,4,"div",17),a(),n(22,"div",18)(23,"div",19)(24,"header",20)(25,"h3"),d(26,"Resumen de Actividades por Tipo"),a()(),n(27,"div",21)(28,"div",22)(29,"div",23),v(30,"i",24),a(),n(31,"div",25)(32,"div",26),d(33,"Crear"),a(),n(34,"div",27),d(35),a(),n(36,"div",28),d(37),a()()(),n(38,"div",29)(39,"div",23),v(40,"i",30),a(),n(41,"div",25)(42,"div",26),d(43,"Ver"),a(),n(44,"div",27),d(45),a(),n(46,"div",28),d(47),a()()(),n(48,"div",31)(49,"div",23),v(50,"i",32),a(),n(51,"div",25)(52,"div",26),d(53,"Editar"),a(),n(54,"div",27),d(55),a(),n(56,"div",28),d(57),a()()(),n(58,"div",33)(59,"div",23),v(60,"i",34),a(),n(61,"div",25)(62,"div",26),d(63,"Eliminar"),a(),n(64,"div",27),d(65),a(),n(66,"div",28),d(67),a()()()()(),n(68,"div",35)(69,"header",20)(70,"h3"),d(71,"Actividad por M\xF3dulo"),a()(),y(72,ne,2,1,"div",36)(73,re,2,0,"ng-template",null,1,k),a(),n(75,"div",37)(76,"header",20)(77,"h3"),d(78,"Usuarios M\xE1s Activos"),a()(),y(79,se,2,1,"div",38)(80,pe,2,0,"ng-template",null,2,k),a(),n(82,"div",39)(83,"header",20)(84,"h3"),d(85,"Actividad por Hora"),a()(),n(86,"div",40),y(87,de,10,4,"div",41),a()()(),n(88,"section",42)(89,"div",43)(90,"div",44)(91,"div",45)(92,"header",46)(93,"h4"),v(94,"i",47),d(95,"Creaciones"),a(),n(96,"span",48),d(97),a()(),n(98,"div",49),y(99,ce,7,3,"div",50)(100,le,2,0,"div",51),a()()(),n(101,"div",44)(102,"div",52)(103,"header",53)(104,"h4"),v(105,"i",54),d(106,"Visualizaciones"),a(),n(107,"span",48),d(108),a()(),n(109,"div",49),y(110,me,7,3,"div",50)(111,he,2,0,"div",51),a()()(),n(112,"div",44)(113,"div",55)(114,"header",56)(115,"h4"),v(116,"i",57),d(117,"Ediciones"),a(),n(118,"span",48),d(119),a()(),n(120,"div",49),y(121,ve,7,3,"div",50)(122,ge,2,0,"div",51),a()()(),n(123,"div",44)(124,"div",58)(125,"header",59)(126,"h4"),v(127,"i",60),d(128,"Eliminaciones"),a(),n(129,"span",48),d(130),a()(),n(131,"div",49),y(132,ye,7,3,"div",50)(133,fe,2,0,"div",51),a()()()()(),y(134,xe,7,1,"section",61)(135,we,7,1,"section",62),n(136,"section",63)(137,"div",64)(138,"header",20)(139,"h3"),d(140,"Actividades Recientes"),a(),n(141,"div",65)(142,"button",66),C("click",function(){w(e);let r=h();return _(r.clearFilters())}),v(143,"i",67),d(144," Limpiar Filtros "),a()()(),n(145,"div",68)(146,"div",43)(147,"div",69)(148,"select",70),B("ngModelChange",function(r){w(e);let s=h();return R(s.filters.action_type,r)||(s.filters.action_type=r),_(r)}),C("change",function(){w(e);let r=h();return _(r.applyFilters())}),y(149,_e,2,2,"option",71),a()(),n(150,"div",69)(151,"select",70),B("ngModelChange",function(r){w(e);let s=h();return R(s.filters.module,r)||(s.filters.module=r),_(r)}),C("change",function(){w(e);let r=h();return _(r.applyFilters())}),y(152,Ae,2,2,"option",71),a()(),n(153,"div",69)(154,"input",72),B("ngModelChange",function(r){w(e);let s=h();return R(s.filters.date_from,r)||(s.filters.date_from=r),_(r)}),C("change",function(){w(e);let r=h();return _(r.applyFilters())}),a()(),n(155,"div",69)(156,"input",73),B("ngModelChange",function(r){w(e);let s=h();return R(s.filters.date_to,r)||(s.filters.date_to=r),_(r)}),C("change",function(){w(e);let r=h();return _(r.applyFilters())}),a()(),n(157,"div",74)(158,"input",75),B("ngModelChange",function(r){w(e);let s=h();return R(s.filters.search,r)||(s.filters.search=r),_(r)}),C("keyup.enter",function(){w(e);let r=h();return _(r.applyFilters())}),a()()()(),y(159,Se,2,1,"div",76)(160,Ee,2,0,"ng-template",null,3,k),a()(),y(162,ke,2,1,"div",77),a()()}if(i&2){let e=E(74),t=E(81),r=E(161),s=h();o(21),m("ngForOf",dt(48,ee,P(38,Jt,s.stats.todayActivities),P(40,qt,s.stats.weekActivities),P(42,Qt,s.stats.monthActivities),P(44,Zt,s.stats.totalActivities),P(46,te,s.stats.activeUsers))),o(14),c(s.activityTypeStats.CREATE.count),o(2),A("",s.activityTypeStats.CREATE.percentage,"%"),o(8),c(s.activityTypeStats.READ.count),o(2),A("",s.activityTypeStats.READ.percentage,"%"),o(8),c(s.activityTypeStats.UPDATE.count),o(2),A("",s.activityTypeStats.UPDATE.percentage,"%"),o(8),c(s.activityTypeStats.DELETE.count),o(2),A("",s.activityTypeStats.DELETE.percentage,"%"),o(5),m("ngIf",s.activitiesByModule.length)("ngIfElse",e),o(7),m("ngIf",s.mostActiveUsers&&s.mostActiveUsers.length)("ngIfElse",t),o(8),m("ngForOf",s.hourlyStats),o(10),c(s.separatedActivities.CREATE.length),o(2),m("ngForOf",s.separatedActivities.CREATE.slice(0,5)),o(),m("ngIf",s.separatedActivities.CREATE.length===0),o(8),c(s.separatedActivities.READ.length),o(2),m("ngForOf",s.separatedActivities.READ.slice(0,5)),o(),m("ngIf",s.separatedActivities.READ.length===0),o(8),c(s.separatedActivities.UPDATE.length),o(2),m("ngForOf",s.separatedActivities.UPDATE.slice(0,5)),o(),m("ngIf",s.separatedActivities.UPDATE.length===0),o(8),c(s.separatedActivities.DELETE.length),o(2),m("ngForOf",s.separatedActivities.DELETE.slice(0,5)),o(),m("ngIf",s.separatedActivities.DELETE.length===0),o(),m("ngIf",s.dailyChart),o(),m("ngIf",s.moduleChart),o(13),T("ngModel",s.filters.action_type),o(),m("ngForOf",s.actionTypes),o(2),T("ngModel",s.filters.module),o(),m("ngForOf",s.moduleOptions),o(2),T("ngModel",s.filters.date_from),o(2),T("ngModel",s.filters.date_to),o(2),T("ngModel",s.filters.search),o(),m("ngIf",s.recentActivities.length)("ngIfElse",r),o(3),m("ngIf",s.error)}}function Ie(i,p){i&1&&(n(0,"div",5)(1,"div",135)(2,"div",136),d(3,"Cargando estad\xEDsticas de actividades..."),a()()())}var Z=(()=>{let p=class p{get hourlyStats(){let t=this.calculateHourlyActivities();return[{h:"00-06",label:"Madrugada",count:t.dawn,icon:"fa-moon"},{h:"06-12",label:"Ma\xF1ana",count:t.morning,icon:"fa-sun"},{h:"12-18",label:"Tarde",count:t.afternoon,icon:"fa-cloud-sun"},{h:"18-24",label:"Noche",count:t.night,icon:"fa-moon"}]}calculateHourlyActivities(){let t={dawn:0,morning:0,afternoon:0,night:0},r=new Date;return this.recentActivities.forEach(s=>{try{let l=new Date(s.created_at);if(isNaN(l.getTime())){console.warn("Fecha inv\xE1lida:",s.created_at);return}if(l.getFullYear()===r.getFullYear()&&l.getMonth()===r.getMonth()&&l.getDate()===r.getDate()){let g=l.getHours();g>=0&&g<6?t.dawn++:g>=6&&g<12?t.morning++:g>=12&&g<18?t.afternoon++:g>=18&&g<24&&t.night++}}catch(l){console.error("Error procesando actividad:",s,l)}}),t}constructor(t,r){this.userActivityService=t,this.translate=r,this.routes=$,this.todayDate=new Date,this.currentYear=new Date().getFullYear(),this.stats={todayActivities:0,weekActivities:0,monthActivities:0,totalActivities:0,activeUsers:0,mostActiveUser:""},this.loading=!0,this.error=null,this.recentActivities=[],this.activitiesByUser=[],this.activitiesByModule=[],this.activitiesByAction=[],this.separatedActivities={CREATE:[],READ:[],UPDATE:[],DELETE:[]},this.activityTypeStats={CREATE:{count:0,percentage:0,color:"#28a745"},READ:{count:0,percentage:0,color:"#17a2b8"},UPDATE:{count:0,percentage:0,color:"#ffc107"},DELETE:{count:0,percentage:0,color:"#dc3545"}},this.mostActiveUsersByAction={CREATE:[],READ:[],UPDATE:[],DELETE:[]},this.mostActiveUsers=[],this.filters={action_type:"",module:"",date_from:"",date_to:"",search:""},this.dailyChart=null,this.moduleChart=null,this.actionTypes=[{value:"",label:"Todos los tipos"},{value:"create",label:"Crear"},{value:"read",label:"Ver"},{value:"update",label:"Editar"},{value:"delete",label:"Eliminar"},{value:"login",label:"Iniciar sesi\xF3n"},{value:"logout",label:"Cerrar sesi\xF3n"},{value:"export",label:"Exportar"},{value:"import",label:"Importar"}],this.moduleOptions=[{value:"",label:"Todos los m\xF3dulos"},{value:"archive",label:"Archivo"},{value:"users",label:"Usuarios"},{value:"reports",label:"Reportes"},{value:"config",label:"Configuraci\xF3n"},{value:"backup",label:"Respaldos"}]}ngOnInit(){this.loadStats(),this.loadRecentActivities()}loadStats(){this.loading=!0,this.userActivityService.getActivityStats().subscribe({next:t=>{t?.stats&&(this.stats=t.stats),this.loadActivitiesByUser(),this.loadActivitiesByModule(),this.loadActivitiesByAction(),this.loadMostActiveUsers(),this.prepareDailyChart(t?.dailySeries||[]),this.loading=!1},error:t=>{this.error=t?.error?.message||"Error cargando estad\xEDsticas",this.loading=!1}})}loadRecentActivities(){this.userActivityService.getRecentActivities(this.filters,0,100).subscribe({next:t=>{this.recentActivities=t?.activities||t?.data||[],this.processSeparatedActivities()},error:t=>{console.error("Error loading recent activities:",t)}})}loadActivitiesByUser(){this.userActivityService.getActivitiesByUser().subscribe({next:t=>{this.activitiesByUser=t?.data||[]},error:t=>{console.error("Error loading activities by user:",t)}})}loadActivitiesByModule(){this.userActivityService.getActivitiesByModule().subscribe({next:t=>{this.activitiesByModule=t?.data||[],this.prepareModuleChart()},error:t=>{console.error("Error loading activities by module:",t)}})}loadActivitiesByAction(){this.userActivityService.getActivitiesByActionType().subscribe({next:t=>{this.activitiesByAction=(t?.data||[]).map((r,s)=>rt(nt({},r),{color:this.getActionColor(r.action_type,s)}))},error:t=>{console.error("Error loading activities by action:",t)}})}loadMostActiveUsers(){this.userActivityService.getMostActiveUsers(10).subscribe({next:t=>{this.mostActiveUsers=t?.data||[]},error:t=>{console.error("Error loading most active users:",t)}})}prepareDailyChart(t){let r=new Date,s=[];for(let g=6;g>=0;g--){let D=new Date(r);D.setDate(r.getDate()-g);let b=D.toISOString().substring(0,10);s.push({date:b,count:0})}Array.isArray(t)&&t.forEach(g=>{let D=(g.date||g.day||g.fecha||"").toString().substring(0,10),b=s.find(H=>H.date===D);b&&(b.count=Number(g.count||g.total||g.value||0))});let l=s.map(g=>this.formatShortDate(g.date)),x=s.map(g=>g.count);this.dailyChart={series:[{name:"Actividades",data:x}],chart:{type:"area",height:280,sparkline:{enabled:!1},toolbar:{show:!1},animations:{enabled:!0,speed:600},background:"transparent",foreColor:"#495057"},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:3,colors:["#3498db"]},xaxis:{categories:l,labels:{style:{colors:Array(l.length).fill("#6c757d"),fontSize:"12px",fontWeight:400}},axisBorder:{show:!0,color:"#dee2e6"},axisTicks:{show:!0,color:"#dee2e6"}},yaxis:{labels:{style:{colors:["#6c757d"],fontSize:"12px",fontWeight:400}},forceNiceScale:!0,min:0},grid:{borderColor:"#e9ecef",strokeDashArray:2,xaxis:{lines:{show:!0}},yaxis:{lines:{show:!0}}},tooltip:{theme:"light",style:{fontSize:"12px",fontFamily:"Segoe UI, sans-serif"},x:{show:!0},y:{formatter:g=>g+" actividades"},marker:{show:!0}},fill:{type:"gradient",gradient:{shade:"light",type:"vertical",shadeIntensity:.3,gradientToColors:["rgba(52, 152, 219, 0.1)"],opacityFrom:.5,opacityTo:.1,stops:[0,100]}}}}prepareModuleChart(){if(!this.activitiesByModule.length)return;let t=this.activitiesByModule.map(s=>s.module),r=this.activitiesByModule.map(s=>s.count);this.moduleChart={series:[{name:"Actividades",data:r}],chart:{type:"bar",height:320,toolbar:{show:!1},animations:{enabled:!0,speed:600},background:"transparent",foreColor:"#495057"},plotOptions:{bar:{horizontal:!0,borderRadius:4,borderRadiusApplication:"end",barHeight:"60%",dataLabels:{position:"top"}}},dataLabels:{enabled:!0,style:{colors:["#ffffff"],fontWeight:600,fontSize:"11px"}},stroke:{width:0},xaxis:{categories:t,labels:{style:{colors:Array(t.length).fill("#6c757d"),fontSize:"12px",fontWeight:400}},axisBorder:{show:!0,color:"#dee2e6"},axisTicks:{show:!0,color:"#dee2e6"}},yaxis:{labels:{style:{colors:["#6c757d"],fontSize:"12px",fontWeight:400}}},grid:{borderColor:"#e9ecef",strokeDashArray:2,xaxis:{lines:{show:!0}},yaxis:{lines:{show:!0}}},tooltip:{theme:"light",style:{fontSize:"12px",fontFamily:"Segoe UI, sans-serif"},y:{formatter:s=>s+" actividades"},marker:{show:!0}},fill:{type:"gradient",gradient:{shade:"light",type:"horizontal",shadeIntensity:.2,gradientToColors:["#2980b9"],opacityFrom:.8,opacityTo:.6,stops:[0,100]},colors:["#3498db"]}}}applyFilters(){this.loadRecentActivities()}clearFilters(){this.filters={action_type:"",module:"",date_from:"",date_to:"",search:""},this.loadRecentActivities()}getActionColor(t,r){return{create:"#28a745",read:"#17a2b8",update:"#ffc107",delete:"#dc3545",login:"#007bff",logout:"#6c757d",export:"#e83e8c",import:"#20c997"}[t]||["#6f42c1","#fd7e14","#e83e8c"][r%3]}formatShortDate(t){return new Date(t+"T00:00:00").toLocaleDateString("es-MX",{day:"2-digit",month:"2-digit"})}formatDateTime(t){return new Date(t).toLocaleDateString("es-MX",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}getActionTypeLabel(t){let r=this.actionTypes.find(s=>s.value===t);return r?r.label:t}getModuleLabel(t){let r=this.moduleOptions.find(s=>s.value===t);return r?r.label:t}getActionIcon(t){return{create:"fa-plus",read:"fa-eye",update:"fa-edit",delete:"fa-trash",login:"fa-sign-in-alt",logout:"fa-sign-out-alt",export:"fa-download",import:"fa-upload"}[t]||"fa-cog"}getActionClass(t){return{create:"badge-success",read:"badge-info",update:"badge-warning",delete:"badge-danger",login:"badge-primary",logout:"badge-secondary",export:"badge-purple",import:"badge-teal"}[t]||"badge-secondary"}processSeparatedActivities(){this.separatedActivities={CREATE:[],READ:[],UPDATE:[],DELETE:[]},this.activityTypeStats={CREATE:{count:0,percentage:0,color:"#28a745"},READ:{count:0,percentage:0,color:"#17a2b8"},UPDATE:{count:0,percentage:0,color:"#ffc107"},DELETE:{count:0,percentage:0,color:"#dc3545"}},this.recentActivities.forEach(r=>{let s=r.action_type?.toUpperCase();this.separatedActivities[s]&&(this.separatedActivities[s].push(r),this.activityTypeStats[s].count++)});let t=this.recentActivities.length;t>0&&Object.keys(this.activityTypeStats).forEach(r=>{let s=r;this.activityTypeStats[s].percentage=Math.round(this.activityTypeStats[s].count/t*100)}),this.processMostActiveUsersByAction()}processMostActiveUsersByAction(){Object.keys(this.separatedActivities).forEach(t=>{let r=this.separatedActivities[t],s={};r.forEach(l=>{let x=l.user_name;s[x]||(s[x]={count:0,user_name:x,role:l.role||"Usuario"}),s[x].count++}),this.mostActiveUsersByAction[t]=Object.values(s).sort((l,x)=>x.count-l.count).slice(0,5)})}getActivityPercentage(t){return this.activityTypeStats[t]?.percentage||0}getActivityColor(t){return this.activityTypeStats[t]?.color||"#6c757d"}};p.\u0275fac=function(r){return new(r||p)(M(Ct),M(Y))},p.\u0275cmp=L({type:p,selectors:[["app-user-activity-dashboard"]],decls:3,vars:2,consts:[["loadingTpl",""],["noModules",""],["noUsers",""],["noActivities",""],["class","page-wrapper",4,"ngIf","ngIfElse"],[1,"page-wrapper"],[1,"content","activity-dash-new"],[1,"breadcrumb","mb-3"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"hero","mb-4"],[1,"hero-inner"],[1,"hero-text"],[1,"hero-meta"],[1,"btn","btn-refresh",3,"click"],[1,"fa","fa-rotate"],[1,"kpi-grid","mb-4"],["class","kpi-card",4,"ngFor","ngForOf"],[1,"grid-panels","mb-4"],[1,"panel","panel-activity-stats"],[1,"panel-hd"],[1,"activity-types-grid"],[1,"activity-type-card","create-card"],[1,"activity-type-icon"],[1,"fa","fa-plus"],[1,"activity-type-body"],[1,"activity-type-label"],[1,"activity-type-count"],[1,"activity-type-percentage"],[1,"activity-type-card","read-card"],[1,"fa","fa-eye"],[1,"activity-type-card","update-card"],[1,"fa","fa-edit"],[1,"activity-type-card","delete-card"],[1,"fa","fa-trash"],[1,"panel","panel-modules"],["class","modules-list",4,"ngIf","ngIfElse"],[1,"panel","panel-top-users"],["class","users-list",4,"ngIf","ngIfElse"],[1,"panel","panel-hourly-stats"],[1,"hourly-stats"],["class","hour-item",4,"ngFor","ngForOf"],[1,"separated-activities","mb-4"],[1,"row"],[1,"col-lg-6","col-xl-3","mb-4"],[1,"panel","panel-create"],[1,"panel-hd","create-header"],[1,"fa","fa-plus","me-2"],[1,"activity-count-badge"],[1,"activities-list-compact"],["class","activity-item-compact",4,"ngFor","ngForOf"],["class","empty-compact",4,"ngIf"],[1,"panel","panel-read"],[1,"panel-hd","read-header"],[1,"fa","fa-eye","me-2"],[1,"panel","panel-update"],[1,"panel-hd","update-header"],[1,"fa","fa-edit","me-2"],[1,"panel","panel-delete"],[1,"panel-hd","delete-header"],[1,"fa","fa-trash","me-2"],["class","daily-chart",4,"ngIf"],["class","module-chart",4,"ngIf"],[1,"recent-activities"],[1,"panel"],[1,"panel-actions"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"fa","fa-times"],[1,"filters-row","mb-3"],[1,"col-md-2"],[1,"form-control","form-control-sm",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","date","placeholder","Desde",1,"form-control","form-control-sm",3,"ngModelChange","change","ngModel"],["type","date","placeholder","Hasta",1,"form-control","form-control-sm",3,"ngModelChange","change","ngModel"],[1,"col-md-4"],["type","text","placeholder","Buscar en descripciones...",1,"form-control","form-control-sm",3,"ngModelChange","keyup.enter","ngModel"],["class","activities-list",4,"ngIf","ngIfElse"],["class","alert alert-danger py-2 px-3 small mb-0",4,"ngIf"],[1,"kpi-card"],[1,"kpi-icon"],[1,"fa",3,"ngClass"],[1,"kpi-body"],[1,"kpi-label"],[1,"kpi-value"],[1,"modules-list"],["class","module-item",4,"ngFor","ngForOf"],[1,"module-item"],[1,"module-rank"],[1,"module-body"],[1,"module-name",3,"title"],[1,"module-meter"],[1,"meter-fill"],[1,"module-count"],[1,"empty"],[1,"users-list"],["class","user-item",4,"ngFor","ngForOf"],[1,"user-item"],[1,"user-rank"],[1,"user-body"],[1,"user-name",3,"title"],[1,"user-meter"],[1,"meter-fill","user-fill"],[1,"user-count"],[1,"hour-item"],[1,"hour-icon"],[1,"hour-body"],[1,"hour-label"],[1,"hour-range"],[1,"hour-count"],[1,"activity-item-compact"],[1,"activity-user"],[1,"activity-desc"],[1,"activity-time"],[1,"empty-compact"],[1,"daily-chart"],[1,"panel","panel-chart"],[1,"chart-wrapper"],[3,"series","chart","xaxis","yaxis","dataLabels","stroke","grid","tooltip","fill",4,"ngIf"],[3,"series","chart","xaxis","yaxis","dataLabels","stroke","grid","tooltip","fill"],[1,"module-chart"],[1,"chart-wrapper",2,"height","320px !important"],[3,"series","chart","xaxis","yaxis","dataLabels","plotOptions","stroke","grid","tooltip","fill",4,"ngIf"],[3,"series","chart","xaxis","yaxis","dataLabels","plotOptions","stroke","grid","tooltip","fill"],[3,"value"],[1,"activities-list"],["class","activity-item",4,"ngFor","ngForOf"],[1,"activity-item"],[1,"activity-icon"],[1,"activity-content"],[1,"activity-header"],[1,"badge",3,"ngClass"],[1,"activity-module"],[1,"activity-description"],[1,"activity-meta"],[1,"alert","alert-danger","py-2","px-3","small","mb-0"],[1,"content"],[1,"text-center","py-5","text-muted"]],template:function(r,s){if(r&1&&y(0,De,163,54,"div",4)(1,Ie,4,0,"ng-template",null,0,k),r&2){let l=E(2);m("ngIf",!s.loading)("ngIfElse",l)}},dependencies:[U,W,j,G,O,J,K,X,wt,xt,bt,gt,ut,yt,ft],styles:[`.activity-dash-new{padding-left:clamp(.75rem,1.2vw,1rem)!important;padding-right:clamp(.75rem,1.8vw,1.25rem)!important;overflow-x:hidden!important;background:transparent!important;min-height:auto!important}.activity-dash-new *{box-sizing:border-box}.activity-dash-new ul.breadcrumb{background:transparent!important;padding:0!important;margin:0 0 .75rem!important;list-style:none!important;display:flex!important;gap:.5rem;font-size:.8rem!important;text-transform:none!important;border:none!important;border-radius:0!important}.activity-dash-new ul.breadcrumb li{opacity:.85;color:#bcd0f0!important;background:transparent!important;border:none!important;padding:0!important;margin:0!important}.activity-dash-new ul.breadcrumb .active{opacity:1;color:#e6eeff!important;background:transparent!important}.activity-dash-new ul.breadcrumb a{color:#8fb4ff!important;text-decoration:none!important;background:transparent!important;border:none!important;padding:0!important}.activity-dash-new .hero{position:relative!important;border-radius:16px!important;padding:1.5rem 1.25rem!important;background:linear-gradient(135deg,#1f2432,#12151d)!important;border:1px solid #262c3a!important;overflow:hidden!important;margin-bottom:1.5rem!important;box-shadow:none!important}.activity-dash-new .hero .hero-inner{display:flex!important;align-items:flex-end!important;justify-content:space-between!important;gap:1rem!important}.activity-dash-new .hero .hero-text h1{margin:0 0 .35rem!important;font-weight:700!important;font-size:1.5rem!important;color:#dfe7ff!important;background:none!important;-webkit-text-fill-color:initial!important;text-shadow:none!important}.activity-dash-new .hero .hero-text h1 span{color:#6ea8ff!important;background:none!important;-webkit-text-fill-color:initial!important}.activity-dash-new .hero .hero-text p{margin:0!important;color:#9fb4d6!important;opacity:.9!important;font-size:.95rem!important;text-shadow:none!important}.activity-dash-new .hero .btn-refresh{background:#222633!important;border:1px solid #2e3344!important;color:#6ea8ff!important;border-radius:10px!important;width:42px!important;height:42px!important;display:grid!important;place-items:center!important;transition:.2s!important;box-shadow:none!important;padding:0!important}.activity-dash-new .hero .btn-refresh:hover{background:#2a3040!important;transform:none!important;box-shadow:none!important}.activity-dash-new .hero .btn-refresh:focus{box-shadow:none!important;outline:none!important}.activity-dash-new .kpi-grid{display:grid!important;gap:1rem!important;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))!important;margin-bottom:1.5rem!important}.activity-dash-new .kpi-grid .kpi-card{position:relative!important;display:flex!important;align-items:center!important;gap:.9rem!important;background:#171a22!important;border:1px solid #232936!important;border-radius:14px!important;padding:1rem 1.1rem!important;transition:transform .2s ease,box-shadow .2s ease!important;box-shadow:none!important;overflow:hidden!important;height:100%!important;min-height:90px!important;max-height:120px!important}.activity-dash-new .kpi-grid .kpi-card:hover{transform:translateY(-3px)!important;box-shadow:0 10px 18px -10px #0009!important}.activity-dash-new .kpi-grid .kpi-card .kpi-icon{width:48px!important;height:48px!important;flex:0 0 48px!important;border-radius:12px!important;display:grid!important;place-items:center!important;background:#1e2230!important;color:#6ea8ff!important;box-shadow:0 0 0 1px #2c3442 inset!important;flex-shrink:0!important}.activity-dash-new .kpi-grid .kpi-card .kpi-icon i{font-size:1.2rem!important;color:#6ea8ff!important}.activity-dash-new .kpi-grid .kpi-card .kpi-body{overflow:hidden!important;flex:1!important;min-width:0!important}.activity-dash-new .kpi-grid .kpi-card .kpi-body .kpi-label{font-size:.8rem!important;font-weight:600!important;color:#9fb4d6!important;margin-bottom:.25rem!important;text-transform:none!important;letter-spacing:normal!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important;line-height:1.2!important;max-height:1.2rem!important}.activity-dash-new .kpi-grid .kpi-card .kpi-body .kpi-label small{margin-left:.35rem!important;opacity:.8!important;color:#9fb4d6!important}.activity-dash-new .kpi-grid .kpi-card .kpi-body .kpi-value{font-size:1.9rem!important;font-weight:800!important;line-height:1!important;letter-spacing:-.5px!important;color:#e8efff!important;background:none!important;-webkit-text-fill-color:initial!important;-webkit-background-clip:initial!important;background-clip:initial!important;text-shadow:none!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important}.activity-dash-new .grid-panels{display:grid!important;gap:1.2rem!important;grid-template-columns:repeat(auto-fit,minmax(320px,1fr))!important;align-items:start!important;margin-bottom:1.5rem!important}.activity-dash-new .panel{background:#171a22!important;border:1px solid #232936!important;border-radius:16px!important;padding:1rem 1.1rem 1.1rem!important;box-shadow:none!important}.activity-dash-new .panel .panel-hd{padding:0!important;border-bottom:none!important;background:transparent!important}.activity-dash-new .panel .panel-hd h3{margin:0 0 .75rem!important;font-size:.95rem!important;text-transform:uppercase!important;letter-spacing:.6px!important;color:#9fb4d6!important;font-weight:700!important;background:transparent!important;border:none!important;padding:0!important}.activity-dash-new .panel-activity-stats{grid-column:1/-1!important}.activity-dash-new .panel-activity-stats .activity-types-grid{display:grid!important;grid-template-columns:repeat(auto-fit,minmax(200px,1fr))!important;gap:1rem!important;padding:1rem!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card{background:#12141b!important;border:1px solid #222836!important;border-radius:12px!important;padding:1.5rem!important;text-align:center!important;transition:all .3s ease!important;box-shadow:none!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card:hover{transform:translateY(-3px)!important;box-shadow:0 8px 20px #0000004d!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card .activity-type-icon{width:50px!important;height:50px!important;border-radius:50%!important;display:flex!important;align-items:center!important;justify-content:center!important;margin:0 auto 1rem!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card .activity-type-icon i{color:#fff!important;font-size:1.25rem!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card.create-card .activity-type-icon{background:linear-gradient(135deg,#28a745,#20c997)!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card.read-card .activity-type-icon{background:linear-gradient(135deg,#17a2b8,#007bff)!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card.update-card .activity-type-icon{background:linear-gradient(135deg,#ffc107,#fd7e14)!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card.delete-card .activity-type-icon{background:linear-gradient(135deg,#dc3545,#e83e8c)!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card .activity-type-label{font-size:.875rem!important;font-weight:600!important;color:#9fb4d6!important;margin-bottom:.5rem!important;text-transform:uppercase!important;letter-spacing:.5px!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card .activity-type-count{font-size:2rem!important;font-weight:700!important;color:#e8efff!important;margin-bottom:.25rem!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card .activity-type-percentage{font-size:.875rem!important;color:#9fb4d6!important;font-weight:500!important}.activity-dash-new .panel-modules{overflow:hidden!important}.activity-dash-new .panel-modules .modules-list{display:flex!important;flex-direction:column!important;gap:.6rem!important;padding:0!important;margin:0!important}.activity-dash-new .panel-modules .modules-list .module-item{display:grid!important;grid-template-columns:32px 1fr 50px!important;gap:.75rem!important;align-items:center!important;background:#12141b!important;border:1px solid #222836!important;padding:.6rem .7rem!important;border-radius:12px!important;overflow:hidden!important}.activity-dash-new .panel-modules .modules-list .module-item .module-rank{width:32px!important;height:32px!important;border-radius:10px!important;display:grid!important;place-items:center!important;background:#1d212a!important;color:#6ea8ff!important;font-weight:700!important;box-shadow:0 0 0 1px #2a3140 inset!important;flex-shrink:0!important}.activity-dash-new .panel-modules .modules-list .module-item .module-body{min-width:0!important;overflow:hidden!important}.activity-dash-new .panel-modules .modules-list .module-item .module-body .module-name{color:#d9e2f5!important;font-weight:600!important;font-size:.85rem!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important;max-width:100%!important;line-height:1.2!important;margin-bottom:.25rem!important}.activity-dash-new .panel-modules .modules-list .module-item .module-body .module-meter{height:6px!important;background:#212730!important;border-radius:4px!important;overflow:hidden!important;position:relative!important;width:100%!important}.activity-dash-new .panel-modules .modules-list .module-item .module-body .module-meter .meter-fill{position:absolute!important;top:0!important;left:0!important;height:100%!important;background:linear-gradient(90deg,#6ea8ff,#2dd6c7)!important;transition:width .3s ease!important;border-radius:4px!important}.activity-dash-new .panel-modules .modules-list .module-item .module-count{text-align:right!important;color:#9fb4d6!important;font-weight:700!important;flex-shrink:0!important;font-size:.875rem!important}.activity-dash-new .panel-modules .empty{text-align:center!important;padding:2rem!important;color:#9fb4d6!important;font-style:italic!important}.activity-dash-new .panel-top-users{overflow:hidden!important}.activity-dash-new .panel-top-users .users-list{display:flex!important;flex-direction:column!important;gap:.6rem!important;padding:0!important;margin:0!important}.activity-dash-new .panel-top-users .users-list .user-item{display:grid!important;grid-template-columns:32px 1fr 50px!important;gap:.75rem!important;align-items:center!important;background:#12141b!important;border:1px solid #222836!important;padding:.6rem .7rem!important;border-radius:12px!important;overflow:hidden!important}.activity-dash-new .panel-top-users .users-list .user-item .user-rank{width:32px!important;height:32px!important;border-radius:10px!important;display:grid!important;place-items:center!important;background:#1d212a!important;color:#20c997!important;font-weight:700!important;box-shadow:0 0 0 1px #2a3140 inset!important;flex-shrink:0!important}.activity-dash-new .panel-top-users .users-list .user-item .user-body{min-width:0!important;overflow:hidden!important}.activity-dash-new .panel-top-users .users-list .user-item .user-body .user-name{font-weight:600!important;color:#d9e2f5!important;font-size:.85rem!important;margin-bottom:.35rem!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important}.activity-dash-new .panel-top-users .users-list .user-item .user-body .user-meter{height:5px!important;background:#1e2230!important;border-radius:3px!important;overflow:hidden!important;position:relative!important;width:100%!important}.activity-dash-new .panel-top-users .users-list .user-item .user-body .user-meter .user-fill{position:absolute!important;top:0!important;left:0!important;height:100%!important;background:linear-gradient(90deg,#20c997,#17a2b8)!important;transition:width .3s ease!important;border-radius:4px!important}.activity-dash-new .panel-top-users .users-list .user-item .user-count{text-align:right!important;color:#9fb4d6!important;font-weight:700!important;flex-shrink:0!important;font-size:.875rem!important}.activity-dash-new .panel-top-users .empty{text-align:center!important;padding:2rem!important;color:#9fb4d6!important;font-style:italic!important}.activity-dash-new .panel-hourly-stats{overflow:hidden!important}.activity-dash-new .panel-hourly-stats .hourly-stats{display:flex!important;flex-direction:column!important;gap:.8rem!important;padding:0!important;margin:0!important}.activity-dash-new .panel-hourly-stats .hourly-stats .hour-item{display:grid!important;grid-template-columns:40px 1fr 50px!important;gap:.75rem!important;align-items:center!important;background:#12141b!important;border:1px solid #222836!important;padding:.8rem .7rem!important;border-radius:12px!important;overflow:hidden!important}.activity-dash-new .panel-hourly-stats .hourly-stats .hour-item .hour-icon{width:40px!important;height:40px!important;border-radius:12px!important;display:grid!important;place-items:center!important;background:#1d212a!important;color:#ffc107!important;font-size:1rem!important;box-shadow:0 0 0 1px #2a3140 inset!important;flex-shrink:0!important}.activity-dash-new .panel-hourly-stats .hourly-stats .hour-item .hour-body{min-width:0!important;overflow:hidden!important}.activity-dash-new .panel-hourly-stats .hourly-stats .hour-item .hour-body .hour-label{font-weight:600!important;color:#d9e2f5!important;font-size:.85rem!important;margin-bottom:.2rem!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important}.activity-dash-new .panel-hourly-stats .hourly-stats .hour-item .hour-body .hour-range{color:#9fb4d6!important;font-size:.75rem!important;font-weight:500!important;opacity:.8!important}.activity-dash-new .panel-hourly-stats .hourly-stats .hour-item .hour-count{text-align:right!important;color:#ffc107!important;font-weight:700!important;flex-shrink:0!important;font-size:.875rem!important}.activity-dash-new .separated-activities{margin-bottom:1.5rem!important}.activity-dash-new .separated-activities .panel{background:#171a22!important;border:1px solid #232936!important;border-radius:16px!important;overflow:hidden!important;box-shadow:none!important;height:auto!important;min-height:0!important}.activity-dash-new .separated-activities .panel .panel-hd{padding:1rem 1.5rem!important;display:flex!important;justify-content:space-between!important;align-items:center!important;border-bottom:1px solid #262c3a!important;background:transparent!important;flex-shrink:0!important}.activity-dash-new .separated-activities .panel .panel-hd h4{margin:0!important;font-size:1rem!important;font-weight:600!important;display:flex!important;align-items:center!important;color:#9fb4d6!important;background:transparent!important;border:none!important;padding:0!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important}.activity-dash-new .separated-activities .panel .panel-hd h4 i{margin-right:.5rem!important;flex-shrink:0!important}.activity-dash-new .separated-activities .panel .panel-hd .activity-count-badge{background:#6ea8ff!important;color:#fff!important;padding:.25rem .75rem!important;border-radius:20px!important;font-size:.75rem!important;font-weight:600!important;border:none!important;flex-shrink:0!important}.activity-dash-new .separated-activities .panel .panel-hd.create-header{background:#28a7451a!important}.activity-dash-new .separated-activities .panel .panel-hd.create-header h4{color:#28a745!important}.activity-dash-new .separated-activities .panel .panel-hd.create-header .activity-count-badge{background:#28a745!important}.activity-dash-new .separated-activities .panel .panel-hd.read-header{background:#17a2b81a!important}.activity-dash-new .separated-activities .panel .panel-hd.read-header h4{color:#17a2b8!important}.activity-dash-new .separated-activities .panel .panel-hd.read-header .activity-count-badge{background:#17a2b8!important}.activity-dash-new .separated-activities .panel .panel-hd.update-header{background:#ffc1071a!important}.activity-dash-new .separated-activities .panel .panel-hd.update-header h4{color:#ffc107!important}.activity-dash-new .separated-activities .panel .panel-hd.update-header .activity-count-badge{background:#ffc107!important;color:#212529!important}.activity-dash-new .separated-activities .panel .panel-hd.delete-header{background:#dc35451a!important}.activity-dash-new .separated-activities .panel .panel-hd.delete-header h4{color:#dc3545!important}.activity-dash-new .separated-activities .panel .panel-hd.delete-header .activity-count-badge{background:#dc3545!important}.activity-dash-new .separated-activities .panel .activities-list-compact{padding:1rem!important;max-height:250px!important;overflow-y:auto!important;overflow-x:hidden!important}.activity-dash-new .separated-activities .panel .activities-list-compact .activity-item-compact{padding:.75rem 0!important;border-bottom:1px solid #262c3a!important;background:transparent!important;overflow:hidden!important}.activity-dash-new .separated-activities .panel .activities-list-compact .activity-item-compact:last-child{border-bottom:none!important}.activity-dash-new .separated-activities .panel .activities-list-compact .activity-item-compact .activity-user{font-weight:600!important;color:#d9e2f5!important;font-size:.875rem!important;margin-bottom:.25rem!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important}.activity-dash-new .separated-activities .panel .activities-list-compact .activity-item-compact .activity-desc{color:#9fb4d6!important;font-size:.8rem!important;line-height:1.3!important;margin-bottom:.5rem!important;display:-webkit-box!important;-webkit-line-clamp:2!important;line-clamp:2!important;-webkit-box-orient:vertical!important;overflow:hidden!important;word-break:break-word!important;max-height:2.6rem!important}.activity-dash-new .separated-activities .panel .activities-list-compact .activity-item-compact .activity-time{color:#9fb4d6!important;font-size:.75rem!important;font-weight:500!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important}.activity-dash-new .separated-activities .panel .activities-list-compact .empty-compact{text-align:center!important;color:#9fb4d6!important;font-style:italic!important;padding:2rem 1rem!important;font-size:.875rem!important}.activity-dash-new .panel-chart{background:#171a22!important;border:1px solid #232936!important;border-radius:16px!important;margin-bottom:1.5rem!important;box-shadow:none!important;overflow:hidden!important;position:relative!important}.activity-dash-new .panel-chart .panel-hd{padding:1rem 1.1rem 0!important;background:transparent!important;border-bottom:none!important}.activity-dash-new .panel-chart .panel-hd h3{margin:0 0 .75rem!important;font-size:.95rem!important;text-transform:uppercase!important;letter-spacing:.6px!important;color:#9fb4d6!important;font-weight:700!important;background:transparent!important;border:none!important;padding:0!important}.activity-dash-new .panel-chart .chart-wrapper{padding:1rem!important;position:relative!important;width:100%!important;height:280px!important;overflow:hidden!important}.activity-dash-new .panel-chart .chart-wrapper apx-chart{display:block!important;width:100%!important;height:100%!important;max-width:100%!important;max-height:100%!important;overflow:hidden!important;position:relative!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-canvas{background:transparent!important;max-width:100%!important;max-height:100%!important;overflow:hidden!important;position:relative!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-svg{max-width:100%!important;max-height:100%!important;overflow:hidden!important;width:100%!important;height:100%!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-inner{overflow:hidden!important;max-width:100%!important;max-height:100%!important}.activity-dash-new .panel-chart .chart-wrapper svg,.activity-dash-new .panel-chart .chart-wrapper foreignObject{max-width:100%!important;max-height:100%!important;overflow:hidden!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-tooltip{background:#1e222b!important;border:1px solid #2c3240!important;color:#d9e2f5!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-tooltip .apexcharts-tooltip-title{background:#171b22!important;border-bottom:1px solid #2c3240!important;color:#d9e2f5!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-legend{color:#d9e2f5!important;max-width:100%!important;overflow:hidden!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-legend .apexcharts-legend-series{overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-xaxis-label,.activity-dash-new .panel-chart .chart-wrapper .apexcharts-yaxis-label{fill:#9fb4d6!important;font-size:11px!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-gridline{stroke:#262c3a!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-text{fill:#9fb4d6!important;font-size:11px!important;overflow:hidden!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-datalabel{fill:#d9e2f5!important;font-size:10px!important;overflow:hidden!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-bar-series{overflow:hidden!important}.activity-dash-new .panel-chart .chart-wrapper .apexcharts-series,.activity-dash-new .panel-chart .chart-wrapper .apexcharts-data-labels{overflow:hidden!important;max-width:100%!important}.activity-dash-new .recent-activities .panel{background:#171a22!important;border:1px solid #232936!important;border-radius:16px!important;box-shadow:none!important}.activity-dash-new .recent-activities .panel .panel-hd{padding:1.5rem 1.5rem 1rem!important;border-bottom:1px solid #262c3a!important;display:flex!important;justify-content:space-between!important;align-items:center!important;background:transparent!important}.activity-dash-new .recent-activities .panel .panel-hd h3{margin:0!important;font-size:.95rem!important;text-transform:uppercase!important;letter-spacing:.6px!important;color:#9fb4d6!important;font-weight:700!important;background:transparent!important;border:none!important;padding:0!important}.activity-dash-new .recent-activities .panel .panel-hd .panel-actions .btn{background:#222633!important;border:1px solid #2e3344!important;color:#6ea8ff!important;border-radius:8px!important;padding:.375rem .75rem!important;font-size:.875rem!important;box-shadow:none!important}.activity-dash-new .recent-activities .panel .panel-hd .panel-actions .btn:hover{background:#2a3040!important;transform:none!important;box-shadow:none!important}.activity-dash-new .recent-activities .panel .panel-hd .panel-actions .btn:focus{box-shadow:none!important;outline:none!important}.activity-dash-new .recent-activities .panel .filters-row{padding:1rem 1.5rem 0!important}.activity-dash-new .recent-activities .panel .filters-row .form-control{background:#12141b!important;border:1px solid #222836!important;color:#d9e2f5!important;border-radius:8px!important;box-shadow:none!important}.activity-dash-new .recent-activities .panel .filters-row .form-control:focus{background:#12141b!important;border-color:#6ea8ff!important;color:#d9e2f5!important;box-shadow:0 0 0 .2rem #6ea8ff40!important;outline:none!important}.activity-dash-new .recent-activities .panel .filters-row .form-control option{background:#12141b!important;color:#d9e2f5!important}.activity-dash-new .recent-activities .panel .activities-list{padding:1rem 1.5rem 1.5rem!important;max-height:500px!important;overflow-y:auto!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item{display:flex!important;align-items:flex-start!important;padding:1rem 0!important;border-bottom:1px solid #262c3a!important;background:transparent!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item:last-child{border-bottom:none!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item .activity-icon{width:40px!important;height:40px!important;background:#1e2230!important;border-radius:8px!important;display:flex!important;align-items:center!important;justify-content:center!important;margin-right:1rem!important;flex-shrink:0!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item .activity-icon i{color:#6ea8ff!important;font-size:1rem!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item .activity-content{flex:1!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item .activity-content .activity-header{display:flex!important;align-items:center!important;margin-bottom:.5rem!important;flex-wrap:wrap!important;gap:.5rem!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item .activity-content .activity-header .activity-user{font-weight:600!important;color:#d9e2f5!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item .activity-content .activity-header .badge{font-size:.75rem!important;padding:.25rem .5rem!important;border-radius:4px!important;border:none!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item .activity-content .activity-header .activity-module{font-size:.875rem!important;color:#9fb4d6!important;background:#12141b!important;padding:.25rem .5rem!important;border-radius:4px!important;border:1px solid #222836!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item .activity-content .activity-description{color:#9fb4d6!important;margin-bottom:.5rem!important;line-height:1.4!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item .activity-content .activity-meta{display:flex!important;gap:1rem!important;font-size:.75rem!important;color:#9fb4d6!important}.activity-dash-new .recent-activities .panel .activities-list .activity-item .activity-content .activity-meta .activity-time{font-weight:500!important}.activity-dash-new .empty{text-align:center!important;padding:2rem!important;color:#9fb4d6!important;font-style:italic!important}.activity-dash-new .badge-success{background-color:#28a745!important;color:#fff!important}.activity-dash-new .badge-info{background-color:#17a2b8!important;color:#fff!important}.activity-dash-new .badge-warning{background-color:#ffc107!important;color:#212529!important}.activity-dash-new .badge-danger{background-color:#dc3545!important;color:#fff!important}.activity-dash-new .badge-primary{background-color:#007bff!important;color:#fff!important}.activity-dash-new .badge-secondary{background-color:#6c757d!important;color:#fff!important}.activity-dash-new .badge-purple{background-color:#6f42c1!important;color:#fff!important}.activity-dash-new .badge-teal{background-color:#20c997!important;color:#fff!important}.activity-dash-new .module-chart .chart-wrapper,.activity-dash-new .daily-chart .chart-wrapper{position:relative!important;width:100%!important;max-width:100%!important;overflow:hidden!important;contain:layout style!important}.activity-dash-new .module-chart .chart-wrapper *,.activity-dash-new .daily-chart .chart-wrapper *{max-width:100%!important;overflow:hidden!important}.activity-dash-new .module-chart .chart-wrapper .apexcharts-canvas,.activity-dash-new .daily-chart .chart-wrapper .apexcharts-canvas{transform:none!important;position:relative!important;left:0!important;top:0!important}.activity-dash-new .module-chart .chart-wrapper .apexcharts-bar-goals-markers,.activity-dash-new .module-chart .chart-wrapper .apexcharts-bar-series,.activity-dash-new .module-chart .chart-wrapper .apexcharts-series,.activity-dash-new .daily-chart .chart-wrapper .apexcharts-bar-goals-markers,.activity-dash-new .daily-chart .chart-wrapper .apexcharts-bar-series,.activity-dash-new .daily-chart .chart-wrapper .apexcharts-series{transform:none!important;contain:layout!important}.activity-dash-new .module-chart .chart-wrapper .apexcharts-yaxis-texts-g,.activity-dash-new .module-chart .chart-wrapper .apexcharts-xaxis-texts-g,.activity-dash-new .daily-chart .chart-wrapper .apexcharts-yaxis-texts-g,.activity-dash-new .daily-chart .chart-wrapper .apexcharts-xaxis-texts-g{overflow:hidden!important}.activity-dash-new .module-chart .chart-wrapper .apexcharts-yaxis-texts-g text,.activity-dash-new .module-chart .chart-wrapper .apexcharts-xaxis-texts-g text,.activity-dash-new .daily-chart .chart-wrapper .apexcharts-yaxis-texts-g text,.activity-dash-new .daily-chart .chart-wrapper .apexcharts-xaxis-texts-g text{max-width:120px!important;overflow:hidden!important;text-overflow:ellipsis!important}.activity-dash-new .row{margin-left:0!important;margin-right:0!important}.activity-dash-new .col-lg-6,.activity-dash-new .col-xl-3,.activity-dash-new .col-md-2,.activity-dash-new .col-md-4{padding-left:.75rem!important;padding-right:.75rem!important}.activity-dash-new button,.activity-dash-new .btn,.activity-dash-new input,.activity-dash-new select,.activity-dash-new .form-control,.activity-dash-new .panel,.activity-dash-new .kpi-card,.activity-dash-new .activity-type-card,.activity-dash-new .module-item,.activity-dash-new .activity-item{font-family:inherit!important;line-height:inherit!important}.activity-dash-new .alert{border-radius:8px!important;border:1px solid #dc3545!important;background-color:#dc35451a!important;color:#dc3545!important;font-size:.875rem!important}@media (max-width: 992px){.activity-dash-new .kpi-grid{grid-template-columns:repeat(auto-fit,minmax(200px,1fr))!important}.activity-dash-new .grid-panels{grid-template-columns:repeat(auto-fit,minmax(280px,1fr))!important}}@media (max-width: 768px){.activity-dash-new .hero .hero-inner{flex-direction:column!important;text-align:center!important;gap:1rem!important}.activity-dash-new .hero .hero-text h1{font-size:1.25rem!important}.activity-dash-new .kpi-grid{grid-template-columns:repeat(auto-fit,minmax(150px,1fr))!important;gap:1rem!important}.activity-dash-new .kpi-grid .kpi-card{padding:1rem!important}.activity-dash-new .kpi-grid .kpi-card .kpi-icon{width:40px!important;height:40px!important}.activity-dash-new .kpi-grid .kpi-card .kpi-icon i{font-size:1rem!important}.activity-dash-new .kpi-grid .kpi-card .kpi-value{font-size:1.5rem!important}.activity-dash-new .grid-panels{grid-template-columns:1fr!important}.activity-dash-new .separated-activities .row .col-lg-6.col-xl-3{margin-bottom:1rem!important}.activity-dash-new .separated-activities .panel .activities-list-compact .activity-item-compact .activity-desc{-webkit-line-clamp:1!important;line-clamp:1!important}.activity-dash-new .panel-activity-stats .activity-types-grid{grid-template-columns:repeat(2,1fr)!important;gap:.75rem!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card{padding:1rem!important}.activity-dash-new .panel-activity-stats .activity-types-grid .activity-type-card .activity-type-count{font-size:1.5rem!important}}
`],encapsulation:2});let i=p;return i})();var Oe=[{path:"",redirectTo:"archive",pathMatch:"full"},{path:"archive",component:Q,canActivate:[at],data:{allowedRoles:["archivo","archive","director general","subdirector general"]}},{path:"user-activities",component:Z,canActivate:[at],data:{allowedRoles:["director general","subdirector general","admin"]}}],St=(()=>{let p=class p{};p.\u0275fac=function(r){return new(r||p)},p.\u0275mod=V({type:p}),p.\u0275inj=z({imports:[O.forChild(Oe),O]});let i=p;return i})();var pi=(()=>{let p=class p{};p.\u0275fac=function(r){return new(r||p)},p.\u0275mod=V({type:p}),p.\u0275inj=z({imports:[U,_t,St,Q,Z]});let i=p;return i})();export{pi as DashboardModule};
