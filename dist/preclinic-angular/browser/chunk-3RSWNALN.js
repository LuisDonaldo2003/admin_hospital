import{b as he}from"./chunk-23WLUJ3U.js";import{a as ue}from"./chunk-MV3LUB43.js";import{a as N}from"./chunk-VOEI7TUP.js";import{c as j,g as G,h as q,j as J,l as z,m as Q,y as W}from"./chunk-K6AIGGO7.js";import{a as Y}from"./chunk-7IQVTAUF.js";import{b as V,c as U,d as F}from"./chunk-DSFCBPHH.js";import{Bc as _e,Ca as i,Cb as le,Cc as I,Eb as R,Fb as w,Gb as T,Ha as C,Jb as se,Ma as P,Na as ae,Nb as s,Ob as d,Pb as de,Ra as v,T as re,U as oe,Ua as ee,W as Z,Wa as m,Ya as K,ba as x,ca as M,cb as a,db as o,dc as L,eb as f,ec as B,fb as S,gb as y,ib as O,kb as b,kc as ce,lb as h,mc as A,ob as k,pc as D,qc as pe,xb as l,yb as p,yc as me,zb as g,zc as ge}from"./chunk-6AUGAOY5.js";import{a as ne,b as ie}from"./chunk-EQDQRRRY.js";var be=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=P({type:r,selectors:[["app-roles"]],decls:1,vars:0,template:function(n,t){n&1&&f(0,"router-outlet")},dependencies:[I,ge],encapsulation:2})}}return r})();var X=(()=>{class r{constructor(e,n){this.http=e,this.authService=n}listRoles(){let e=new D({Authorization:"Bearer "+this.authService.token}),n=N+"/roles";return this.http.get(n,{headers:e})}showRoles(e){let n=new D({Authorization:"Bearer "+this.authService.token}),t=N+"/roles/"+e;return this.http.get(t,{headers:n})}storeRoles(e){let n=new D({Authorization:"Bearer "+this.authService.token}),t=N+"/roles";return this.http.post(t,e,{headers:n})}editRoles(e,n){let t=new D({Authorization:"Bearer "+this.authService.token}),c=N+"/roles/"+n;return this.http.put(c,e,{headers:t})}deleteRoles(e){let n=new D({Authorization:"Bearer "+this.authService.token}),t=N+"/roles/"+e;return this.http.delete(t,{headers:n})}static{this.\u0275fac=function(n){return new(n||r)(Z(pe),Z(ue))}}static{this.\u0275prov=re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function ye(r,u){r&1&&(a(0,"div",27)(1,"div",28)(2,"strong"),l(3,"Error:"),o(),l(4),s(5,"translate"),f(6,"button",29),o()()),r&2&&(i(4),g(" ",d(5,1,"ALERT1")," "))}function Ee(r,u){r&1&&(a(0,"div",27)(1,"div",30)(2,"strong"),l(3),s(4,"translate"),o(),l(5),s(6,"translate"),f(7,"button",29),o()()),r&2&&(i(3),g("",d(4,2,"GREAT"),":"),i(2),g(" ",d(6,4,"GREAT_ROLE")," "))}function Ie(r,u){if(r&1&&(a(0,"div",27)(1,"div",31)(2,"strong"),l(3),s(4,"translate"),o(),l(5),f(6,"button",29),o()()),r&2){let e=h();i(3),g("",d(4,2,"ATTENTION"),":"),i(2),g(" ",e.text_validation," ")}}function ke(r,u){if(r&1){let e=O();a(0,"div",34)(1,"input",35),b("click",function(){let t=x(e).$implicit,c=h(3);return M(c.addPermission(t))}),o(),a(2,"label",36),l(3),s(4,"translate"),o()()}if(r&2){let e=u.$implicit;i(),k("id",e.menuValue),i(),m("for",e.menuValue),i(),g(" ",d(4,3,e.menuValue)," ")}}function Re(r,u){if(r&1&&(a(0,"div"),v(1,ke,5,5,"div",33),o()),r&2){let e=h().$implicit;i(),m("ngForOf",e.subMenus)}}function we(r,u){if(r&1){let e=O();a(0,"div")(1,"div",37)(2,"input",35),b("click",function(){x(e);let t=h().$implicit,c=h();return M(c.addPermission(t))}),o(),a(3,"label",36),l(4),s(5,"translate"),o()()()}if(r&2){let e=h().$implicit;i(2),k("id",e.menuValue),i(),m("for",e.menuValue),i(),g(" ",d(5,3,e.menuValue)," ")}}function Te(r,u){if(r&1&&(S(0),a(1,"tr")(2,"td"),l(3),s(4,"translate"),o(),a(5,"td"),v(6,Re,2,1,"div",32)(7,we,6,5,"div",32),o()(),y()),r&2){let e=u.$implicit;i(3),p(d(4,3,e.menuValue)),i(3),m("ngIf",(e.subMenus==null?null:e.subMenus.length)>0),i(),m("ngIf",(e.subMenus==null?null:e.subMenus.length)===0)}}var Me=(()=>{class r{constructor(e,n,t){this.DataService=e,this.RoleService=n,this.translate=t,this.sideBar=[],this.name="",this.permission=[],this.valid_form=!1,this.valid_form_succes=!1,this.text_validation=null,this.selectedLang=localStorage.getItem("language")||"en",this.translate.use(this.selectedLang)}ngOnInit(){this.DataService.sideBar&&this.DataService.sideBar.length>0&&(this.sideBar=this.DataService.sideBar[0].menu)}toggleLanguage(){this.selectedLang=this.selectedLang==="es"?"en":"es",this.translate.use(this.selectedLang),localStorage.setItem("language",this.selectedLang)}addPermission(e){if(e.permision){let n=this.permission.findIndex(t=>t===e.permision);n!==-1?this.permission.splice(n,1):this.permission.push(e.permision),console.log(this.permission)}}save(e){if(this.valid_form=!1,e.preventDefault(),!this.name||this.permission.length===0){this.valid_form=!0;return}let n={name:this.name,permissions:this.permission};this.valid_form_succes=!1,this.text_validation=null,this.RoleService.storeRoles(n).subscribe({next:t=>{if(console.log(t),t.message==403)this.text_validation=t.message_text;else{this.name="",this.permission=[],this.valid_form_succes=!0;let c=this.sideBar;this.sideBar=[],setTimeout(()=>{this.sideBar=c},50)}},error:t=>{console.error("Error en la petici\xF3n:",t),t.status===403?this.text_validation=t.error.message_text||"EL NOMBRE DEL ROL YA EXISTE":this.text_validation="Error desconocido. Intente de nuevo."}})}static{this.\u0275fac=function(n){return new(n||r)(C(Y),C(X),C(V))}}static{this.\u0275cmp=P({type:r,selectors:[["app-add-role-user"]],decls:53,vars:29,consts:[[1,"page-wrapper"],[1,"content"],[1,"page-header","mb-4"],[1,"row"],[1,"col"],["aria-label","breadcrumb"],[1,"breadcrumb","bg-light","p-2","rounded"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row","justify-content-center","g-4"],[1,"col-lg-8"],[1,"card","shadow-sm","border-0"],[1,"card-body"],[1,"card-title","mb-4"],["action","#","novalidate",""],[1,"mb-3","row","align-items-center"],["for","text",1,"col-md-2","col-form-label"],[1,"col-md-10"],["type","text","name","name","placeholder","Ej. Administrador",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-end"],[1,"btn","btn-primary",3,"click"],["class","mt-3",4,"ngIf"],[1,"table-responsive"],[1,"table","table-hover","align-middle"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"mt-3"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"],[4,"ngIf"],["class","form-check mb-1",4,"ngFor","ngForOf"],[1,"form-check","mb-1"],["type","checkbox",1,"form-check-input",3,"click","id"],[1,"form-check-label",3,"for"],[1,"form-check"]],template:function(n,t){n&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"nav",5)(6,"ol",6)(7,"li",7)(8,"a",8),l(9),s(10,"translate"),o()(),a(11,"li",9),l(12),s(13,"translate"),o()()()()()(),a(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"h4",14),l(19),s(20,"translate"),o(),a(21,"form",15)(22,"div",16)(23,"label",17),l(24),s(25,"translate"),o(),a(26,"div",18)(27,"input",19),T("ngModelChange",function(_){return w(t.name,_)||(t.name=_),_}),o()()(),a(28,"div",20)(29,"button",21),b("click",function(_){return t.save(_)}),l(30),s(31,"translate"),o()(),v(32,ye,7,3,"div",22)(33,Ee,8,6,"div",22)(34,Ie,7,4,"div",22),o()()()(),a(35,"div",11)(36,"div",12)(37,"div",13)(38,"h4",14),l(39),s(40,"translate"),o(),a(41,"div",23)(42,"table",24)(43,"thead",25)(44,"tr")(45,"th"),l(46),s(47,"translate"),o(),a(48,"th"),l(49),s(50,"translate"),o()()(),a(51,"tbody"),v(52,Te,8,5,"ng-container",26),o()()()()()()()()()),n&2&&(i(9),g("",d(10,13,"ROLES2")," >"),i(3),g(" ",d(13,15,"REGISTER_ROLE")," "),i(7),p(d(20,17,"CREATE_ROLE")),i(5),p(d(25,19,"NAME")),i(3),R("ngModel",t.name),i(3),g(" ",d(31,21,"SAVE")," "),i(2),m("ngIf",t.valid_form),i(),m("ngIf",t.valid_form_succes),i(),m("ngIf",t.text_validation),i(5),p(d(40,23,"ASIGNATION")),i(7),p(d(47,25,"SECCION")),i(3),p(d(50,27,"PERMISSIONS")),i(3),m("ngForOf",t.sideBar))},dependencies:[A,L,B,W,Q,j,G,q,z,J,F,U],styles:[".page-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:1rem;border:4px solid var(--user-border-color, #000)!important;background-color:var(--user-card-bg, #fff)!important;color:var(--user-card-text-color, #000)!important;box-shadow:0 4px 12px #0000000d;transition:background-color .3s,color .3s,border-color .3s}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{color:var(--user-card-text-color, #000)!important}.card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:var(--user-card-text-color, #000)!important;font-weight:600}.form-control[_ngcontent-%COMP%], select.form-control[_ngcontent-%COMP%]{border-radius:.5rem;padding:.6rem 1rem;border:1px solid #ccc;background-color:#fff;color:#000;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus, select.form-control[_ngcontent-%COMP%]:focus{border-color:var(--user-border-color, #0d6efd);box-shadow:0 0 0 3px #0d6efd40;outline:none}.form-control.is-invalid[_ngcontent-%COMP%], select.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;background-color:#ffe6e6}.btn[_ngcontent-%COMP%]{font-weight:500;padding:.5rem 1.5rem}.alert[_ngcontent-%COMP%]{border-radius:.375rem;font-size:.875rem}body.dark-mode[_ngcontent-%COMP%]   .page-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:var(--user-card-bg, #23221c)!important;border:4px solid var(--user-border-color, #ff4f4f)!important;color:var(--user-card-text-color, #fff)!important;box-shadow:0 4px 12px #0009}body.dark-mode[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:var(--user-card-text-color, #fff)!important}body.dark-mode[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]{background-color:#2a2a3a;color:#f1f1f1;border:1px solid #444}body.dark-mode[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#aaa}"]})}}return r})();var Le=r=>["/roles/list/edit/",r];function Be(r,u){if(r&1){let e=O();S(0),a(1,"div",37)(2,"button",38),f(3,"i",39),l(4),s(5,"translate"),o(),a(6,"div",40)(7,"a",41),f(8,"i",42),l(9),s(10,"translate"),o(),a(11,"a",43),b("click",function(){x(e);let t=h().$implicit,c=h();return M(c.selectRole(t))}),f(12,"i",44),l(13),s(14,"translate"),o()()(),y()}if(r&2){let e=h().$implicit;i(4),g(" ",d(5,5,"OPTIONS")," "),i(3),m("routerLink",se(11,Le,e.id)),i(2),g(" ",d(10,7,"EDIT")," "),i(2),ee("data-bs-target","#delete_role-"+e.id),i(2),g(" ",d(14,9,"DELETE")," ")}}function Ae(r,u){if(r&1&&(a(0,"tr")(1,"td"),l(2),o(),a(3,"td"),l(4),o(),a(5,"td"),l(6),s(7,"date"),o(),a(8,"td",35),v(9,Be,15,13,"ng-container",36),o()()),r&2){let e=u.$implicit;i(2),p(e.name),i(2),g(" ",e.permission_pluck.length>0?e.permission_pluck.join(", "):"ALL PERMISSIONS"," "),i(2),p(de(7,4,e.created_at,"yyyy-MM-dd")),i(3),m("ngIf",e.id!==1)}}function De(r,u){if(r&1){let e=O();S(0),a(1,"li",33)(2,"a",34),b("click",function(){let t=x(e).$implicit,c=h();return M(c.moveToPage(t))}),l(3),o()(),y()}if(r&2){let e=u.$implicit,n=h();i(),K("active",e===n.currentPage),i(2),p(e)}}function Ne(r,u){if(r&1){let e=O();a(0,"div",46)(1,"div",47)(2,"div",48)(3,"div",49),f(4,"img",50),a(5,"h5",51),l(6),s(7,"translate"),a(8,"strong"),l(9),o(),l(10,"? "),o(),a(11,"div",52)(12,"button",53),l(13),s(14,"translate"),o(),a(15,"button",54),b("click",function(){x(e);let t=h(2);return M(t.deleteRol())}),l(16),s(17,"translate"),o()()()()()()}if(r&2){let e=h().$implicit;ee("id","delete_role-"+e.id),i(6),g(" ",d(7,5,"DELETE_CONFIRMATION2")," "),i(3),p(e.name),i(4),p(d(14,7,"CANCEL")),i(3),p(d(17,9,"DELETE"))}}function Ve(r,u){if(r&1&&(S(0),v(1,Ne,18,11,"div",45),y()),r&2){let e=u.$implicit;i(),m("ngIf",e.id!==1)}}var Oe=(()=>{class r{constructor(e,n){this.RoleService=e,this.translate=n,this.rolesList=[],this.showFilter=!1,this.searchDataValue="",this.lastIndex=0,this.pageSize=10,this.totalData=0,this.skip=0,this.limit=this.pageSize,this.pageIndex=0,this.serialNumberArray=[],this.currentPage=1,this.pageNumberArray=[],this.pageSelection=[],this.totalPages=0,this.role_generals=[],this.selectedLang=localStorage.getItem("language")||"en",this.translate.use(this.selectedLang)}ngOnInit(){this.getTableData()}toggleLanguage(){this.selectedLang=this.selectedLang==="es"?"en":"es",this.translate.use(this.selectedLang),localStorage.setItem("language",this.selectedLang)}getTableData(){this.rolesList=[],this.serialNumberArray=[],this.RoleService.listRoles().subscribe(e=>{console.log(e),this.totalData=e.roles.length,this.role_generals=e.roles.map(n=>ie(ne({},n),{permissions:n.permission_pluck||[]})).sort((n,t)=>n.name.localeCompare(t.name)),this.getTableDataGeneral()})}getTableDataGeneral(){this.rolesList=[],this.serialNumberArray=[],this.role_generals.map((e,n)=>{let t=n+1;n>=this.skip&&t<=this.limit&&(this.rolesList.push(e),this.serialNumberArray.push(t))}),this.dataSource=new he(this.rolesList),this.calculateTotalPages(this.totalData,this.pageSize)}selectRole(e){this.role_selected=e}deleteRol(){this.RoleService.deleteRoles(this.role_selected.id).subscribe(e=>{console.log(e);let n=this.rolesList.findIndex(t=>t.id==this.role_selected.id);n!=-1&&(this.rolesList.splice(n,1),$("#delete_patient").hide(),$("#delete_patient").removeClass("show"),$(".modal-backdrop").remove(),$("body").removeClass(),$("body").removeAttr("style"),this.role_selected=null)})}searchData(e){this.dataSource.filter=e.trim().toLowerCase(),this.rolesList=this.dataSource.filteredData}sortData(e){let n=this.rolesList.slice();!e.active||e.direction===""?this.rolesList=n:this.rolesList=n.sort((t,c)=>{let _=t[e.active],E=c[e.active];return(_<E?-1:1)*(e.direction==="asc"?1:-1)})}getMoreData(e){e=="next"?(this.currentPage++,this.pageIndex=this.currentPage-1,this.limit+=this.pageSize,this.skip=this.pageSize*this.pageIndex,this.getTableDataGeneral()):e=="previous"&&(this.currentPage--,this.pageIndex=this.currentPage-1,this.limit-=this.pageSize,this.skip=this.pageSize*this.pageIndex,this.getTableDataGeneral())}moveToPage(e){this.currentPage=e,this.skip=this.pageSelection[e-1].skip,this.limit=this.pageSelection[e-1].limit,e>this.currentPage?this.pageIndex=e-1:e<this.currentPage&&(this.pageIndex=e+1),this.getTableDataGeneral()}PageSize(){this.pageSelection=[],this.limit=this.pageSize,this.skip=0,this.currentPage=1,this.searchDataValue="",this.getTableDataGeneral()}calculateTotalPages(e,n){this.pageNumberArray=[],this.totalPages=e/n,this.totalPages%1!=0&&(this.totalPages=Math.trunc(this.totalPages+1));for(var t=1;t<=this.totalPages;t++){let c=n*t,_=c-n;this.pageNumberArray.push(t),this.pageSelection.push({skip:_,limit:c})}}static{this.\u0275fac=function(n){return new(n||r)(C(X),C(V))}}static{this.\u0275cmp=P({type:r,selectors:[["app-list-role-user"]],decls:68,vars:49,consts:[[1,"page-wrapper"],[1,"content","list-staff"],[1,"page-header","mb-4"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb","bg-light","p-2","rounded"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"card","card-list","shadow","border-0"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center","flex-wrap","mb-3","header-bar"],[1,"mb-0","fw-semibold"],[1,"d-flex","align-items-center","gap-2","flex-wrap"],[1,"input-group","search-input"],["type","text","placeholder","Buscar...",1,"form-control",3,"ngModelChange","ngModel"],[1,"input-group-text"],[1,"fa","fa-search"],["routerLink","/roles/register",1,"btn","btn-options","d-flex","align-items-center","gap-1"],[1,"fa","fa-plus"],[1,"d-none","d-sm-inline"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-refresh"],[1,"table-responsive"],["matSort","",1,"table","table-striped","table-hover","align-middle","text-nowrap",3,"matSortChange"],[1,"table-light","text-center"],["mat-sort-header","name"],["mat-sort-header","permisos"],["mat-sort-header","created_at"],["mat-sort-header","actions"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","mt-3","flex-wrap"],[1,"pagination-info","small"],[1,"pagination","mb-0"],[1,"page-item"],[1,"page-link",3,"click"],[1,"text-center"],[4,"ngIf"],[1,"dropdown","d-flex","justify-content-center","align-items-center"],["data-bs-toggle","dropdown",1,"btn","btn-options","dropdown-toggle"],[1,"fa","fa-cogs","me-1"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"routerLink"],[1,"fa","fa-pen","me-2"],["href","javascript:void(0);","data-bs-toggle","modal",1,"dropdown-item","text-danger",3,"click"],[1,"fa","fa-trash","me-2"],["class","modal fade","tabindex","-1","aria-hidden","true",4,"ngIf"],["tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-body","text-center","p-4"],["src","assets/img/sent.png","alt","","width","50","height","46"],[1,"mt-3"],[1,"mt-4","d-flex","justify-content-center","gap-3"],["data-bs-dismiss","modal",1,"btn","btn-light"],["data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"]],template:function(n,t){n&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ol",5)(6,"li",6),l(7),s(8,"translate"),o(),a(9,"li",7),l(10),s(11,"translate"),o()()()()(),a(12,"div",3)(13,"div",4)(14,"div",8)(15,"div",9)(16,"div",10)(17,"h4",11),l(18),s(19,"translate"),o(),a(20,"div",12)(21,"div",13)(22,"input",14),T("ngModelChange",function(_){return w(t.searchDataValue,_)||(t.searchDataValue=_),_}),b("ngModelChange",function(){return t.searchData(t.searchDataValue)}),o(),a(23,"span",15),f(24,"i",16),o()(),a(25,"a",17),f(26,"i",18),a(27,"span",19),l(28),s(29,"translate"),o()(),a(30,"button",20),b("click",function(){return t.PageSize()}),f(31,"i",21),o()()(),a(32,"div",22)(33,"table",23),b("matSortChange",function(_){return t.sortData(_)}),a(34,"thead",24)(35,"tr")(36,"th",25),l(37),s(38,"translate"),o(),a(39,"th",26),l(40),s(41,"translate"),o(),a(42,"th",27),l(43),s(44,"translate"),o(),a(45,"th",28),l(46),s(47,"translate"),o()()(),a(48,"tbody"),v(49,Ae,10,7,"tr",29),o()()(),a(50,"div",30)(51,"div",31),l(52),s(53,"translate"),s(54,"translate"),s(55,"translate"),o(),a(56,"nav")(57,"ul",32)(58,"li",33)(59,"a",34),b("click",function(){return t.getMoreData("previous")}),l(60),s(61,"translate"),o()(),v(62,De,4,3,"ng-container",29),a(63,"li",33)(64,"a",34),b("click",function(){return t.getMoreData("next")}),l(65),s(66,"translate"),o()()()()()()()()()()(),v(67,Ve,2,1,"ng-container",29)),n&2&&(i(7),g("",d(8,23,"ROLES2")," >"),i(3),p(d(11,25,"ROLE_LIST")),i(8),p(d(19,27,"ROLE_LISTING")),i(4),R("ngModel",t.searchDataValue),i(6),p(d(29,29,"NEW")),i(9),p(d(38,31,"NAME")),i(3),p(d(41,33,"PERMISSIONS")),i(3),p(d(44,35,"REGISTER")),i(3),p(d(47,37,"ACTIONS")),i(3),m("ngForOf",t.rolesList),i(3),le(" ",d(53,39,"SHOWING")," ",t.serialNumberArray[0]," ",d(54,41,"TO")," ",t.totalData," ",d(55,43,"RECORDS")," "),i(6),K("disabled",t.currentPage===1),i(2),p(d(61,45,"PREVIOUS")),i(2),m("ngForOf",t.pageNumberArray),i(),K("disabled",t.currentPage===t.pageNumberArray[t.pageNumberArray.length-1]),i(2),p(d(66,47,"NEXT")),i(2),m("ngForOf",t.rolesList))},dependencies:[A,L,B,ce,W,j,G,z,I,_e,F,U],styles:[".card.card-list[_ngcontent-%COMP%]{border-radius:1rem;padding:1.5rem;border:4px solid var(--user-border-color, #000)!important;background-color:var(--user-card-bg, #fff)!important;color:var(--user-card-text-color, #000)!important;position:relative;z-index:1;transition:background-color .3s,color .3s,border-color .3s}.card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{border-radius:1rem;background-color:transparent!important;color:var(--user-card-text-color, #000)!important}.card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]{color:var(--user-card-text-color, #000)!important}.card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0;width:100%;background-color:#fff!important;border:1px solid #ccc;border-radius:12px}.card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:.75rem;text-align:center;vertical-align:middle;color:var(--user-card-text-color, #000)!important}.card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;color:var(--user-card-text-color, #000)!important}.card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-top-left-radius:12px}.card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-top-right-radius:12px}.card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:12px}.card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:12px}.card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2), .card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){max-width:300px;white-space:normal;word-break:break-word}.card.card-list[_ngcontent-%COMP%]   .btn-options[_ngcontent-%COMP%]{background-color:#3b82f6;border:none;padding:6px 14px;font-weight:500;font-size:14px;color:#fff;border-radius:8px;transition:all .2s ease-in-out;display:inline-flex;align-items:center}.card.card-list[_ngcontent-%COMP%]   .btn-options[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:6px}.card.card-list[_ngcontent-%COMP%]   .btn-options[_ngcontent-%COMP%]:hover{background-color:#2563eb;box-shadow:0 4px 12px #3b82f64d}body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]{background-color:var(--user-card-bg, #23221c)!important;border-color:var(--user-border-color, #ff4f4f)!important;color:var(--user-card-text-color, #fff)!important}body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]{color:var(--user-card-text-color, #fff)!important}body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{background-color:#23221c!important;border:1px solid #444;border-radius:12px}body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #555;color:var(--user-card-text-color, #fff)!important;text-align:center;vertical-align:middle}body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#23221c}body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   .btn-options[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}body.dark-mode[_ngcontent-%COMP%]   .card.card-list[_ngcontent-%COMP%]   .btn-options[_ngcontent-%COMP%]:hover{background-color:#2563eb;box-shadow:0 4px 12px #3b82f64d}"]})}}return r})();function Ue(r,u){r&1&&(a(0,"div",28)(1,"div",29)(2,"strong"),l(3,"Error:"),o(),l(4),s(5,"translate"),f(6,"button",30),o()()),r&2&&(i(4),g(" ",d(5,1,"ALERT1")," "))}function Fe(r,u){r&1&&(a(0,"div",28)(1,"div",31)(2,"strong"),l(3),s(4,"translate"),o(),l(5),s(6,"translate"),f(7,"button",30),o()()),r&2&&(i(3),g("",d(4,2,"GREAT"),":"),i(2),g(" ",d(6,4,"GOD_ROLE")," "))}function je(r,u){if(r&1&&(a(0,"div",28)(1,"div",32)(2,"strong"),l(3),s(4,"translate"),o(),l(5),f(6,"button",30),o()()),r&2){let e=h();i(3),g("",d(4,2,"ATTENTION"),":"),i(2),g(" ",e.text_validation," ")}}function Ge(r,u){if(r&1){let e=O();a(0,"div",35)(1,"input",36),b("click",function(){let t=x(e).$implicit,c=h(3);return M(c.addPermission(t))}),o(),a(2,"label",37),l(3),o()()}if(r&2){let e=u.$implicit,n=h(3);i(),k("id",e.menuValue),m("checked",n.permissions==null?null:n.permissions.includes(e.permision)),i(),m("for",e.menuValue),i(),g(" ",e.menuValueTranslated," ")}}function $e(r,u){if(r&1&&(a(0,"div"),v(1,Ge,4,4,"div",34),o()),r&2){let e=h().$implicit;i(),m("ngForOf",e.subMenus)}}function ze(r,u){if(r&1){let e=O();a(0,"div")(1,"div",38)(2,"input",36),b("click",function(){x(e);let t=h().$implicit,c=h();return M(c.addPermission(t))}),o(),a(3,"label",37),l(4),o()()()}if(r&2){let e=h().$implicit,n=h();i(2),k("id",e.menuValue),m("checked",n.permissions==null?null:n.permissions.includes(e.permision)),i(),m("for",e.menuValue),i(),g(" ",e.menuValue," ")}}function We(r,u){if(r&1&&(S(0),a(1,"tr")(2,"td"),l(3),o(),a(4,"td"),v(5,$e,2,1,"div",33)(6,ze,5,4,"div",33),o()(),y()),r&2){let e=u.$implicit;i(3),p(e.menuValueTranslated),i(2),m("ngIf",(e.subMenus==null?null:e.subMenus.length)>0),i(),m("ngIf",(e.subMenus==null?null:e.subMenus.length)===0)}}var Pe=(()=>{class r{constructor(e,n,t,c){this.DataService=e,this.RoleService=n,this.activedRoute=t,this.translate=c,this.sideBar=[],this.name="",this.permissions=[],this.valid_form=!1,this.valid_form_success=!1,this.text_validation=null,this.selectedLang=localStorage.getItem("language")||"en",this.translate.use(this.selectedLang)}ngOnInit(){this.sideBar=this.DataService.sideBar[0].menu.map(e=>{let n=e.menuValue,t=this.translate.instant(n);return e.menuValueTranslated=t!==n?t:n,Array.isArray(e.subMenus)&&(e.subMenus=e.subMenus.map(c=>{let _=c.menuValue,E=this.translate.instant(_);return c.menuValueTranslated=E!==_?E:_,c})),e}),this.activedRoute.params.subscribe(e=>{this.role_id=e.id}),this.showRole()}toggleLanguage(){this.selectedLang=this.selectedLang==="es"?"en":"es",this.translate.use(this.selectedLang),localStorage.setItem("language",this.selectedLang),this.sideBar=this.DataService.sideBar[0].menu.map(e=>{let n=e.menuValue,t=this.translate.instant(n);return e.menuValueTranslated=t!==n?t:n,Array.isArray(e.subMenus)&&(e.subMenus=e.subMenus.map(c=>{let _=c.menuValue,E=this.translate.instant(_);return c.menuValueTranslated=E!==_?E:_,c})),e})}showRole(){this.RoleService.showRoles(this.role_id).subscribe(e=>{console.log(e),this.name=e.name,this.permissions=Array.isArray(e.permission_pluck)?e.permission_pluck:[]})}addPermission(e){if(e.permision){let n=this.permissions.findIndex(t=>t==e.permision);n!=-1?this.permissions.splice(n,1):this.permissions.push(e.permision),console.log(this.permissions)}}save(){if(this.valid_form=!1,!this.name||this.permissions.length==0){this.valid_form=!0;return}let e={name:this.name,permissions:this.permissions};this.valid_form_success=!1,this.text_validation=null,this.RoleService.editRoles(e,this.role_id).subscribe(n=>{if(console.log(n),n.message==403){this.text_validation=n.message_text;return}this.valid_form_success=!0})}static{this.\u0275fac=function(n){return new(n||r)(C(Y),C(X),C(me),C(V))}}static{this.\u0275cmp=P({type:r,selectors:[["app-edit-role-user"]],decls:55,vars:30,consts:[[1,"page-wrapper"],[1,"content"],[1,"page-header","mb-4"],[1,"row"],[1,"col"],["aria-label","breadcrumb"],[1,"breadcrumb","bg-light","p-2","rounded"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row","justify-content-center","g-4"],[1,"col-lg-8"],[1,"card","shadow-sm","border-0"],[1,"card-body"],[1,"card-title","mb-4"],[1,"text-primary"],["action","#","novalidate",""],[1,"mb-3","row","align-items-center"],[1,"col-md-2","col-form-label"],[1,"col-md-10"],["type","text","name","name","placeholder","Nuevo nombre del rol",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-end"],[1,"btn","btn-primary",3,"click"],["class","mt-3",4,"ngIf"],[1,"table-responsive"],[1,"table","table-hover","align-middle"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"mt-3"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"],[4,"ngIf"],["class","form-check mb-1",4,"ngFor","ngForOf"],[1,"form-check","mb-1"],["type","checkbox",1,"form-check-input",3,"click","checked","id"],[1,"form-check-label",3,"for"],[1,"form-check"]],template:function(n,t){n&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"nav",5)(6,"ol",6)(7,"li",7)(8,"a",8),l(9),s(10,"translate"),o()(),a(11,"li",9),l(12),s(13,"translate"),o()()()()()(),a(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"h4",14),l(19),s(20,"translate"),a(21,"span",15),l(22),o()(),a(23,"form",16)(24,"div",17)(25,"label",18),l(26),s(27,"translate"),o(),a(28,"div",19)(29,"input",20),T("ngModelChange",function(_){return w(t.name,_)||(t.name=_),_}),o()()(),a(30,"div",21)(31,"button",22),b("click",function(){return t.save()}),l(32),s(33,"translate"),o()(),v(34,Ue,7,3,"div",23)(35,Fe,8,6,"div",23)(36,je,7,4,"div",23),o()()()(),a(37,"div",11)(38,"div",12)(39,"div",13)(40,"h4",14),l(41),s(42,"translate"),o(),a(43,"div",24)(44,"table",25)(45,"thead",26)(46,"tr")(47,"th"),l(48),s(49,"translate"),o(),a(50,"th"),l(51),s(52,"translate"),o()()(),a(53,"tbody"),v(54,We,7,3,"ng-container",27),o()()()()()()()()()),n&2&&(i(9),g("",d(10,14,"ROLES2")," > "),i(3),p(d(13,16,"EDITION")),i(7),g("",d(20,18,"EDIT_ROLE"),": "),i(3),p(t.name),i(4),p(d(27,20,"NAME")),i(3),R("ngModel",t.name),i(3),p(d(33,22,"EDIT")),i(2),m("ngIf",t.valid_form),i(),m("ngIf",t.valid_form_success),i(),m("ngIf",t.text_validation),i(5),p(d(42,24,"ASIGNATION")),i(7),p(d(49,26,"SECCION")),i(3),p(d(52,28,"PERMISSIONS")),i(3),m("ngForOf",t.sideBar))},dependencies:[W,Q,j,G,q,z,J,A,L,B,F,U],styles:[".page-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:1rem;border:4px solid var(--user-border-color, #000)!important;background-color:var(--user-card-bg, #fff)!important;color:var(--user-card-text-color, #000)!important;box-shadow:0 4px 12px #0000000d;transition:background-color .3s,color .3s,border-color .3s}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{color:var(--user-card-text-color, #000)!important}.card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:var(--user-card-text-color, #000)!important;font-weight:600}.form-control[_ngcontent-%COMP%], select.form-control[_ngcontent-%COMP%]{border-radius:.5rem;padding:.6rem 1rem;border:1px solid #ccc;background-color:#fff;color:#000;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus, select.form-control[_ngcontent-%COMP%]:focus{border-color:var(--user-border-color, #0d6efd);box-shadow:0 0 0 3px #0d6efd40;outline:none}.form-control.is-invalid[_ngcontent-%COMP%], select.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;background-color:#ffe6e6}.btn[_ngcontent-%COMP%]{font-weight:500;padding:.5rem 1.5rem}.alert[_ngcontent-%COMP%]{border-radius:.375rem;font-size:.875rem}body.dark-mode[_ngcontent-%COMP%]   .page-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:var(--user-card-bg, #23221c)!important;border:4px solid var(--user-border-color, #ff4f4f)!important;color:var(--user-card-text-color, #fff)!important;box-shadow:0 4px 12px #0009}body.dark-mode[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:var(--user-card-text-color, #fff)!important}body.dark-mode[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]{background-color:#2a2a3a;color:#f1f1f1;border:1px solid #444}body.dark-mode[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#aaa}"]})}}return r})();var Xe=[{path:"",component:be,children:[{path:"register",component:Me},{path:"list",component:Oe},{path:"list/edit/:id",component:Pe}]}],vt=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=ae({type:r})}static{this.\u0275inj=oe({imports:[I.forChild(Xe),I]})}}return r})();export{be as a,Me as b,Oe as c,Pe as d,vt as e};
